(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noopOriginConfig=t.maybeRenderError=t.OriginReadynessContext=t.originConfigs=t.useSettings=t.renderSnippet=t.findOccurencesAndCompileSearchResults=t.renderSubSnippet=t.filterSubSnippets=t.extractSubSnippets=t.resolvePossiblyOldId=t.isWindows=t.isMac=t.isElectron=t.useElectronState=t.ChangePasswordForm=t.ForgotPasswordForm=t.SignInForm=t.SignUpForm=t.getConfigsForButtons=t.getConfigsForInputs=t.getConfigForNew=t.SnippetEditor=t.useAppState=t.getElectron=t.bootstrapSnippet=void 0;var r=n(60);Object.defineProperty(t,"bootstrapSnippet",{enumerable:!0,get:function(){return r.bootstrapSnippet}});var o=n(114);Object.defineProperty(t,"getElectron",{enumerable:!0,get:function(){return o.getElectron}});var i=n(205);Object.defineProperty(t,"useAppState",{enumerable:!0,get:function(){return i.useMegaSyncedAppState}});var a=n(314);Object.defineProperty(t,"SnippetEditor",{enumerable:!0,get:function(){return a.SnippetEditor}});var s=n(52);Object.defineProperty(t,"getConfigForNew",{enumerable:!0,get:function(){return s.getConfigForNew}}),Object.defineProperty(t,"getConfigsForInputs",{enumerable:!0,get:function(){return s.getConfigsForInputs}}),Object.defineProperty(t,"getConfigsForButtons",{enumerable:!0,get:function(){return s.getConfigsForButtons}});var u=n(181);Object.defineProperty(t,"SignUpForm",{enumerable:!0,get:function(){return u.SignUpForm}});var c=n(180);Object.defineProperty(t,"SignInForm",{enumerable:!0,get:function(){return c.SignInForm}});var l=n(179);Object.defineProperty(t,"ForgotPasswordForm",{enumerable:!0,get:function(){return l.ForgotPasswordForm}});var d=n(178);Object.defineProperty(t,"ChangePasswordForm",{enumerable:!0,get:function(){return d.ChangePasswordForm}});var p=n(319);Object.defineProperty(t,"useElectronState",{enumerable:!0,get:function(){return p.useElectronState}});var f=n(39);Object.defineProperty(t,"isElectron",{enumerable:!0,get:function(){return f.isElectron}}),Object.defineProperty(t,"isMac",{enumerable:!0,get:function(){return f.isMac}}),Object.defineProperty(t,"isWindows",{enumerable:!0,get:function(){return f.isWindows}});var h=n(164);Object.defineProperty(t,"resolvePossiblyOldId",{enumerable:!0,get:function(){return h.resolvePossiblyOldId}});var m=n(320);Object.defineProperty(t,"extractSubSnippets",{enumerable:!0,get:function(){return m.extractSubSnippets}});var g=n(321);Object.defineProperty(t,"filterSubSnippets",{enumerable:!0,get:function(){return g.filterSubSnippets}});var v=n(323);Object.defineProperty(t,"renderSubSnippet",{enumerable:!0,get:function(){return v.renderSubSnippet}});var b=n(134);Object.defineProperty(t,"findOccurencesAndCompileSearchResults",{enumerable:!0,get:function(){return b.findOccurencesAndCompileSearchResults}});var y=n(324);Object.defineProperty(t,"renderSnippet",{enumerable:!0,get:function(){return y.renderSnippet}});var O=n(325);Object.defineProperty(t,"useSettings",{enumerable:!0,get:function(){return O.useSettings}});var S=n(90);Object.defineProperty(t,"originConfigs",{enumerable:!0,get:function(){return S.originConfigs}}),Object.defineProperty(t,"OriginReadynessContext",{enumerable:!0,get:function(){return S.OriginReadynessContext}});var _=n(66);Object.defineProperty(t,"maybeRenderError",{enumerable:!0,get:function(){return _.maybeRenderError}});var w=n(177);Object.defineProperty(t,"noopOriginConfig",{enumerable:!0,get:function(){return w.noopOriginConfig}})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.useDimensions=t.trackScrollTop=t.useScrollTop=t.useReducerWithEffects=t.parseOffOrOn=t.useToggle=t.useFactory=t.useScrollIntoViewForSelection=t.makeDefaultSelectionKeyHandlerChain=t.useSelection=t.cyclicCounter=t.drag=t.onStartDrag=t.useAutoFocusingInputField=t.useEditableLabel=t.makeEditableLabelInputFieldBindings=t.makeEditableLabelLabelBindings=t.treeView=t.findIndex=t.makeDefaultTreeViewKeyHandlerChain=t.makeTreeViewWrapperBindings=t.makeInputFieldBindings=t.useInputField=t.isExactPath=t.isSubPath=t.compileTree=t.useStateChangeEffect=t.buildTransitionMap=t.useStateMachine=t.useScrollIntoView=t.useRefsCallback=t.adaptKeyboardEventHandlerChainItem=t.adaptHandlerChainItem=t.pipe=t.adapt=t.preventDefault=t.buildKeyboardEventHandlerChainItem=t.buildHandler=t.normalizeCounter=t.KEY_CODES=void 0;var i=n(78);Object.defineProperty(t,"KEY_CODES",{enumerable:!0,get:function(){return i.KEY_CODES}}),Object.defineProperty(t,"normalizeCounter",{enumerable:!0,get:function(){return i.normalizeCounter}}),Object.defineProperty(t,"buildHandler",{enumerable:!0,get:function(){return i.buildHandler}}),Object.defineProperty(t,"buildKeyboardEventHandlerChainItem",{enumerable:!0,get:function(){return i.buildKeyboardEventHandlerChainItem}}),Object.defineProperty(t,"preventDefault",{enumerable:!0,get:function(){return i.preventDefault}}),Object.defineProperty(t,"adapt",{enumerable:!0,get:function(){return i.adapt}}),Object.defineProperty(t,"pipe",{enumerable:!0,get:function(){return i.pipe}}),Object.defineProperty(t,"adaptHandlerChainItem",{enumerable:!0,get:function(){return i.adaptHandlerChainItem}}),Object.defineProperty(t,"adaptKeyboardEventHandlerChainItem",{enumerable:!0,get:function(){return i.adaptKeyboardEventHandlerChainItem}});var a=n(211);Object.defineProperty(t,"useRefsCallback",{enumerable:!0,get:function(){return a.useRefsCallback}});var s=n(137);Object.defineProperty(t,"useScrollIntoView",{enumerable:!0,get:function(){return s.useScrollIntoView}});var u=n(212);Object.defineProperty(t,"useStateMachine",{enumerable:!0,get:function(){return u.useStateMachine}}),Object.defineProperty(t,"buildTransitionMap",{enumerable:!0,get:function(){return u.buildTransitionMap}});var c=n(117);Object.defineProperty(t,"useStateChangeEffect",{enumerable:!0,get:function(){return c.useStateChangeEffect}});var l=n(118);Object.defineProperty(t,"compileTree",{enumerable:!0,get:function(){return l.compileTree}}),Object.defineProperty(t,"isSubPath",{enumerable:!0,get:function(){return l.isSubPath}}),Object.defineProperty(t,"isExactPath",{enumerable:!0,get:function(){return l.isExactPath}});var d=n(214);Object.defineProperty(t,"useInputField",{enumerable:!0,get:function(){return d.useInputField}}),Object.defineProperty(t,"makeInputFieldBindings",{enumerable:!0,get:function(){return d.makeInputFieldBindings}});var p=n(138),f=n(139),h=n(140),m=n(140);Object.defineProperty(t,"makeTreeViewWrapperBindings",{enumerable:!0,get:function(){return m.makeTreeViewWrapperBindings}}),Object.defineProperty(t,"makeDefaultTreeViewKeyHandlerChain",{enumerable:!0,get:function(){return m.makeDefaultTreeViewKeyHandlerChain}}),Object.defineProperty(t,"findIndex",{enumerable:!0,get:function(){return m.findIndex}});var g=n(215);t.treeView={useTreeView:h.useTreeView,makeTreeViewEntryBindings:g.makeTreeViewEntryBindings,makeExpandedIconBindings:g.makeExpandedIconBindings,compileEntries:p.compileEntries,updateCollapsedPaths:p.updateCollapsedPaths,makeLeftNavigationHandler:f.makeLeftNavigationHandler,makeRightNavigationHandler:f.makeRightNavigationHandler,makeVerticalNavigationHandler:f.makeVerticalNavigationHandler,makeTreeViewWrapperBindings:h.makeTreeViewWrapperBindings,makeDefaultTreeViewKeyHandlerChain:h.makeDefaultTreeViewKeyHandlerChain};var v=n(141);Object.defineProperty(t,"makeEditableLabelLabelBindings",{enumerable:!0,get:function(){return v.makeEditableLabelLabelBindings}}),Object.defineProperty(t,"makeEditableLabelInputFieldBindings",{enumerable:!0,get:function(){return v.makeEditableLabelInputFieldBindings}});var b=n(141);Object.defineProperty(t,"useEditableLabel",{enumerable:!0,get:function(){return b.useEditableLabel}});var y=n(216);Object.defineProperty(t,"useAutoFocusingInputField",{enumerable:!0,get:function(){return y.useAutoFocusingInputField}});var O=n(143);Object.defineProperty(t,"onStartDrag",{enumerable:!0,get:function(){return O.onStartDrag}});var S=n(143);t.drag={useDrag:S.useDrag};var _=n(97);t.cyclicCounter={useCyclicCounter:_.useCyclicCounter};var w=n(217);Object.defineProperty(t,"useSelection",{enumerable:!0,get:function(){return w.useSelection}}),Object.defineProperty(t,"makeDefaultSelectionKeyHandlerChain",{enumerable:!0,get:function(){return w.makeDefaultSelectionKeyHandlerChain}}),Object.defineProperty(t,"useScrollIntoViewForSelection",{enumerable:!0,get:function(){return w.useScrollIntoViewForSelection}});var j=n(85);Object.defineProperty(t,"useFactory",{enumerable:!0,get:function(){return j.useFactory}});var E=n(142);Object.defineProperty(t,"useToggle",{enumerable:!0,get:function(){return E.useToggle}}),Object.defineProperty(t,"parseOffOrOn",{enumerable:!0,get:function(){return E.parseOffOrOn}});var x=n(144);Object.defineProperty(t,"useReducerWithEffects",{enumerable:!0,get:function(){return x.useReducerWithEffects}});var P=n(218);Object.defineProperty(t,"useScrollTop",{enumerable:!0,get:function(){return P.useScrollTop}}),Object.defineProperty(t,"trackScrollTop",{enumerable:!0,get:function(){return P.trackScrollTop}});var C=n(219);Object.defineProperty(t,"useDimensions",{enumerable:!0,get:function(){return C.useDimensions}}),o(n(220),t),o(n(119),t),o(n(221),t),o(n(222),t)},,function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(206),t),o(n(207),t),o(n(208),t),o(n(209),t),o(n(210),t)},,,function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventListenerManager=t.useRequestFocus=t.useTimeout=t.useObservable=t.TreeView=t.SwitchedEditableLabel=t.SidePanel=t.Selection=t.ScrollShadows=t.ResizableSidePanel=t.Modal=t.Blurable=t.AutoFocusingInputField=t.Autocomplete=void 0,n(326);var i=n(327);Object.defineProperty(t,"Autocomplete",{enumerable:!0,get:function(){return i.Autocomplete}});var a=n(185);Object.defineProperty(t,"AutoFocusingInputField",{enumerable:!0,get:function(){return a.AutoFocusingInputField}});var s=n(186);Object.defineProperty(t,"Blurable",{enumerable:!0,get:function(){return s.Blurable}});var u=n(187);Object.defineProperty(t,"Modal",{enumerable:!0,get:function(){return u.Modal}});var c=n(331);Object.defineProperty(t,"ResizableSidePanel",{enumerable:!0,get:function(){return c.ResizableSidePanel}});var l=n(190);Object.defineProperty(t,"ScrollShadows",{enumerable:!0,get:function(){return l.ScrollShadows}});var d=n(335);Object.defineProperty(t,"Selection",{enumerable:!0,get:function(){return d.Selection}});var p=n(188);Object.defineProperty(t,"SidePanel",{enumerable:!0,get:function(){return p.SidePanel}});var f=n(191);Object.defineProperty(t,"SwitchedEditableLabel",{enumerable:!0,get:function(){return f.SwitchedEditableLabel}});var h=n(337);Object.defineProperty(t,"TreeView",{enumerable:!0,get:function(){return h.TreeView}});var m=n(130);Object.defineProperty(t,"useObservable",{enumerable:!0,get:function(){return m.useObservable}});var g=n(339);Object.defineProperty(t,"useTimeout",{enumerable:!0,get:function(){return g.useTimeout}});var v=n(184);Object.defineProperty(t,"useRequestFocus",{enumerable:!0,get:function(){return v.useRequestFocus}});var b=n(189);Object.defineProperty(t,"makeEventListenerManager",{enumerable:!0,get:function(){return b.makeEventListenerManager}}),o(n(192),t),o(n(340),t),o(n(342),t),o(n(343),t)},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateAfterSyncSome=t.syncSomeAndAwaitAll=t.syncSome=t.initSyncer=t.initIdMappedDocumentStore=t.updateQueuedForSyncAfterSync=t.syncNext=t.getAllDirties=t.download=t.get=t.save=t.DELETEABLE=void 0;var a=n(115),s=n(61),u=n(39),c=n(11),l=n(135);function d(e,t,n,s,u,c){return o(this,void 0,void 0,(function(){var o,l;return i(this,(function(i){switch(i.label){case 0:return[4,t()];case 1:return o=i.sent(),l=o.results.reduce((function(e,t){return a.saveSynced(e,n(t),s(t),{updatedAt:c(t),config:(r=u(t),{permanent:r})});var r}),e.store),[2,{store:r(r({},e),{store:l}),errors:o.errors}]}}))}))}function p(e,t){return s.getAll(e).filter((function(e){return e.dirty&&t(e)}))}function f(e,t,n,r,o){var i,a,c=function(e,t,n){var r=p(e,t).sort((function(e,t){return u.sortByUpdatedAt(e,t)})).map((function(e){return e.id})).find((function(e){return!n.includes(e)}));return r?s.get(e,r):void 0}(e.store,r,o);if(c){var l=c.internalVersion;a=o.concat(c.id),i=t(c).then((function(e){return{originalId:c.id,returnedId:n(e),internalVersionBeforeUpdate:l,payload:e}}))}else a=o,i=void 0;return{queuedForSync:a,promise:i}}function h(e){return{store:e,idMapping:{}}}function m(e,t,n,r,o,i,a){var s=f(e,t,n,r,i);return a>9999||void 0===s.promise?o:m(e,t,n,r,o.concat(s.promise),s.queuedForSync,a+1)}function g(e,t,n,r){return m(e,t,n,r,[],[],1)}t.DELETEABLE="<deleteable>",t.save=function(e,t,n,o){var i=e.idMapping[t]||t,s=a.saveDirty(e.store,i,n,r(r({},o||{}),{updatedAt:(null===o||void 0===o?void 0:o.updatedAt)?o.updatedAt:new Date}));return r(r({},e),{store:s})},t.get=function(e,t){return s.get(e.store,e.idMapping[t]?e.idMapping[t]:t)},t.download=d,t.getAllDirties=p,t.syncNext=f,t.updateQueuedForSyncAfterSync=function(e,t){return e.filter((function(e){return e!==t}))},t.initIdMappedDocumentStore=h,t.initSyncer=function(e,t,n,r,a){return o(this,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,d(h(new Array),e,t,n,r,a)];case 1:return[2,o.sent()]}}))}))},t.syncSome=g,t.syncSomeAndAwaitAll=function(e,t,n,r){return o(this,void 0,void 0,(function(){var o;return i(this,(function(i){switch(i.label){case 0:return o=g(e,t,n,r),[4,c.allSettled(o)];case 1:return[2,i.sent()]}}))}))},t.updateAfterSyncSome=function(e,n,o,i){return n.reduce((function(e,n){if(n.returnedId===t.DELETEABLE)return r(r({},e),{store:s.del(e.store,n.originalId)});var u=s.get(e.store,n.originalId);n.originalId!==n.returnedId&&(u=r(r({},u),{id:n.returnedId}),e=r(r({},e),{store:s.save(e.store,u.id,u)}),e=r(r({},e),{store:s.del(e.store,n.originalId)}),e=l.setUpIdMapping(e,n.originalId,n.returnedId));var c=a.saveAfterSync(e.store,n.returnedId,n.internalVersionBeforeUpdate,i(n.payload),o(n.payload,u.permanent));return r(r({},e),{store:c})}),e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWindows=t.isMac=t.isElectron=t.sortByUpdatedAt=void 0,t.sortByUpdatedAt=function(e,t){return e.updatedAt===t.updatedAt?0:e.updatedAt<t.updatedAt?1:-1},t.isElectron=function(){return void 0!==(window&&window.process&&window.process.versions.electron)},t.isMac=function(){return window&&window.process&&"darwin"===window.process.platform},t.isWindows=function(){return window&&window.process&&"win32"===window.process.platform}},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrapContent=t.bootstrapContentFromInput=t.getConfigForNew=t.getConfigsForButtons=t.getConfigsForInputs=t.getPluginByLanguage=t.getPluginByExtension=t.plugins=void 0;var r=n(223),o=n(249),i=n(265),a=n(279);function s(e){return t.plugins.find((function(t){return t.testLanguage(e)}))}function u(){return t.plugins.filter((function(e){return null!==e.createSnippetConfig.viaButton})).map((function(e){return[e.language,e.icon,e.createSnippetConfig.viaButton]}))}t.plugins=[r.CodeMirrorPlugin,o.RichTextPlugin,i.TodoListPlugin,a.PostItPlugin],t.getPluginByExtension=function(e){return t.plugins.find((function(t){return null!==t.testExtension(e)}))},t.getPluginByLanguage=s,t.getConfigsForInputs=function(){return t.plugins.filter((function(e){return null!==e.createSnippetConfig.viaInput})).map((function(e){return[e.language,e.createSnippetConfig.viaInput]}))},t.getConfigsForButtons=u,t.getConfigForNew=function(){return u().find((function(e){return e[0]===o.LANGUAGE}))},t.bootstrapContentFromInput=function(e,t){var n,r=s(e);if(!r)throw"no plugin found for language "+e;return null===(n=r.createSnippetConfig.viaInput)||void 0===n?void 0:n.bootstrap(t)},t.bootstrapContent=function(e){var t,n=s(e);if(!n)throw"no plugin found for language "+e;return null===(t=n.createSnippetConfig.viaButton)||void 0===t?void 0:t.bootstrap()}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.buildUpArrowKeyMap=t.buildEscapeKeyMap=t.prepareMenuItemIterator=t.buildListItemKeyMap=t.makeUniversalLiftAndSinkCommand=t.getListItemTypes=t.getTextFromDoc=t.initDoc=t.docJsonFromString=t.createProseMirrorDocJson=t.docToJson=t.completeSchema=void 0;var o=n(42),i=n(42),a=n(3),s=n(3),u=n(121),c=n(150),l=n(151),d=n(40),p=n(88),f=n(122),h=n(152),m=u.schema.spec.nodes;m=f.appendCustomParagraphNode(m),m=(m=i.addListNodes(m,"paragraph block*","block")).append(r(r({},l.todoListNodes),{resizableImage:c.resizableImage}));var g=u.schema.spec.marks;function v(e){return JSON.parse(JSON.stringify(e.toJSON()))}function b(e){return{content:e.split("\n").map(y),type:"doc"}}function y(e){var t={content:[{text:e,type:"text"}],type:"paragraph"};return""===e&&delete t.content,t}function O(e,t){return a.Node.fromJSON(e,t)}function S(e,t){var n,r={};return e.forEach((function(e){return e&&(r[e.name]=t(e))})),n=r,function(e,t){for(var r=e.selection.$from,o=r.depth;o>0;o--)if(n[r.node(o).type.name])return n[r.node(o).type.name](e,t);return!1}}function _(e){return[e.nodes.list_item,e.nodes.todo_item].filter((function(e){return void 0!==e}))}function w(e){return{universalLift:S(e,o.liftListItem),universalSink:S(e,o.sinkListItem)}}g=p.customizeLinkMark(g),g=h.appendCustomMarks(g),t.completeSchema=new s.Schema({nodes:m,marks:g}),t.docToJson=v,t.createProseMirrorDocJson=b,t.docJsonFromString=function(e,t){return v(function(e,t){return O(e,b(t))}(e,t))},t.initDoc=O,t.getTextFromDoc=function(e){return e.textBetween(0,e.content.size,"\n\n")},t.getListItemTypes=_,t.makeUniversalLiftAndSinkCommand=w,t.buildListItemKeyMap=function(e){var t=w(_(e)),n=t.universalLift,r=t.universalSink;return d.keymap({Tab:r,"Shift-Tab":n})},t.prepareMenuItemIterator=function(e,t){var n={};t.forEach((function(e){var t=e.spec;return n[t.class]={}}));var r=["active","enable","select"],o={active:"isActive",enable:"isEnabled",select:"isSelectable"};return function(i){return t.forEach((function(t){var a=t.spec;r.forEach((function(t){return a[t]&&function(t,r,i){var a=n[t],s=o[r];a[s]!==i&&(a[s]=i,e({event:"menuItemStateChange",content:n}))}(a.class,t,!!a[t](i))}))}))}},t.buildEscapeKeyMap=function(e){return d.keymap({Escape:e})},t.buildUpArrowKeyMap=function(e){return d.keymap({ArrowUp:e})}},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVERY_HOUR=t.ONE_WEEK=t.deserializeJson=t.serializeJson=t.debounce=t.shouldComponentUpdateForSnippet=void 0,t.shouldComponentUpdateForSnippet=function(e,t){return e.content!==t.content||e.language!==t.language||e.name!==t.name},t.debounce=function(e,t){var n;void 0===t&&(t=100);var r=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){e.apply(null,r)}),t)};return r.cancel=function(){clearTimeout(n)},r},t.serializeJson=function(e){return JSON.stringify(e)},t.deserializeJson=function(e){return JSON.parse(e)},t.ONE_WEEK=6048e5,t.EVERY_HOUR=36e5},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateSearchRelevance=t.findOccurences=t.bootstrapSnippet=t.generateLocalId=t.LOCAL_ID_PREFIX=void 0;t.LOCAL_ID_PREFIX="LOCAL-";var r=(new Date).getTime();t.generateLocalId=function(){return""+t.LOCAL_ID_PREFIX+r++};t.bootstrapSnippet=function(e,t,n,r,o){return{version:0,updatedAt:new Date,name:t,content:n,language:r,tags:o,archived:!1}},t.findOccurences=function(e,t){for(var n,r=new RegExp(t.join("|"),"g"),o=[],i=0;(n=r.exec(e))&&i++<1e3;)o.push({start:n.index,end:n.index+n[0].length,searchTerm:n[0]});return o},t.calculateSearchRelevance=function(e,t){for(var n=e.length,r=null,o=-1,i=function(e){var i=t.findIndex((function(t){return t===e.searchTerm}));if(i<=o)o=i;else if(-1!==o&&i-o===1){var a=e.start-(r&&r.end||0);a<4?n=n+1e3-a:n+=Math.max(0,100-a),o=i}else o=i;r=e},a=0,s=e;a<s.length;a++){i(s[a])}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.del=t.getAllIndexed=t.getAll=t.get=t.save=void 0,t.save=function(e,t,n){return e.filter((function(e){return e.id!==t})).concat({id:t,item:n})},t.get=function(e,t){var n=e.find((function(e){return e.id===t}));return n&&n.item},t.getAll=function(e){return e.map((function(e){return e.item}))},t.getAllIndexed=function(e){return e},t.del=function(e,t){return e.filter((function(e){return e.id!==t}))}},,,,,function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.compileError=t.maybeRenderError=t.isOriginError=void 0;var o=r(n(1)),i=n(291);t.isOriginError=function(e){return!!e.isOriginError},t.maybeRenderError=function(e){return e.isOriginError?e.description:e},t.compileError=function(e,t,n,r){return{isOriginError:!0,origin:e,description:o.default.createElement(i.OriginError,{title:t,description:n}),details:r}}},,,,,,,,,,,,function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.doUnless=t.pipe=t.adapt=t.adaptKeyboardEventHandlerChainItem=t.adaptHandlerChainItem=t.buildKeyboardEventHandlerChainItem=t.preventDefault=t.buildHandler=t.normalizeCounter=t.createRange=t.KEY_CODES=t.noop=void 0;function o(e,t,n,o){return void 0===o&&(o="post"),e.map((function(e){return e.test(t)?r(r({},e),{run:function(t){return"pre"===o&&n(t),e.run(t),"post"===o&&n(t)}}):e}))}t.noop=function(){},t.KEY_CODES={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,ESCAPE:27,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,F:70,K:75,N:78},t.createRange=function(e){return new Array(e).fill(0).map((function(e,t){return t}))},t.normalizeCounter=function(e,t){return 0===t?0:(e%t+t)%t},t.buildHandler=function(e){return function(t){var n=e.find((function(e){return e.test(t)}));return!!n&&(n.run(t),t)}},t.preventDefault=function(e){return e.preventDefault(),e},t.buildKeyboardEventHandlerChainItem=function(e,t){return{test:function(t){return t.keyCode===e},run:t}},t.adaptHandlerChainItem=o,t.adaptKeyboardEventHandlerChainItem=function(e,t,n,r){return o(e,{keyCode:t},n,r)},t.adapt=function(e,t){return function(n,r,o){var i=e(n,r,o);return t(i,n,r,o)}},t.pipe=function(e,t,n,r,o,i,a,s,u,c){return[t,n,r,o,i,a,s,u,c].filter((function(e){return e})).reduce((function(e,t){return t(e)}),e)},t.doUnless=function(e,t){return e?function(e){return e}:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.itemIdentifiers=t.itemIconNames=t.itemTitles=void 0,t.itemTitles={bold:"Toggle bold",italic:"Toggle italic",code:"Toggle code",colorBlue:"Toggle blue color",colorRed:"Toggle red color",colorYellow:"Toggle yellow color",backgroundColorBlue:"Toggle blue background color",backgroundColorRed:"Toggle red background color",backgroundColorYellow:"Toggle yellow background color",fontSizeSmall:"Toggle small font size",fontSizeBig:"Toggle big font size",codeBlock:"Toggle code block",bulletList:"Wrap in bullet list",orderedList:"Wrap in ordered list",todoList:"Wrap in todo list",paragraph:"Change to paragraph",quote:"Change to quote",stickyBlue:"Change to blue sticky",stickyRed:"Change to red sticky",stickyYellow:"Change to yellow sticky",boxBlue:"Change to blue box",boxRed:"Change to red box",boxYellow:"Change to yellow box",textAlignmentCenter:"Align text center",textAlignmentRight:"Align text right",itemAlignmentCenter:"Align item center",heading1:"Change to heading 1",heading2:"Change to heading 2",heading3:"Change to heading 3",liftItem:"Lift item",sinkItem:"Sink item",joinItem:"Join with above block",image:"Upload image",imageDefault:"Set width to 100%",imageResizable:"Set custom width"},t.itemIconNames={bold:"format-bold",italic:"format-italic",code:"code-tags",colorBlue:"record",colorRed:"record",colorYellow:"record",backgroundColorBlue:"stop",backgroundColorRed:"stop",backgroundColorYellow:"stop",fontSizeSmall:"format-annotation-minus",fontSizeBig:"format-annotation-plus",codeBlock:"code-brackets",bulletList:"format-list-bulleted",orderedList:"format-list-numbered",todoList:"clipboard-check-outline",paragraph:"format-clear",quote:"format-quote-close",stickyBlue:"square",stickyRed:"square",stickyYellow:"square",boxBlue:"information-variant",boxRed:"alert-circle-outline",boxYellow:"lightbulb-outline",textAlignmentCenter:"format-align-center",textAlignmentRight:"format-align-right",itemAlignmentCenter:"format-horizontal-align-center",heading1:"format-title",heading2:"format-title",heading3:"format-title",liftItem:"format-horizontal-align-left",sinkItem:"format-horizontal-align-right",joinItem:"arrow-collapse-vertical",image:"image",imageDefault:"arrow-expand-horizontal",imageResizable:"arrange-send-backward"},t.itemIdentifiers={bold:"prosemirror-menu-item-bold",italic:"prosemirror-menu-item-italic",code:"prosemirror-menu-item-code",colorBlue:"prosemirror-menu-item-color-blue",colorRed:"prosemirror-menu-item-color-red",colorYellow:"prosemirror-menu-item-color-yellow",backgroundColorBlue:"prosemirror-menu-item-background-color-blue",backgroundColorRed:"prosemirror-menu-item-background-color-red",backgroundColorYellow:"prosemirror-menu-item-background-color-yellow",fontSizeSmall:"prosemirror-menu-item-font-size-small",fontSizeBig:"prosemirror-menu-item-font-size-big",codeBlock:"prosemirror-menu-item-codeBlock",bulletList:"prosemirror-menu-item-bulletList",orderedList:"prosemirror-menu-item-orderedList",todoList:"prosemirror-menu-item-todoList",paragraph:"prosemirror-menu-item-paragraph",quote:"prosemirror-menu-item-quote",stickyBlue:"prosemirror-menu-item-sticky-blue",stickyRed:"prosemirror-menu-item-sticky-red",stickyYellow:"prosemirror-menu-item-sticky-yellow",boxBlue:"prosemirror-menu-item-box-blue",boxRed:"prosemirror-menu-item-box-red",boxYellow:"prosemirror-menu-item-box-yellow",textAlignmentCenter:"prosemirror-menu-item-text-align-center",textAlignmentRight:"prosemirror-menu-item-text-align-right",itemAlignmentCenter:"prosemirror-menu-item-item-align-center",heading1:"prosemirror-menu-item-heading1",heading2:"prosemirror-menu-item-heading2",heading3:"prosemirror-menu-item-heading3",liftItem:"prosemirror-menu-item-liftItem",sinkItem:"prosemirror-menu-item-sinkItem",joinItem:"prosemirror-menu-item-joinItem",image:"prosemirror-menu-item-image",imageDefault:"prosemirror-menu-item-imageDefault",imageResizable:"prosemirror-menu-item-imageResizable"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.schema=void 0;var r=n(3),o=n(88),i=n(121),a={doc:{content:"paragraph*"},paragraph:{content:"inline*",attrs:{index:{default:1},status:{default:"open"}},group:"block",parseDOM:[{tag:"p",getAttrs:function(e){return{src:e.getAttribute("index")}}}],toDOM:function(e){return["p",e.attrs,0]}},text:i.nodes.text,hard_break:i.nodes.hard_break};t.schema=new r.Schema({nodes:a,marks:o.customizeLinkMark(i.schema.spec.marks)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passwordResetTokenField=t.passwordRepeatField=t.newPasswordField=t.currentPasswordField=t.emailField=t.bypass=t.mustBeSet=t.repeatDoesMatch=t.validatePasswordLength=t.validateEmailLength=t.getFieldName=t.LABEL_NEXT=t.LABEL_BACK=t.LABEL_FORGOT_PASSWORD=t.LABEL_CHANGE_PASSWORD=t.LABEL_REQUEST_RESET=t.LABEL_RESET_PASSWORD=t.LABEL_SIGN_IN=t.LABEL_GO_TO_SIGN_IN=t.LABEL_SIGN_UP=t.PLACEHOLDER_OLD_PASSWORD=t.PLACEHOLDER_NEW_PASSWORD=t.PLACEHOLDER_REPEAT_PASSWORD=t.PLACEHOLDER_PASSWORD=t.PLACEHOLDER_TOKEN=t.PLACEHOLDER_EMAIL=t.SIGNIN_SUCCESSFUL=t.PASSWORD_HAS_BEEN_CHANGED=t.RESET_MAIL_SENT=t.VERIFICATION_MAIL_SENT=t.UNAUTHORIZED=t.UNEXPECTED_ERROR=t.TOO_MANY_REQUESTS=void 0,n(307),t.TOO_MANY_REQUESTS="Too many requests",t.UNEXPECTED_ERROR="Unexpected error",t.UNAUTHORIZED="Login failed",t.VERIFICATION_MAIL_SENT="We have sent you an email. Please verify your account.",t.RESET_MAIL_SENT="We've sent you an email. Please enter the token you received on the next page.",t.PASSWORD_HAS_BEEN_CHANGED="Your password has been changed.",t.SIGNIN_SUCCESSFUL="Login successful.",t.PLACEHOLDER_EMAIL="Email",t.PLACEHOLDER_TOKEN="Token",t.PLACEHOLDER_PASSWORD="Password",t.PLACEHOLDER_REPEAT_PASSWORD="Repeat Password",t.PLACEHOLDER_NEW_PASSWORD="New Password",t.PLACEHOLDER_OLD_PASSWORD="Old Password",t.LABEL_SIGN_UP="Sign Up",t.LABEL_GO_TO_SIGN_IN="Go to login page",t.LABEL_SIGN_IN="Sign In",t.LABEL_RESET_PASSWORD="Reset Password",t.LABEL_REQUEST_RESET="Request Reset",t.LABEL_CHANGE_PASSWORD="Change Password",t.LABEL_FORGOT_PASSWORD="Forgot Password",t.LABEL_BACK="Back",t.LABEL_NEXT="Next",t.getFieldName=function(e){return e+"-field"};t.validateEmailLength=function(e,t){return t[e].length>=6||"Email must be at least 6 characters"};t.validatePasswordLength=function(e,t){return t[e].length>=6||"Password must be at least 6 characters"};t.repeatDoesMatch=function(e,t){return t.password===t[e]||"Passwords don't match"};t.mustBeSet=function(e,t){return t[e].length>0||"Please provide a token"};t.bypass=function(){return!0};t.emailField=function(e){return void 0===e&&(e=t.bypass),{name:"email",placeholder:t.PLACEHOLDER_EMAIL,type:"text",autocomplete:"username",validator:e}};t.currentPasswordField=function(e){return{name:"currentPassword",placeholder:e,type:"password",autocomplete:"current-password",validator:t.bypass}};t.newPasswordField=function(e){return{name:"password",placeholder:e,type:"password",autocomplete:"new-password",validator:t.validatePasswordLength}};t.passwordRepeatField=function(){return{name:"repeat",placeholder:t.PLACEHOLDER_REPEAT_PASSWORD,type:"password",autocomplete:"new-password",validator:t.repeatDoesMatch}};t.passwordResetTokenField=function(){return{name:"token",placeholder:t.PLACEHOLDER_TOKEN,type:"password",validator:t.mustBeSet}}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFactory=void 0;var r=n(1);t.useFactory=function(e,t,n){return r.useMemo((function(){return e(t,n)}),t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMimeTypeForLanguage=t.fileExtensionToLanguage=t.supportedCodeLanguages=t.MARKDOWN=void 0;var r=n(226);t.MARKDOWN="Markdown",t.supportedCodeLanguages=["JavaScript","TypeScript","Ruby","Java","C","HTML",t.MARKDOWN,"Shell","CSS","SCSS"];var o={},i={};t.supportedCodeLanguages.forEach((function(e){var t=r.modeInfo.find((function(t){return t.name===e}));o[e]=t})),t.supportedCodeLanguages.forEach((function(e){o[e].ext.forEach((function(t){i[t]=e}))})),t.fileExtensionToLanguage=i,t.getMimeTypeForLanguage=function(e){var t=o[e];return t&&t.mime}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultListEntry=void 0;var a=i(n(1)),s=n(52);n(248);t.DefaultListEntry=function(e){var t=e.snippetListEntry.metaData.title||a.default.createElement("span",{className:"DefaultListEntry-untitledEntry"},"untitled"),n=s.getPluginByLanguage(e.snippetListEntry.snippet.language),r=a.useState(!1),o=r[0],i=r[1];return a.default.createElement("div",{className:"DefaultListEntry-entryInner "+(null===n||void 0===n?void 0:n.snippetListClass(e.snippetListEntry.snippet)),onTouchMove:function(){return i(!0)},onTouchEnd:function(t){t.preventDefault(),o||e.setSelectedSnippetId(e.snippetListEntry.metaData.id,{autoScroll:!0}),i(!1)},onMouseDown:function(){return e.setSelectedSnippetId(e.snippetListEntry.metaData.id,{autoScroll:!0})}},a.default.createElement("span",{className:"DefaultListEntry-entryInnerIconWrapper"},a.default.createElement("i",{className:"DefaultListEntry-entryInnerSnippetTypeIcon mdi "+(null===n||void 0===n?void 0:n.icon)})),a.default.createElement("div",{className:"DefaultListEntry-entryBodyWrapper CommonUI-delayedIconContainer"},a.default.createElement("div",{className:"DefaultListEntry-entryTitleWrapper"},a.default.createElement("div",{className:"DefaultListEntry-entryTitle"},t),a.default.createElement("span",{className:"CommonUI-delayedIconWrapper"},a.default.createElement("i",{className:"mdi mdi-"+e.listEntryIcon+" DefaultListEntry-entryTitleDeleteIcon",onClick:function(){return e.runItemAction(e.snippetListEntry)},onMouseDown:function(e){return e.stopPropagation()}}))),a.default.createElement("div",{className:"DefaultListEntry-entryContent"},""===e.snippetListEntry.metaData.trimmedBody?a.default.createElement("span",{className:"DefaultListEntry-noContent"},"no content"):e.children)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(10),i=n(3);function a(e,t){if(e instanceof i.Fragment){var n=e.content.map((function(e){return a(e,t)}));return new i.Fragment(n,e.size)}if(e instanceof i.Node){if(e.isText){var r=t.isInSet(e.marks);if(r&&r.attrs.href!==e.textContent){var o=t.removeFromSet(e.marks);return e.mark(o)}return e}var s=a(e.content,t);return e.copy(s)}}var s=/^\s$/,u=/^\s.*$/,c=/^.*\s$/;function l(e,t,n,r){for(var o=t,i=e.charAt(o);!i.match(s)&&n(o);)o+=r,i=e.charAt(o);return o}function d(e,t){var n=function(e,t){return t.marks.link.isInSet(e.marks())}(e,t);if(n&&n.attrs.nolabel)return{$cursor:e,start:function(e){return l(e.parent.textContent,e.parentOffset-1,(function(e){return e>0}),-1)}(e),end:function(e){return l(e.parent.textContent,e.parentOffset,(function(t){return t<e.parent.nodeSize-2}),1)}(e),mark:n}}var p=function(e){this.initializer=e},f={value:{configurable:!0},isDefined:{configurable:!0}};function h(e,t,n,r){return new p((function(){return d(e.resolve(t.pos+r),n)}))}f.value.get=function(){return void 0===this._value&&(this._value=this.initializer()||null),this._value},f.isDefined.get=function(){return null!==this.value},Object.defineProperties(p.prototype,f);var m=function(e,t,n,r,o){var i=this;this.trs=e,this.oldState=t,this.newState=n,this.historyPluginKey=r,this.schema=o,this.linkMarkAtCursor=new p((function(){return d(i.oldState.selection.$cursor,i.schema)})),this.marksPreEdit={left:h(t.doc,t.selection.$cursor,o,-1),right:h(t.doc,t.selection.$cursor,o,1)},this.marksPostEdit={left:h(n.doc,n.selection.$cursor,o,-1),right:h(n.doc,n.selection.$cursor,o,1)}},g={isSteppingThroughHistory:{configurable:!0},docDidntChange:{configurable:!0},wasCursorSelection:{configurable:!0},isCursorSelection:{configurable:!0},hasExactlyOneStep:{configurable:!0},hasInsertedSingleSpace:{configurable:!0},positionDelta:{configurable:!0},hasDeletedBackward:{configurable:!0},hasInserted:{configurable:!0},hasDeletedForward:{configurable:!0},isJoinedByTextOnTheRight:{configurable:!0},isJoinedByTextOnTheLeft:{configurable:!0},joinsLinkWithLink:{configurable:!0},joinsLinkWithText:{configurable:!0},joinsTextWithLink:{configurable:!0},wasAtEdgeOfTextNode:{configurable:!0},hasDeletedBackwardOntoStartOfTextNode:{configurable:!0},hasDeletedBackwardIntoLink:{configurable:!0},hasDeletedForwardIntoLink:{configurable:!0},hasInsertedAtEndOfLink:{configurable:!0},hasInsertedAtStartOfLink:{configurable:!0},hasSplitAtEndOfTextNode:{configurable:!0}};g.isSteppingThroughHistory.get=function(){var e=this;return this.trs.some((function(t){return void 0!==t.getMeta(e.historyPluginKey)}))},g.docDidntChange.get=function(){return!this.trs.some((function(e){return e.docChanged}))},g.wasCursorSelection.get=function(){return this.oldState.selection.$cursor},g.isCursorSelection.get=function(){return this.newState.selection.$cursor},g.hasExactlyOneStep.get=function(){return 1===this.trs.length&&1===this.trs[0].steps.length},g.hasInsertedSingleSpace.get=function(){var e=this.trs[0].steps[0].slice.content;return e.textBetween(0,e.size).match(s)},g.positionDelta.get=function(){return void 0===this._positionDelta&&(this._positionDelta=this.oldState.selection.$cursor.pos-this.newState.selection.$cursor.pos),this._positionDelta},g.hasDeletedBackward.get=function(){return this.positionDelta>0},g.hasInserted.get=function(){return this.positionDelta<0},g.hasDeletedForward.get=function(){return 0===this.positionDelta},m.prototype.hasChildWhichMatches=function(e,t){var n=this.newState.selection.$cursor.parent.maybeChild(this.newState.selection.$cursor.index()+t);return n&&!n.textContent.match(e)},g.isJoinedByTextOnTheRight.get=function(){return this.hasChildWhichMatches(u,0)},g.isJoinedByTextOnTheLeft.get=function(){return this.hasChildWhichMatches(c,-1)},g.joinsLinkWithLink.get=function(){return this.marksPostEdit.left.isDefined&&this.marksPostEdit.right.isDefined},g.joinsLinkWithText.get=function(){return this.marksPostEdit.left.isDefined&&this.isJoinedByTextOnTheRight},g.joinsTextWithLink.get=function(){return this.marksPostEdit.right.isDefined&&this.isJoinedByTextOnTheLeft},g.wasAtEdgeOfTextNode.get=function(){return 0===this.oldState.selection.$cursor.textOffset},g.hasDeletedBackwardOntoStartOfTextNode.get=function(){return this.hasDeletedBackward&&0===this.newState.selection.$cursor.textOffset},g.hasDeletedBackwardIntoLink.get=function(){return this.hasDeletedBackward&&this.marksPreEdit.left.isDefined},g.hasDeletedForwardIntoLink.get=function(){return this.hasDeletedForward&&this.marksPreEdit.right.isDefined},g.hasInsertedAtEndOfLink.get=function(){return this.hasInserted&&this.marksPreEdit.left.isDefined},g.hasInsertedAtStartOfLink.get=function(){return this.hasInserted&&this.marksPreEdit.right.isDefined},g.hasSplitAtEndOfTextNode.get=function(){return this.wasAtEdgeOfTextNode&&0===this.newState.selection.$cursor.parentOffset&&this.oldState.selection.$cursor.index(this.oldState.selection.$cursor.depth)!==this.newState.selection.$cursor.index(this.newState.selection.$cursor.depth)},Object.defineProperties(m.prototype,g);var v=/\./,b=/\//;function y(e,t,n){var r=e.$cursor.start()+e.start,i=e.$cursor.start()+e.end,a=function(e){var t=new o.Mapping;return e.forEach((function(e){return t.appendMapping(e.mapping)})),t}(n);return t.removeMark(a.mapResult(r).pos,a.mapResult(i).pos,e.mark)}function O(e,t,n,r){if(e.isDefined&&t.isDefined){var o=y(e.value,n,r);return y(t.value,o,r)}return e.isDefined?y(e.value,n,r):t.isDefined?y(t.value,n,r):void 0}var S={attrs:{href:{},title:{default:null},nolabel:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){var t=e.getAttribute("href"),n=e.getAttribute("nolabel");return{href:t,title:e.getAttribute("title"),nolabel:null===n?t===e.textContent:n}}}],toDOM:function(e){return["a",e.attrs,0]}};t.customizeLinkMark=function(e){return e.update("link",S)},t.makeAnchorPlugin=function(e,t){return new r.Plugin({props:{transformPasted:function(t){return new i.Slice(a(t.content,e.marks.link),t.openStart,t.openEnd)}},appendTransaction:function(n,r,o){var i=new m(n,r,o,t,e);if(!i.isSteppingThroughHistory&&!i.docDidntChange)if(i.wasCursorSelection&&i.isCursorSelection){if(i.linkMarkAtCursor.isDefined)return y(i.linkMarkAtCursor.value,o.tr,n);if(!i.hasExactlyOneStep)return;if(i.hasInsertedSingleSpace||i.hasSplitAtEndOfTextNode)return i.marksPreEdit.left.isDefined?void 0:function(e,t,n){var r=function(e){for(var t,n=0,r=-1;r<e.parent.content.content.length-1&&n<e.parentOffset;)r++,(t=e.parent.content.content[r]).isText?n+=t.nodeSize:n+=1;return t&&t.isText?{textNode:t,positionInTextNode:t.text.length-(n-e.parentOffset)-1}:{}}(e),o=r.textNode,i=r.positionInTextNode;if(o){var a=o.text,u=i-1,c=a.charAt(u);if(!c.match(s)&&!c.match(v)){for(var l=!1;!c.match(s)&&u>0;)(c=a.charAt(--u)).match(v)&&(l=!0),c.match(b);if(l){c.match(s)&&(u+=1);var d=a.slice(u,i),p=e.parentOffset-i-1;return t.addMark(e.start()+p+u,e.start()+p+i,n.marks.link.create({href:d,nolabel:!0}))}}}}(o.selection.$cursor,o.tr,e);if(!i.wasAtEdgeOfTextNode&&!i.hasDeletedBackwardOntoStartOfTextNode)return;if(i.hasDeletedBackwardIntoLink)return y(i.marksPreEdit.left.value,o.tr,n);if(i.hasDeletedForwardIntoLink)return y(i.marksPreEdit.right.value,o.tr,n);if(i.hasInsertedAtEndOfLink)return y(i.marksPreEdit.left.value,o.tr,n);if(i.hasInsertedAtStartOfLink)return y(i.marksPreEdit.right.value,o.tr,n);if(i.hasDeletedBackward||i.hasDeletedForward){if(i.joinsLinkWithLink){var a=y(i.marksPostEdit.left.value,o.tr,[]);return y(i.marksPostEdit.right.value,a,[])}if(i.joinsLinkWithText)return y(i.marksPostEdit.left.value,o.tr,[]);if(i.joinsTextWithLink)return y(i.marksPostEdit.right.value,o.tr,[])}}else{var u,c=r.selection,l=c.$from,d=c.$to;if(u=O(h(r.doc,l,e,0),h(r.doc,d,e,0),o.tr,n))return u;if(0===l.pos)return;if(u=O(h(r.doc,l,e,-1),h(r.doc,d,e,1),o.tr,n))return u}}})}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.isHighlightPluginTransaction=t.highlightOccurences=t.findOccurences=t.HighlightPlugin=void 0;var o=n(5),i=n(54),a={occurences:[]};t.HighlightPlugin=new o.Plugin({state:{init:function(e,t){return a},apply:function(e,t){var n=e.getMeta(this);return n&&n.occurences&&(t=r(r({},t),{occurences:n.occurences})),t}},props:{decorations:function(e){var t=this.getState(e);if(t.occurences.length>0)return i.DecorationSet.create(e.doc,t.occurences.map((function(e){return i.Decoration.inline(e.start,e.end,{class:e.class})})))}}}),t.findOccurences=function(e,t){t=t.filter((function(e){return e})).map((function(e){return e.toUpperCase()}));var n=[];if(t.length>0){var r=new RegExp(t.join("|"),"g");e.descendants((function(e,t){if(e.isText)for(var o=0,i=void 0;(i=r.exec(e.text.toUpperCase()))&&o++<1e3;)n.push({start:t+i.index,end:t+i.index+i[0].length})}))}return n},t.highlightOccurences=function(e,n){var r=e.state.tr;r.setMeta(t.HighlightPlugin,{occurences:n}),e.dispatch(r)},t.isHighlightPluginTransaction=function(e){return void 0!==e.getMeta(t.HighlightPlugin)}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OriginReadynessContext=t.originConfigs=void 0;n(167);var i=n(170),a=o(n(1)),s=n(183),u=n(39);t.originConfigs=r([i.cloudOriginConfig],u.isElectron()?[s.fileOriginConfig]:[],[]),t.OriginReadynessContext=a.default.createContext({ready:"pending"})},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Rest=void 0;var i=n(171),a=function(){function e(e){this.resourceName=e}return e.prototype.compileParams=function(e){return e?"?"+Object.entries(e).map((function(e){return e[0]+"="+e[1]})).join("&"):""},e.prototype.index=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,i.get("/"+this.resourceName+this.compileParams(e))];case 1:return[2,t.sent()]}}))}))},e.prototype.create=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,i.post("/"+this.resourceName,e)];case 1:return[2,t.sent()]}}))}))},e.prototype.update=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,i.patch("/"+this.resourceName+"/"+e.id,e)];case 1:return[2,t.sent()]}}))}))},e.prototype.delete=function(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,i.del("/"+this.resourceName+"/"+e+this.compileParams(t))];case 1:return[2,n.sent()]}}))}))},e.prototype.deleteAll=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,i.del("/"+this.resourceName)];case 1:return[2,e.sent()]}}))}))},e}();t.Rest=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noDirectorySpecified=void 0;var r=n(174);t.noDirectorySpecified=function(){return Promise.reject(r.compileFileStorageError("No directory specified."))}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.CredentialsForm=void 0;var l=s(n(1)),d=n(81),p=function(e){function t(t){var n=e.call(this,t)||this;return n.onSubmit=n.onSubmit.bind(n),n.state=o(o({},t.fields.reduce((function(e,t){var n,r=t.name;return o(o({},e),((n={})[d.getFieldName(r)]="",n))}),{})),{validationErrors:[],hasSubmitted:!1,isLoading:!1,serverError:null}),n.onChange=n.onChange.bind(n),n}return r(t,e),t.prototype.onChange=function(e){var t,n=e.target,r=n.value,o=n.name;this.setState(((t={})[d.getFieldName(o)]=r,t.hasSubmitted=!1,t.serverError=null,t))},t.prototype.onSubmit=function(e){var t=this;e.preventDefault(),this.setState({hasSubmitted:!0,serverError:null});var n=this.props.fields.reduce((function(e,n){var r,i=n.name;return o(o({},e),((r={})[i]=t.state[d.getFieldName(i)],r))}),{}),r=this.props.fields.map((function(e){var t=e.name;return(0,e.validator)(t,n)})).filter((function(e){return!0!==e}));0===r.length&&(this.indicateLoading(!0),this.props.onSubmit(n).then((function(e){return e&&t.showMessage(e)})).catch((function(e){return t.extractErrorFromResponse(e)})).finally((function(){return t.indicateLoading(!1)}))),this.setState({validationErrors:r})},t.prototype.extractErrorFromResponse=function(e){return u(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return 429!==e.status?[3,1]:(this.showMessage(d.TOO_MANY_REQUESTS),[3,4]);case 1:return 401!==e.status?[3,2]:(this.showMessage(d.UNAUTHORIZED),[3,4]);case 2:return[4,e.json()];case 3:(t=n.sent())&&t.errors?this.showMessage(t.errors.join(" ")):this.showMessage(d.UNEXPECTED_ERROR+" ("+e.status+")"),n.label=4;case 4:return[2]}}))}))},t.prototype.indicateLoading=function(e){this.setState({isLoading:e})},t.prototype.showMessage=function(e){this.setState({serverError:e})},t.prototype.render=function(){var e=this,t=this.props.fields.map((function(t){var n=t.name,r=t.placeholder,o=t.autocomplete,i=t.type;return l.default.createElement("input",{className:"CommonUI-input CommonUI-input-centered CommonUI-input-with-border",disabled:e.props.disabled,key:n,autoComplete:o,type:i,value:e.state[d.getFieldName(n)],onChange:e.onChange,placeholder:r,name:n})})),n=this.state.validationErrors.map((function(e,t){return l.default.createElement("div",{key:t},e)})),r=this.state.serverError&&l.default.createElement("p",null,this.state.serverError);return l.default.createElement("form",null,l.default.createElement("h2",null,this.props.title),t,l.default.createElement("button",{className:"CommonUI-button CredentialsForm-submit-button",disabled:this.state.isLoading||this.props.disabled,onClick:this.onSubmit},this.props.submitLabel),l.default.createElement("div",{className:"CredentialsForm-error-section"},n,r,this.state.isLoading&&l.default.createElement("span",null,"Loading...")))},t}(l.Component);t.CredentialsForm=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CredentialsFormWrapper=void 0;var s=a(n(1)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.default.createElement("div",{className:"CredentialsForm-outer"},s.default.createElement("div",{className:"CredentialsForm-inner"},this.props.children))},t}(s.Component);t.CredentialsFormWrapper=u},function(e,t,n){},,function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useCyclicCounter=void 0;var o=n(1),i=n(78),a=n(85);function s(e,t){switch(t.type){case"step":return r(r({},e),{counter:i.normalizeCounter(e.counter+t.amount,e.length)});case"set":return r(r({},e),{counter:i.normalizeCounter(t.value,e.length)})}}function u(e,t){return e({type:"step",amount:t})}function c(e,t){return e({type:"set",value:t})}function l(e,t){var n=e[0],r=t[0];return{inc:function(){return u(r,1)},dec:function(){return u(r,-1)},min:function(){return c(r,0)},max:function(){return c(r,n-1)},set:function(e){return c(r,e)}}}t.useCyclicCounter=function(e,t){var n=o.useMemo((function(){return{counter:i.normalizeCounter(t,e),length:e}}),[]),r=o.useReducer(s,n),u=r[0],c=r[1],d=a.useFactory(l,[e],[c]);return[u.counter,c,d]}},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElectron=void 0,t.getElectron=function(){return window.require("electron")}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.mergeStores=t.saveAfterSync=t.saveSynced=t.saveDirty=void 0;var o=n(61);function i(e,t,n,i,a){var s,u=o.get(e,t)||function(e,t,n){var r=void 0===n?{}:n,o=r.config,i=r.updatedAt;if(!o)throw"trying to init DocumentWrapper without config";return{id:e,document:t,permanent:o.permanent,internalVersion:0,dirty:!1,updatedAt:i||new Date}}(t,n,a);return u=function(e){return r(r({},e),{internalVersion:e.internalVersion+1})}(u=i(u=r(r(r(r({},u),(null===a||void 0===a?void 0:a.updatedAt)?{updatedAt:a.updatedAt}:{}),(null===(s=null===a||void 0===a?void 0:a.config)||void 0===s?void 0:s.permanent)?{permanent:a.config.permanent}:{}),{document:n}))),o.save(e,t,u)}function a(e){return r(r({},e),{dirty:!0})}function s(e){return r(r({},e),{dirty:!1})}t.saveDirty=function(e,t,n,r){return i(e,t,n,a,r)},t.saveSynced=function(e,t,n,r){return i(e,t,n,s,r)},t.saveAfterSync=function(e,t,n,i,u){var c=o.get(e,t),l=c.internalVersion;return c=(n<l?a:s)(c=r(r({},c),{internalVersion:l+1,permanent:u||c.permanent,updatedAt:i})),o.save(e,t,c)},t.mergeStores=function(e,t,n){for(var r=e.map((function(e){return e})),o=[],i=function(e){var t=r.findIndex((function(t){return t.id===e.id}));t>=0?n(r[t].item,e.item)&&(r[t]=e,o.push(e.id)):(r.push(e),o.push(e.id))},a=0,s=t;a<s.length;a++){i(s[a])}return{mergedStore:r,changedIds:o}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.isTag=t.getTagsAsStringArray=t.addTag=t.deleteByPath=t.renamePaths=t.maybeAddNewPath=t.normalizeTag=t.turnTagIntoPath=t.turnPathIntoTag=t.SEPARATOR=t.initTag=void 0;var o=n(38),i=n(61),a=n(9),s=n(60);function u(e){return{path:e,archived:!1}}function c(e){return e.join(t.SEPARATOR)}function l(e,t,n,r){void 0===r&&(r=s.generateLocalId);var c,l=function(e,t){return i.getAll(t.store).filter(d).find((function(t){return!t.document.archived&&a.isExactPath(t.document.path,e)}))}(t,e),p=!1;if(l)c=l.id;else{var f=r();c=f,p=!0,e=o.save(e,f,u(t),{config:{permanent:{origin:n,documentType:"tag",version:0,obsolete:{state:!1}}}})}return{store:e,id:c,isNew:p}}function d(e){return"tag"===e.permanent.documentType}t.initTag=u,t.SEPARATOR=" / ",t.turnPathIntoTag=c,t.turnTagIntoPath=function(e){return e.split(t.SEPARATOR)},t.normalizeTag=function(e){return e.split(t.SEPARATOR.trim()).map((function(e){return e.trim()})).join(t.SEPARATOR)},t.maybeAddNewPath=l,t.renamePaths=function(e,t,n){if(""===t.trim())return e;var s=n.filter((function(e,t){return t!==n.length-1})).concat([t]),u=i.getAll(e.store).filter(d);return u.find((function(e){return a.isExactPath(e.document.path,s)}))?e:u.reduce((function(e,i){var s=!0!==i.document.archived&&i.document.path;if(s&&a.isSubPath(n,s)){var u=s.map((function(e){return e}));return u[n.length-1]=t,o.save(e,i.id,r(r({},i.document),{path:u}))}return e}),e)},t.deleteByPath=function(e,t){var n=i.getAll(e.store).filter(d).find((function(e){return a.isExactPath(t,e.document.path)}));return n?o.save(e,n.id,r(r({},n.document),{archived:!0})):e},t.addTag=function(e,t,n){return l(e,t,n).store},t.getTagsAsStringArray=function(e){return e.filter((function(e){return!e.tag.archived})).map((function(e){return c(e.tag.path)}))},t.isTag=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStateChangeEffect=void 0;var r=n(213),o=n(1);t.useStateChangeEffect=function(e,t){var n=r.usePrevious(e);o.useEffect((function(){if(void 0!==n)if(t instanceof Array)t.forEach((function(t){var r=t.test,o=t.run;return r(n,e)&&o(n,e)}));else{var r=t.extract||function(e){return e};switch(t.trigger){case"change":return void t.run(n,e);case"on":return void(!r(n)&&r(e)&&t.run(n,e));case"off":return void(r(n)&&!r(e)&&t.run(n,e))}}}),[e])}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(e,t,n,i){if(n===t.path.length)return e;var a=t.path[n],s=e.content.find((function(e){return e.name===a})),u=t.path.length-1!==n;return s?u||(s=r(r({},s),{data:r(r({},t.data),{derived:!1})})):(s={name:a,content:new Array,root:!1,data:r(r({},u?i:t.data),{derived:u})},e=r(r({},e),{content:e.content.concat([s]).sort((function(e,t){return e.name.localeCompare(t.name)}))})),r(r({},e),{content:e.content.map((function(e){return e.name===a?o(e,t,n+1,i):e}))})}function i(e,t,n){return n===e.length||e[n]===t[n]&&i(e,t,n+1)}Object.defineProperty(t,"__esModule",{value:!0}),t.isExactPath=t.isSubPath=t.compileTree=void 0,t.compileTree=function(e,t,n){return e.reduce((function(e,t){return o(e,t,0,n)}),{name:"root",root:!0,content:[],data:r(r({},t),{derived:!0})})},t.isSubPath=function(e,t){return!(e.length>t.length)&&i(e,t,0)},t.isExactPath=function(e,t){return e.length===t.length&&i(e,t,0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(e,t,n,r){void 0===t&&(t=100),void 0===n&&(n=window.setTimeout),void 0===r&&(r=window.clearTimeout);var o=void 0;return[function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return new Promise((function(a,s){o&&(r(o.timeout),o.reject("Debounced function called before expiration time of "+t+"ms"));var u=n((function(){var t=e.apply(null,i);a({result:t})}),t);o={timeout:u,reject:s}}))},function(){o&&(r(o.timeout),o.reject("Debounced function call got cancelled"))}]}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarIcon=t.ToolbarItem=t.ToolbarItemGroup=t.Toolbar=void 0;var s=a(n(1));n(247);var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.default.createElement("div",{className:"Toolbar"},this.props.children)},t}(s.Component);t.Toolbar=u;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=["ToolbarItemGroup"].concat(this.props.additionalClasses);return s.default.createElement("div",{className:e.join(" ")},s.default.createElement("div",{className:"ToolbarItemGroup-inner"},this.props.children))},t}(s.Component);t.ToolbarItemGroup=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.default.createElement("span",{className:"ToolbarItem"},this.props.children)},t}(s.Component);t.ToolbarItem=l;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=["mdi","mdi-"+this.props.iconName];return s.default.createElement("span",{className:["ToolbarIcon"].concat(this.props.additionalClasses).join(" ")},s.default.createElement("i",{className:e.join(" "),onClick:this.props.onClick,onMouseDown:this.props.onMouseDown}))},t}(s.Component);t.ToolbarIcon=d},,function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomParagraphView=t.appendCustomParagraphNode=t.extractClasses=t.ATTRIBUTE_DEFINITIONS=t.CLASS_PREFIX=void 0,t.CLASS_PREFIX="CustomParagraph-",t.ATTRIBUTE_DEFINITIONS={TYPE:{name:"type",knownValues:["sticky","quote","box"]},TEXT_ALIGNMENT:{name:"textAlignment",knownValues:["center","right"]},ITEM_ALIGNMENT:{name:"itemAlignment",knownValues:["center"]},BACKGROUND_COLOR:{name:"backgroundColor",knownValues:["blue","red","yellow"]}};var o=Object.values(t.ATTRIBUTE_DEFINITIONS),i=o.map((function(e){var n=e.name;return e.knownValues.map((function(e){return{class:""+t.CLASS_PREFIX+n+"-"+e,value:e,name:n}}))})).flat().reduce((function(e,t){var n,o=t.class,i=t.value,a=t.name;return r(r({},e),((n={})[o]={value:i,name:a},n))}),{});function a(e){return o.reduce((function(n,r){var o=r.name,i=r.knownValues;return e.attrs[o]&&i.includes(e.attrs[o])?n.concat(""+t.CLASS_PREFIX+o+"-"+e.attrs[o]):n}),new Array)}t.extractClasses=a,t.appendCustomParagraphNode=function(e){var t={content:"inline*",group:"block",attrs:o.reduce((function(e,t){var n,o=t.name;return r(r({},e),((n={})[o]={default:void 0},n))}),{}),parseDOM:[{tag:"p",getAttrs:function(e){var t=new Array;return e.classList.forEach((function(e){return t.push(e)})),t.map((function(e){return i[e]})).filter((function(e){return e})).reduce((function(e,t){var n,o=t.value,i=t.name;return r(r({},e),((n={})[i]=o,n))}),{})}}],toDOM:function(e){var t=a(e);return["p",t.length>0?{class:t.join(" ")}:{},0]}};return e.update("paragraph",t)};var s=function(e,t,n){throw"CustomParagraphView was not migrated!"};t.CustomParagraphView=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildCustomInputRules=void 0;var r=n(37);function o(e,t,n){return new r.InputRule(e,(function(e,r,o,i){var a=n instanceof Function?n(r):n,s=e.tr;if(r[1]){var u=o+r[0].indexOf(r[1]),c=u+r[1].length;c<i&&s.delete(c,i),u>o&&s.delete(o,u),i=o+r[1].length}return s.addMark(o,i,t.create(a)).removeStoredMark(t).insertText(" ")}))}t.buildCustomInputRules=function(e){return r.inputRules({rules:[r.wrappingInputRule(/^\s*([+])\s$/,e.nodes.todo_list),o(/\*\*(\S(?:|.*?\S))\*\*\s$/,e.marks.strong),o(/\*(\S(?:|.*?\S))\*\s$/,e.marks.em),o(/`(\S(?:|.*?\S))`\s$/,e.marks.code)]})}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ProseMirrorToolSet=void 0;var s=a(n(1));n(264);var u=n(120),c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={menuItemStates:null},n}return r(t,e),t.prototype.componentDidMount=function(){var e=this;this.subscriptions=[];var t=this.props.toolbarEvents.subscribeForMenuItemStateChanges((function(t){e.setState({menuItemStates:t.content})}));t&&this.subscriptions.push(t)},t.prototype.componentWillUnmount=function(){this.subscriptions.forEach((function(e){return e()}))},t.prototype.onClick=function(e,t){this.props.toolbarEvents.publishMenuItemRun(e)},t.prototype.avoidLosingFocus=function(e){e.preventDefault()},t.prototype.render=function(){var e=this;return this.state.menuItemStates?s.default.createElement(s.default.Fragment,null,this.props.iconConfigs.map((function(t,n){return s.default.createElement(u.ToolbarItemGroup,{key:n},t.map((function(t){return function(t,n,r){var o=e.state.menuItemStates[t];if(o){var i=["ProseMirrorToolSet-action-button"];o.isActive&&o.isEnabled&&i.push("ProseMirrorToolSet-action-button-active"),!1!==o.isEnabled&&!1!==o.isSelectable||i.push("ProseMirrorToolSet-action-button-disabled");var a=e.onClick.bind(e,t),c=e.avoidLosingFocus.bind(e);return s.default.createElement(u.ToolbarItem,{key:t},s.default.createElement(u.ToolbarIcon,{iconName:n,additionalClasses:i.concat(r),onClick:a,onMouseDown:c}))}}(t.itemIdentifier,t.itemIconName,t.additionalClasses)})))}))):s.default.createElement("span",{className:"Toolbar-item-spacer"},"n/a")},t}(s.Component);t.ProseMirrorToolSet=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.produceFileMetaData=void 0;var r=n(136);t.produceFileMetaData=function(e,t,n,o,i){var a;void 0===i&&(i=!1);var s=""!==(t=t.trim()).trim(),u=null===(a=n.match(/^(.*)$/m))||void 0===a?void 0:a[1],c=s?t:u||"",l=r.getBodyFromTextContent(n,i),d=r.getBodyFromTextContent(n,i||!s).substring(0,150).trim();return{id:e,normalizedLanguage:o,textContent:n,upperCaseTextContent:n.toUpperCase(),title:c,upperCaseTitle:c.toUpperCase(),body:l,trimmedBody:d,searchableString:[n,c].join(" ").toUpperCase()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldCreate=void 0;var r=n(60);t.shouldCreate=function(e){return e.id.startsWith(r.LOCAL_ID_PREFIX)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldDelete=void 0,t.shouldDelete=function(e){return!0===e.permanent.obsolete.state}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileStorageIsNotSupported=void 0;var r=n(174);t.fileStorageIsNotSupported=function(){return function(){throw r.compileFileStorageError("File Storage is not supported.")}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserService=void 0;var i=n(91),a=function(){function e(){}return e.prototype.signup=function(e){var t=e.username,n=e.password;return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,new i.Rest("users/register").create({email:t,password:n})];case 1:return e.sent(),[2]}}))}))},e.prototype.sendPasswordReset=function(e){var t=e.username;return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,new i.Rest("users/send_password_reset").create({email:t})];case 1:return e.sent(),[2]}}))}))},e.prototype.resetPassword=function(e){var t=e.token,n=e.password;return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,new i.Rest("users/change_password").create({token:t,password:n})];case 1:return e.sent(),[2]}}))}))},e.prototype.changePassword=function(e){var t=e.currentPassword,n=e.password;return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,new i.Rest("users/change_password").create({current_password:t,password:n})];case 1:return e.sent(),[2]}}))}))},e}();t.UserService=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useObservable=void 0;var r=n(1);t.useObservable=function(e,t){return r.useEffect((function(){var n=t.subscribe(e);return function(){return n.unsubscribe()}}),[t,e])}},,,function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useAppState=t.useUpdateSettings=t.initialState=t.reduce=t.readId=t.resourceConfigs=t.DOCUMENTS_RESOURCE=t.getUpdatedAt=t.getPermanent=t.getEntity=t.getId=void 0;var o=n(134),i=n(283),a=n(38),s=n(116),u=n(9),c=n(115),l=n(1),d=n(61),p=n(60),f=n(163),h=n(164),m=n(165);t.getId=function(e){return e.id},t.getEntity=function(e){return e.resource};function g(e){return e.updatedAt}function v(e){if("string"!==typeof e.id)throw"id must be of type string";if("tag"!==e.documentType&&"snippet"!==e.documentType)throw"documentType must be one of 'tag' | 'string' - received "+e.documentType}function b(){return Date.now()}t.getPermanent=function(e,t){return r(r({},t||{obsolete:{state:!1}}),{documentType:e.documentType,version:e.version,origin:e.origin})},t.getUpdatedAt=g,t.DOCUMENTS_RESOURCE="documents",t.resourceConfigs=[{resourceName:t.DOCUMENTS_RESOURCE,schemaEnforcer:function(e){v(e),e.backup&&v(e.backup)}}];var y=function(){return function(e){return r(r({},e),{derivedState:r(r({},e.derivedState),{snippetMetaDataStore:o.initSnippetMetaDataStore(e.store,e.syncErrors)})})}},O=function(){return function(e){return r(r({},e),{derivedState:r(r({},e.derivedState),{snippetList:o.compileSnippetList(e.store,e.derivedState.snippetMetaDataStore,(function(){return!0}))})})}},S=function(){return function(e){return r(r({},e),{derivedState:r(r({},e.derivedState),{tagList:d.getAll(e.store.store).filter(s.isTag).map((function(e){return{metaData:{id:e.id,origin:e.permanent.origin,updatedAt:e.updatedAt,text:s.turnPathIntoTag(e.document.path)},tag:e.document}}))})})}},_=function(e,t){return function(n){return r(r({},n),{store:o.updateSnippet(n.store,e,t)})}},w=function(e){return function(t){return r(r({},t),{selectedSnippetId:e})}},j=function(){return function(e){var t=e.selectedSnippetId&&h.resolvePossiblyOldId(e.selectedSnippetId,e);return r(r({},e),{selectedSnippetListEntry:e.derivedState.snippetList.find((function(e){return e.metaData.id===t}))||e.derivedState.snippetList.filter((function(e){return!1===e.snippet.archived}))[0]})}},E=function(e,t){return function(n){return r(r({},n),{store:s.addTag(n.store,e,t)})}},x=function(e,n){return c.mergeStores(n.store.store,e.filter((function(e){return void 0!==e.payload.backup})).reduce((function(e,n){return c.saveSynced(e,n.payload.backup.id,n.payload.backup.resource,{config:{permanent:t.getPermanent(n.payload.backup)},updatedAt:n.payload.backup.updatedAt})}),[]),(function(){return!0})).mergedStore},P=function(){return function(e){return r(r({},e),{store:o.rewriteTagsAfterTagSync(e.store)})}},C=function(){return function(e){return u.pipe(e,y(),O(),S(),j())}},T=function(e){return function(t){return r(r({},t),{blockNextSync:e})}},k=function(e){return function(t){return u.pipe(t,function(e){return function(t){return r(r({},t),{derivedState:r(r({},t.derivedState),{snippetMetaDataStore:o.updateSnippetMetaDataStore(t.store,t.derivedState.snippetMetaDataStore,e,t.syncErrors)})})}}(e),O(),S(),j(),T(!1))}},D=function(){return function(e){return u.pipe(e,y(),O(),S(),j(),T(!1))}};t.readId=function(e){return e.id};function I(e,t){l.useEffect((function(){e({type:"setSettings",settings:{selectedTagPath:t.selectedTagPath,showOnlyDeleted:t.showOnlyDeleted,defaultOrigin:t.defaultOrigin}})}),[t.selectedTagPath,t.showOnlyDeleted,t.defaultOrigin])}t.reduce=function(e,n){switch(n.type){case"createSnippet":var l=p.generateLocalId();return u.pipe(e,function(e,t,n){return function(i){return r(r({},i),{store:o.createSnippet(i.store,e,t,n)})}}(l,n.snippet,e.settings.defaultOrigin),w(l),k(l));case"updateSnippet":return u.pipe(e,_(n.id,n.snippet),k(n.id));case"deleteSnippet":return u.pipe(e,_(n.id,r(r({},n.snippet),{archived:!0})),w(null),k(n.id));case"restoreSnippet":return u.pipe(e,_(n.id,r(r({},n.snippet),{archived:!1})),k(n.id));case"renameTag":return u.pipe(e,(N=n.newLabelValue,F=n.path,function(e){return r(r({},e),{store:s.renamePaths(e.store,N,F)})}),D());case"addTag":return u.pipe(e,E(n.path,e.settings.defaultOrigin),D());case"addTagToSnippet":return u.pipe(e,E(s.turnTagIntoPath(n.tag),function(e,t,n){var r=t.derivedState.snippetList.find((function(t){return t.metaData.id===e}));return r?r.metaData.origin:n}(n.id,e,e.settings.defaultOrigin)),S(),function(e,t){return function(n){var i,a=null===(i=n.derivedState.snippetList.find((function(e){return e.metaData.id===t})))||void 0===i?void 0:i.snippet;if(!a)return n;var c=s.turnTagIntoPath(e),l=n.derivedState.tagList.find((function(e){return u.isExactPath(e.tag.path,c)}));if(!l)return n;var d=a.tags.filter((function(e){return e!==l.metaData.id})).concat(l.metaData.id);return r(r({},n),{store:o.updateSnippet(n.store,t,r(r({},a),{tags:d}))})}}(n.tag,n.id),D());case"removeTagFromSnippet":return u.pipe(e,(L=n.snippetId,A=n.tagId,function(e){var t,n=null===(t=e.derivedState.snippetList.find((function(e){return e.metaData.id===L})))||void 0===t?void 0:t.snippet;if(!n)return e;var i=n.tags.filter((function(e){return e!==A}));return r(r({},e),{store:o.updateSnippet(e.store,L,r(r({},n),{tags:i}))})}),k(n.snippetId));case"setSnippetName":return u.pipe(e,function(e,t){return function(n){var i,a=null===(i=n.derivedState.snippetList.find((function(t){return t.metaData.id===e})))||void 0===i?void 0:i.snippet;if(!a)return n;var s=m.changeFileName(a,t);return r(r({},n),{store:o.updateSnippet(n.store,e,s),snippetEditorReloadToken:b()})}}(n.snippetId,n.name),k(n.snippetId));case"deleteTag":return u.pipe(e,function(e){return function(t){return r(r({},t),{store:s.deleteByPath(t.store,e)})}}(n.path),D());case"mergeDocumentStore":return u.pipe(e,(M=n.store,function(e){var t=c.mergeStores(e.store.store,M.store,(function(e,t){return t.dirty||!1===e.dirty&&e.permanent.version<t.permanent.version})),n=t.mergedStore,o=t.changedIds,i=e.selectedSnippetListEntry&&o.includes(e.selectedSnippetListEntry.metaData.id)?b():e.snippetEditorReloadToken,a=r(r({},e.store),{store:n});return r(r({},e),{snippetEditorReloadToken:i,store:a})}),C());case"updateAfterSync":return u.pipe(e,(I=n.results,function(e){return r(r({},e),{store:a.updateAfterSyncSome(e.store,I,t.getPermanent,g)})}),function(e){return function(t){return r(r({},t),{store:r(r({},t.store),{store:x(e,t)})})}}(n.results),P(),(O=n.syncErrors,function(e){return r(r({},e),{syncErrors:O})}),C(),T(n.syncErrors.length>0));case"setSelectedSnippetId":return u.pipe(e,w(n.id),j());case"setSettings":return u.pipe(e,(y=n.settings,function(e){return r(r({},e),{settings:y})}),(h=e.settings.defaultOrigin,v=n.settings.defaultOrigin,function(e){return"noop"===h&&"noop"!==v?r(r({},e),{store:e.store.store.reduce((function(e,t){return"noop"===t.item.permanent.origin?a.save(e,t.id,t.item.document,{updatedAt:new Date,config:{permanent:r(r({},t.item.permanent),{origin:v})}}):e}),e.store)}):e}),T(!1),C());case"changeOrigin":return u.pipe(e,function(e,t){return function(n){var o=p.generateLocalId(),a=i.changeOrigin(n.store,e,o,t),s=a[0],c=a[1],l=r(r({},n),{store:s});switch(c.permanent.documentType){case"snippet":return u.pipe(l,w(o),C());case"tag":return u.pipe(l,P(),C())}}}(n.id,n.origin),T(!1));case"markArchivedObsolete":return u.pipe(e,(d=n.timespanInMs,function(e){var t=f.getIdsOfDeletableItems(e.store.store,d).reduce((function(e,t){var n=a.get(e,t);return a.save(e,t,n.document,{updatedAt:new Date,config:{permanent:r(r({},n.permanent),{obsolete:{state:!0,reason:"archived"}})}})}),e.store);return r(r({},e),{store:t})}),C())}var d,h,v,y,O,I,M,L,A,N,F},t.initialState={store:{store:new Array,idMapping:{}},derivedState:{snippetMetaDataStore:[],snippetList:[],tagList:[]},blockNextSync:!1,selectedSnippetId:null,selectedSnippetListEntry:null,snippetEditorReloadToken:b(),settings:{selectedTagPath:[],showOnlyDeleted:!1,defaultOrigin:"cloud"},syncErrors:[]},t.useUpdateSettings=I,t.useAppState=function(e){var n=l.useReducer(t.reduce,t.initialState),r=n[0],o=n[1];return I(o,e),[r,o]}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.findOccurencesAndCompileSearchResults=t.cancelExecution=t.createBatchedExecutionContext=t.compileSnippetList=t.updateSnippetMetaDataStore=t.initSnippetMetaDataStore=t.isSnippet=t.rewriteTagsAfterTagSync=t.updateSnippet=t.createSnippet=t.updateSelectedTagPath=t.initSnippet=void 0;var o=n(61),i=n(38),a=n(136),s=n(39),u=n(60),c=n(9);function l(e){return"snippet"===e.permanent.documentType}t.initSnippet=function(e,t,n){return{tags:[],archived:!1,content:e,language:t,name:n}},t.updateSelectedTagPath=function(e,t,n){var r=e;if(e.length>0){var i=o.getAll(n.store).find((function(t){var n=t.document.path;return c.isExactPath(e,n)}));i&&t.tags.includes(i.id)||(r=[])}return r},t.createSnippet=function(e,t,n,r){return e=i.save(e,t,n,{config:{permanent:{origin:r,documentType:"snippet",version:0,obsolete:{state:!1}}}})},t.updateSnippet=function(e,t,n){return i.save(e,t,n)},t.rewriteTagsAfterTagSync=function(e){return o.getAll(e.store).filter(l).reduce((function(t,n){var o=n.document.tags.reduce((function(t,n){var r=t.needsSync,o=t.remappedTags,i=e.idMapping[n];return i?{needsSync:!0,remappedTags:o.concat(i)}:{needsSync:r,remappedTags:o.concat(n)}}),{needsSync:!1,remappedTags:new Array}),a=o.needsSync,s=o.remappedTags;return a?i.save(t,n.id,r(r({},n.document),{tags:s})):t}),e)},t.isSnippet=l,t.initSnippetMetaDataStore=function(e,t){return o.getAll(e.store).filter(l).reduce((function(n,r){return o.save(n,r.id,a.produceSnippetMetaData(r,e,t))}),new Array)},t.updateSnippetMetaDataStore=function(e,t,n,r){var s=i.get(e,n),u=a.produceSnippetMetaData(s,e,r);return o.save(t,s.id,u)},t.compileSnippetList=function(e,t,n){return o.getAll(e.store).filter(l).filter(n).filter((function(e){return!1===e.permanent.obsolete.state})).sort(s.sortByUpdatedAt).map((function(e){return{snippet:e.document,metaData:o.get(t,e.id)}}))},t.createBatchedExecutionContext=function(){return{cancelled:!1}},t.cancelExecution=function(e){e.cancelled=!0};function d(e,t){for(var n,r=[],o=0,i=0,a=0,s=t;a<s.length;a++){var u=s[a];o=Math.max(0,u.start-100),r.length>0&&i>=o?r[r.length-1]={text:e.substring(n.end,u.start),highlight:!1}:(o>0&&r.push({text:" ... ",highlight:!1}),r.push({text:e.substring(o,u.start),highlight:!1})),r.push({text:e.substring(u.start,u.end),highlight:!0}),i=Math.min(e.length,u.end+100),r.push({text:e.substring(u.end,i),highlight:!1}),n=u}return r}function p(e,t){var n,r=[],o=0;t=t.map((function(e){return e.toUpperCase()}));var i=e.metaData.title.toUpperCase(),a=e.metaData.textContent.toUpperCase();return n=u.findOccurences(i,t),o+=u.calculateSearchRelevance(n,t),(r=r.concat(d(e.metaData.title,n))).length>0&&r.push({text:" ... ",highlight:!1}),n=u.findOccurences(a,t),o+=u.calculateSearchRelevance(n,t),{chunks:r=r.concat(d(e.metaData.textContent,n)),relevance:o,updatedAt:e.metaData.updatedAt}}t.findOccurencesAndCompileSearchResults=function(e,t){var n=[];if((t=t.filter((function(e){return e}))).length<=0)return n;for(var r=e,o=0;o<r.length;o++){var i=r[o],a=p(i,t),s=a.chunks,u=a.relevance,c=a.updatedAt;s.length>0&&(n=n.concat({id:i.metaData.id,chunks:s,relevance:u,updatedAt:c}))}return n.filter((function(e){return e.chunks.length>0})).sort((function(e,t){var n=e.relevance,r=e.updatedAt,o=t.relevance,i=t.updatedAt;return o-n||i.getTime()-r.getTime()})).slice(0,20)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.setUpIdMapping=void 0,t.setUpIdMapping=function(e,t,n){var o;return r(r({},e),{idMapping:r(r({},e.idMapping),(o={},o[t]=n,o))})}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.produceSnippetMetaData=t.getBodyFromTextContent=void 0;var o=n(116),i=n(38),a=n(52);t.getBodyFromTextContent=function(e,t){return void 0===t&&(t=!1),e.split("\n").filter((function(e,n){return(!t||0!==n)&&" "!==e})).join(" ")},t.produceSnippetMetaData=function(e,t,n){var s=e.document.tags.map((function(e){var n=i.get(t,e);return n&&o.isTag(n)&&!n.document.archived?{path:n.document.path,text:o.turnPathIntoTag(n.document.path),id:e}:void 0})).filter((function(e){return void 0!==e}));return r(r({},function(e){var t=a.getPluginByLanguage(e.document.language);return t?t.produceFileMetaData(e):{id:"n/a",normalizedLanguage:"n/a",textContent:"n/a",upperCaseTextContent:"n/a",title:"n/a",upperCaseTitle:"n/a",body:"n/a",trimmedBody:"n/a",searchableString:"n/a"}}(e)),{resolvedTags:s,dirty:e.dirty,origin:e.permanent.origin,updatedAt:e.updatedAt,syncErrors:n.filter((function(t){return t.documentId&&t.documentId===e.id})).map((function(e){return e.message}))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useScrollIntoView=void 0;var r=n(1);t.useScrollIntoView=function(e){var t=e.dependency,n=e.condition,o=e.index,i=e.refs,a=e.useTimeout,s=void 0!==a&&a;return r.useEffect((function(){if(n){var e=function(){var e,t;return null===(t=null===(e=i.current)||void 0===e?void 0:e[o])||void 0===t?void 0:t.scrollIntoView({block:"nearest"})};s?setTimeout(e,0):e()}}),[t])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileEntries=t.updateCollapsedPaths=void 0;var r=n(118);function o(e,t,n,i,a,s,u){return e.content.reduce((function(e,t){var a=e[0],c=e[1],l=n.concat([t.name]),d=function(e,t){return e.some((function(e){return r.isExactPath(t,e)}))}(u,l);return o(t,a=a.concat([{name:t.name,depth:i,hasChildren:t.content.length>0,index:c,isInsideCollapsed:s,isCollapsed:d,path:l,data:t.data}]),l,i+1,c+1,s||d,u)}),[t,a])}t.updateCollapsedPaths=function(e,t,n){return n?e.concat([t]):e.filter((function(e){return!r.isExactPath(t,e)}))},t.compileEntries=function(e,t){return o(e,[],[],0,0,!1,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeCollapseToggler=t.makeRightNavigationHandler=t.makeLeftNavigationHandler=t.makeVerticalNavigationHandler=t.findNextSelectable=t.findNextCollapsible=void 0;var r=n(78);function o(e,t,n,o){for(var i=0,a=t;i<n.length&&(i++,!o(a=r.normalizeCounter(t+i*e,n.length))););return a}function i(e,t,n){return n[o(e,t,n,(function(e){return!0===n[e].hasChildren&&!n[e].isInsideCollapsed}))]}function a(e,t,n){return n[o(e,t,n,(function(e){return!1===n[e].isInsideCollapsed}))]}t.findNextCollapsible=i,t.findNextSelectable=a,t.makeVerticalNavigationHandler=function(e,t,n,r){return function(o){return t(a(e,n,r)),o}},t.makeLeftNavigationHandler=function(e,t,n,r){return function(o){var a=r[n];return a.hasChildren&&!a.isCollapsed?t(n,!0):e(i(-1,n,r)),o}},t.makeRightNavigationHandler=function(e,t,n,r){return function(o){var a=r[n];return a.hasChildren&&a.isCollapsed?t(n,!1):e(i(1,n,r)),o}},t.makeCollapseToggler=function(e,t,n){return function(r){var o=n[t];return o.hasChildren&&e(t,!o.isCollapsed),r}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.makeTreeViewWrapperBindings=t.makeDefaultTreeViewKeyHandlerChain=t.useTreeView=t.findIndex=void 0;var o=n(1),i=n(118),a=n(78),s=n(138),u=n(139);function c(e,t){switch(t.type){case"setCollapsed":return function(){var n=s.updateCollapsedPaths(e.collapsedPaths,e.entries[t.index].path,t.collapsed),o=s.compileEntries(e.tree,n)[0];return r(r({},e),{collapsedPaths:n,entries:o})}();case"set":return function(){var n=s.compileEntries(t.tree,e.collapsedPaths)[0];return r(r({},e),{tree:t.tree,entries:n})}()}}t.findIndex=function(e,t){return Math.max(0,t.findIndex((function(t){return i.isExactPath(t.path,e)})))},t.useTreeView=function(e){var t=e.tree,n=e.collapsedPaths,r=o.useMemo((function(){return function(e,t){return void 0===t&&(t=[]),{tree:e,collapsedPaths:t,entries:s.compileEntries(e,t)[0]}}(t,n)}),[]),i=o.useReducer(c,r),a=i[0],u=i[1];return o.useEffect((function(){u({type:"set",tree:t})}),[t]),[a,u]},t.makeDefaultTreeViewKeyHandlerChain=function(e,t,n,r){return[a.buildKeyboardEventHandlerChainItem(a.KEY_CODES.UP_ARROW,u.makeVerticalNavigationHandler(-1,n,t,e.entries)),a.buildKeyboardEventHandlerChainItem(a.KEY_CODES.DOWN_ARROW,u.makeVerticalNavigationHandler(1,n,t,e.entries)),a.buildKeyboardEventHandlerChainItem(a.KEY_CODES.ENTER,u.makeCollapseToggler(r,t,e.entries)),a.buildKeyboardEventHandlerChainItem(a.KEY_CODES.SPACE,u.makeCollapseToggler(r,t,e.entries))]},t.makeTreeViewWrapperBindings=function(e){return{onKeyDown:a.buildHandler(e)}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useEditableLabel=t.makeEditableLabelLabelBindings=t.makeEditableLabelInputFieldBindings=void 0;var o=n(142);t.makeEditableLabelInputFieldBindings=function(e){return{onBlur:function(){return e.setToggled(!1)},onKeyPress:function(t){return"Enter"===t.key&&e.setToggled(!1)}}},t.makeEditableLabelLabelBindings=function(e){return r(r({},e.useDoubleClick?{onDoubleClick:function(){return e.setToggled(!0)}}:{onClick:function(){return e.setToggled(!0)}}),e.useMouseDown?{onMouseDown:function(){return e.setToggled(!0)}}:{})},t.useEditableLabel=function(e){return o.useToggle(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useToggle=t.parseOffOrOn=void 0;var r=n(97),o=n(117),i=n(1);t.parseOffOrOn=function(e){return parseInt(e)},t.useToggle=function(e){var t=r.useCyclicCounter(2,0),n=t[0],a=t[2],s=a.min,u=a.max;return o.useStateChangeEffect(n,i.useMemo((function(){return[{test:function(e,t){return void 0!==e&&e!==t},run:function(t,n){var r;return null===(r=null===e||void 0===e?void 0:e.onToggle)||void 0===r?void 0:r.call(e,1===n)}}]}),[null===e||void 0===e?void 0:e.onToggle])),[1===n,i.useCallback((function(e){return e?u():s()}),[])]}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useDrag=t.onStartDrag=void 0;var o=n(1),i=n(117);function a(e,t){return e-t}function s(e,t){e((function(e){return r(r({},e),{currentCoordinate:t.clientX,currentDelta:a(t.clientX,e.startCoordinate)})}))}function u(e,t,n,r){n("mousemove",t),e({isDragging:!1,startCoordinate:0,currentCoordinate:0,currentDelta:0})}t.onStartDrag=function(e,t,n,r){var o=s.bind({},e),i=u.bind({},e,o,n);t("mousemove",o),t("mouseup",i,{once:!0}),e({isDragging:!0,startCoordinate:r.clientX,currentCoordinate:r.clientX,currentDelta:0})},t.useDrag=function(e){var t=e.onStop,n=o.useState({isDragging:!1,startCoordinate:0,currentCoordinate:0,currentDelta:0}),r=n[0],s=n[1];return i.useStateChangeEffect(r,o.useMemo((function(){return{trigger:"off",extract:function(e){return e.isDragging},run:function(e){return null===t||void 0===t?void 0:t(a(e.currentCoordinate,e.startCoordinate))}}}),[])),[r,s]}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.useReducerWithEffects=void 0;var o=n(1),i=n(85);function a(e,t){var n=e[0];return function(e,t){var o=function(e,t,n){switch(n){case"clean up effects":return[t.state,null];default:return e(t.state,n)}}(n,e,t),i=o[0],a=o[1];return{state:i,effects:null===a?[]:a.length>0?r(e.effects,a):e.effects}}}t.useReducerWithEffects=function(e,t,n){var r=i.useFactory(a,[e],[]),s=o.useReducer(r,o.useMemo((function(){return{state:n,effects:[]}}),[])),u=s[0],c=s[1];return o.useEffect((function(){u.effects.length>0&&(u.effects.forEach((function(e){return t(u.state,e,c).then((function(e){e&&e.forEach(c)})).catch((function(e){throw console.log("error in useReducerWithEffects"),e}))})),c("clean up effects"))}),[u.effects]),[u.state,c]}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCodeMirrorThemeByName=t.getThemeBaseClassByName=void 0;var r={dark:{base:"Theme-dark",code:"one-dark"},light:{base:"Theme-light",code:"one-dark"},solarizedLight:{base:"Theme-solarized-light",code:"solarized light"},solarizedDark:{base:"Theme-solarized-dark",code:"solarized dark"},classicBlue:{base:"Theme-classic-blue",code:"classic-blue"}};t.getThemeBaseClassByName=function(e){return r[e].base},t.getCodeMirrorThemeByName=function(e){return r[e].code}},,,,function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.buildChangeImageTypeMenuItem=t.ImageView=t.resizableImage=void 0;var o=n(19);t.resizableImage={inline:!0,attrs:{src:{},width:{default:"10em"},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{priority:51,tag:"img[src][width]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt"),width:e.getAttribute("width")}}}],toDOM:function(e){var t={style:"width: "+e.attrs.width};return["span",r(r({},e.attrs),t)]}};var i=function(e,t,n){throw"ImageView was not migrated!"};t.ImageView=i,t.buildChangeImageTypeMenuItem=function(e,t,n){var r=function(n,r){if((n.selection&&n.selection.node&&n.selection.node.type)===e){if(r)r(n.tr.replaceSelectionWith(t.create({src:n.selection.node.attrs.src})));return!0}return!1},i={run:r,enable:function(e,t){return r(e,t)},select:function(t){return(t.selection&&t.selection.node&&t.selection.node.type)===e}};for(var a in n)i[a]=n[a];return new o.MenuItem(i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildTodoListKeyMap=t.handleMouseDown=t.todoListNodes=void 0;var r=n(40),o=n(250),i="ProseMirror-todo-list-item-checkbox",a={attrs:{done:{default:!1}},content:"paragraph block*",toDOM:function(e){return["li",{"data-type":"todo_item","data-done":e.attrs.done.toString()},["span",{class:"mdi mdi-checkbox-marked-circle "+i,contenteditable:"false"}],["span",{class:"mdi mdi-circle-outline "+i,contenteditable:"false"}],["div",{class:"ProseMirror-todo-list-item-content"},0]]},parseDOM:[{priority:51,tag:'[data-type="todo_item"]',getAttrs:function(e){return{done:"true"===e.getAttribute("data-done")}}}]};function s(e,t,n,r,o){return!("todo_item"!==n.type.name||!o.target.classList.contains(i))&&(e.dispatch(function(e,t,n){return e.tr.setNodeMarkup(t,null,{done:!n.attrs.done})}(e.state,r,n)),!0)}t.todoListNodes={todo_item:a,todo_list:{group:"block",content:"todo_item+ | list_item+",toDOM:function(e){return["ul",{"data-type":"todo_list"},0]},parseDOM:[{priority:51,tag:'[data-type="todo_list"]'}]}},t.handleMouseDown=function(e,t){return function(e,t,n){var r=e.posAtCoords(function(e){return{left:e.clientX,top:e.clientY}}(t));return function(e,t,n,r,o){if(-1==r)return!1;for(var i=e.state.doc.resolve(r),a=i.depth+1;a>0;a--)if(a>i.depth?t(e,n,i.nodeAfter,i.before(a),o,!0):t(e,n,i.node(a),i.before(a),o,!1))return!0;return!1}(e,n,r.pos,r.inside,t)}(e,t,s)},t.buildTodoListKeyMap=function(e){return r.keymap({Enter:o.splitTodoListItem(e.nodes.todo_item)})}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.appendCustomMarks=t.KNOWN_FONT_SIZES=t.KNOWN_COLORS=void 0;var o=n(11);function i(e,t){return""+e+o.capitalize(t)}t.KNOWN_COLORS=["blue","red","yellow"],t.KNOWN_FONT_SIZES=["small","big"];var a=[{prefix:"color",tagPrefix:"color",knownValues:t.KNOWN_COLORS},{prefix:"backgroundColor",tagPrefix:"background-color",knownValues:t.KNOWN_COLORS},{prefix:"fontSize",tagPrefix:"font-size",knownValues:t.KNOWN_FONT_SIZES}].map((function(e){var t=e.prefix,n=e.tagPrefix,r=e.knownValues;return{prefix:t,tagPrefix:n,knownValues:r,excludes:r.map((function(e){return i(t,e)})).join(" ")}})).reduce((function(e,t){var n=t.prefix,o=t.tagPrefix,a=t.knownValues,s=t.excludes;return r(r({},e),a.reduce((function(e,t){var a;return r(r({},e),((a={})[i(n,t)]=function(e,t){return{excludes:t,parseDOM:[{tag:e}],toDOM:function(t){return[e,0]}}}(function(e,t){return e+"-"+t}(o,t),s),a))}),{}))}),{});t.appendCustomMarks=function(e){return e.append(a)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ProseMirrorReader=void 0;var s=a(n(1)),u=n(54),c=n(58),l=n(154),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.shouldComponentUpdate=function(e){return c.shouldComponentUpdateForSnippet(this.props,e)},t.prototype.render=function(){if(!0===this.props.trim)return s.default.createElement("div",null,this.props.fileMeta.trimmedBody);var e=l.initState({schema:this.props.schema,docJson:this.props.content,onEscape:void 0,onLeaveUpwards:void 0}),t=new u.EditorView(document.createElement("div"),{state:e}),n=t.dom.innerHTML;return t.destroy(),s.default.createElement("div",{className:"ProseMirrorReader"},s.default.createElement("div",{dangerouslySetInnerHTML:{__html:n}}))},t}(s.Component);t.ProseMirrorReader=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initEditorView=t.initState=void 0;var r=n(362),o=n(5),i=n(54),a=n(36),s=n(40),u=n(15);n(252),n(253),n(254);var c=n(155),l=n(255),d=n(256),p=n(88),f=n(114),h=n(257),m=n(259),g=n(89),v=n(260);n(262);var b=n(39),y=n(151),O=n(53),S=n(123);var _=[function(e,t,n,r,o){if("A"===o.target.tagName){var i=o.target.getAttribute("href");return b.isElectron()?f.getElectron().shell.openExternal(i):window.open(i,"_blank"),!0}return!1}],w=[y.handleMouseDown],j=function(e,t,n,r,o){return!!_.find((function(i){return!0===i(e,t,n,r,o)}))},E=function(e,t){return!!w.find((function(n){return!0===n(e,t)}))};function x(e){var t=e.docJson,n=e.schema,i=e.onEscape,l=e.onLeaveUpwards,f=[n.nodes.list_item,n.nodes.todo_item],h=[n.nodes.bullet_list,n.nodes.ordered_list,n.nodes.todo_list],v=O.initDoc(n,t),b=r.exampleSetup({schema:n,menuBar:!1,history:!1}),_=a.history(),w=[S.buildCustomInputRules(n),d.buildKeyMap(f,h),s.keymap({"Mod-Enter":u.splitBlock}),y.buildTodoListKeyMap(n),O.buildListItemKeyMap(n),c.placeholderPlugin,m.ScrollPastEndPlugin,g.HighlightPlugin,_];return n.marks.link&&n.marks.link.attrs.nolabel&&w.push(p.makeAnchorPlugin(n,_.key)),o.EditorState.create({doc:v,plugins:w.concat(b).concat([O.buildEscapeKeyMap(i)]).concat([O.buildUpArrowKeyMap((function(e){e.selection.$cursor&&1===e.selection.$cursor.pos&&l&&l()}))])})}t.initState=x,t.initEditorView=function(e){var t=e.docJson,n=e.schema,r=e.editorElement,o=e.onDocChange,a=e.onStateChange,s=e.onKeyDown,u=e.onBlur,c=e.onFocus,d=e.onCursor,p=(e.uploadFile,x({docJson:t,schema:n,onEscape:e.onEscape,onLeaveUpwards:e.onLeaveUpwards}));a&&a(p);var f=new i.EditorView(r,{state:p,dispatchTransaction:function(e){var t=f.state.apply(e);if(f.updateState(t),a&&a(t),e.docChanged){var n=O.docToJson(t.doc);o&&o({docJson:n})}var r=t.selection.from,i=f.coordsAtPos(r);d&&d(i.bottom)},handleClickOn:j,handleDOMEvents:{blur:function(e,t){var n=O.docToJson(e.state.doc);u&&u({docJson:n})},focus:function(e,t){var n=e.state.selection.from,r=f.coordsAtPos(n);d&&d(r.bottom);var o=O.docToJson(e.state.doc);c&&c({docJson:o})},mousedown:E},handleKeyDown:function(e,t){s&&s(t)},nodeViews:{resizableImage:function(e,t,n){return new l.ImageView(e,t,n)},code_block:function(e,t,n){return new h.CodeBlockView(e,t,n)},paragraph:function(e,t,n){return new v.CustomParagraphView(e,t,n)}}});return f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildImageUploadMenuItem=t.placeholderPlugin=void 0;var r=n(19),o=n(5),i=n(54);function a(e,n,r,o){var i=function(e,n){var r=t.placeholderPlugin.getState(e).find(null,null,(function(e){return e.id===n}));return r.length?r[0].from:null}(e.state,o);null!=i&&e.dispatch(e.state.tr.replaceWith(i,i,n.create({src:r})).setMeta(t.placeholderPlugin,{remove:{id:o}}))}t.placeholderPlugin=new o.Plugin({state:{init:function(){return i.DecorationSet.empty},apply:function(e,t){t=t.map(e.mapping,e.doc);var n=e.getMeta(this);if(n&&n.add){var r=document.createElement("span");r.classList.add("ProseMirrorWriter-image-upload-placeholder");var o=i.Decoration.widget(n.add.pos,r,{id:n.add.id});t=t.add(e.doc,[o])}else n&&n.remove&&(t=t.remove(t.find(null,null,(function(e){return e.id===n.remove.id}))));return t}},props:{decorations:function(e){return this.getState(e)}}}),t.buildImageUploadMenuItem=function(e,n,o){return new r.MenuItem({icon:e,run:function(e,r,i){var s=document.createElement("input");s.setAttribute("type","file"),s.onchange=function(e){var r=function(e){var n={},r=e.state.tr;return r.selection.empty||r.deleteSelection(),r.setMeta(t.placeholderPlugin,{add:{id:n,pos:r.selection.from}}),e.dispatch(r),n}(i);new o(e.target.files[0]).then((function(e){var t=document.createElement("img");t.onload=function(){a(i,n,e,r)},t.src=e}))},s.click()}})}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ProseMirrorWriter=void 0;var u=s(n(1)),c=n(154),l=n(157),d=n(89),p=n(53),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.componentDidMount=function(){var e=this,t=function(e){return function(t){var n=t.docJson;return e&&e(n)}},n=l.buildMenuItemSpecs(this.props.schema,void 0),r=p.prepareMenuItemIterator((function(t){return e.props.toolbarEvents&&e.props.toolbarEvents.publishMenuItemStateChange(t)}),n),o=c.initEditorView({docJson:this.props.content,schema:this.props.schema,editorElement:this.editor,onDocChange:t(this.props.onChange),onBlur:t(this.props.onBlur),onFocus:t(this.props.onFocus),onStateChange:function(e){return r(e)},uploadFile:function(t){return e.props.uploadFile(t)},onEscape:this.props.onEscape,onLeaveUpwards:this.props.onLeaveUpwards,onKeyDown:void 0,onCursor:void 0});this.subscriptions=[];var i=this.props.toolbarEvents&&this.props.toolbarEvents.subscribeForMenuItemRun((function(e){n.find((function(t){return t.spec.class===e})).spec.run(o.state,o.dispatch)}));i&&this.subscriptions.push(i),this.editorView=o},t.prototype.componentWillUnmount=function(){this.subscriptions.forEach((function(e){return e()})),this.editorView.destroy()},t.prototype.focus=function(){this.editorView.focus()},t.prototype.onChangeQuery=function(e,t){var n=d.findOccurences(this.editorView.state.doc,e),r=t%n.length;n=n.map((function(e,t){return o(o({},e),{class:t===r?"HighlightPlugin-highlighted-active":"HighlightPlugin-highlighted"})})),d.highlightOccurences(this.editorView,n);var i=n[r];return i&&{coordinates:this.editorView.coordsAtPos(i.start),numberOfOccurences:n.length}},t.prototype.render=function(){var e=this,t=Math.min(550,this.props.availableEditorWidth);return u.default.createElement("div",{style:{minWidth:t},className:"ProseMirrorWriter-editor-container",ref:function(t){return e.editor=t}})},t}(u.Component);t.ProseMirrorWriter=f},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.buildMenuItemSpecs=void 0;var o=n(15),i=n(42),a=n(79),s=n(155),u=n(122),c=n(11),l=n(152),d=n(53),p=n(150);function f(e,t){var n={label:t.title,run:e};for(var r in t)n[r]=t[r];return n.enable=function(t){return e(t)},{spec:n}}function h(e,t,n){e=e.map((function(e){return void 0===e.strong?r(r({},e),{strong:!0}):e}));var i={run:function(n,i){var a=function(n){var i=r({},n.attrs),a=e.findIndex((function(e){var t=e.name,n=e.value;return e.strong&&i[t]!==n}))>=0;return e.forEach((function(e){var t=e.name,n=e.value;a?i[t]=n:delete i[t]})),o.setBlockType(t,i)}(n.selection.$from.parent);if(a(n))return a(n,i)},enable:function(e){return!0},active:function(t){return-1===e.findIndex((function(e){var n=e.name,r=e.value;return e.strong&&t.selection.$from.parent.attrs[n]!==r}))}};for(var a in n)i[a]=n[a];return{spec:i}}function m(e,t,n){var r=o.setBlockType(e,t.attrs),i=o.setBlockType(n.nodes.paragraph),a={run:function(e,t){return r(e)?r(e,t):i(e,t)},enable:function(t){var n=t.selection,o=n.$from,i=n.$to;return o.parent===i.parent&&o.parent.type===e||r(t)},active:function(n){var r=n.selection,o=r.$from,i=r.to,a=r.node;return a?a.hasMarkup(e,t.attrs):i<=o.end()&&o.parent.hasMarkup(e,t.attrs)}};for(var s in t)a[s]=t[s];return{spec:a}}function g(e,t){var n={active:function(t){return function(e,t){var n=e.selection,r=n.from,o=n.$from,i=n.to;return n.empty?t.isInSet(e.storedMarks||o.marks()):e.doc.rangeHasMark(r,i,t)}(t,e)},enable:!0};for(var r in t)n[r]=t[r];return f(o.toggleMark(e),n)}function v(e,t){return f(i.wrapInList(e,t.attrs),t)}function b(e){return{title:a.itemTitles[e],class:a.itemIdentifiers[e]}}var y=[].concat(l.KNOWN_COLORS.map((function(e){return"color"+c.capitalize(e)}))).concat(l.KNOWN_COLORS.map((function(e){return"backgroundColor"+c.capitalize(e)}))).concat(l.KNOWN_FONT_SIZES.map((function(e){return"fontSize"+c.capitalize(e)}))),O=function(e){return[].concat(y.map((function(t){return e.marks[t]&&{name:"toggle"+c.capitalize(t),command:g(e.marks[t],{title:a.itemTitles[t],class:a.itemIdentifiers[t]})}}))).filter((function(e){return e}))};t.buildMenuItemSpecs=function(e,t){var n,r={};(n=e.marks.strong)&&(r.toggleStrong=g(n,{title:a.itemTitles.bold,class:a.itemIdentifiers.bold})),(n=e.marks.em)&&(r.toggleEm=g(n,{title:a.itemTitles.italic,class:a.itemIdentifiers.italic})),(n=e.marks.code)&&(r.toggleCode=g(n,{title:a.itemTitles.code,class:a.itemIdentifiers.code})),(n=e.nodes.bullet_list)&&(r.wrapBulletList=v(n,{title:a.itemTitles.bulletList,class:a.itemIdentifiers.bulletList})),(n=e.nodes.ordered_list)&&(r.wrapOrderedList=v(n,{title:a.itemTitles.orderedList,class:a.itemIdentifiers.orderedList})),(n=e.nodes.todo_list)&&(r.wrapTodoList=v(n,{title:a.itemTitles.todoList,class:a.itemIdentifiers.todoList,attrs:{"data-type":"todo_list"}}));var i=d.getListItemTypes(e),l=d.makeUniversalLiftAndSinkCommand(i),y=l.universalLift,S=l.universalSink;if(i.length>0&&(r.liftItemMenu=f(y,{title:a.itemTitles.liftItem,class:a.itemIdentifiers.liftItem}),r.sinkItemMenu=f(S,{title:a.itemTitles.sinkItem,class:a.itemIdentifiers.sinkItem})),(n=e.nodes.code_block)&&(r.makeCodeBlock=m(n,{title:a.itemTitles.codeBlock,class:a.itemIdentifiers.codeBlock},e)),n=e.nodes.heading)for(var _=1;_<=10;_++)r["makeHead"+_]=m(n,{title:a.itemTitles["heading"+_],class:a.itemIdentifiers["heading"+_],attrs:{level:_}},e);r.joinUpItem=f(o.joinUp,{title:a.itemTitles.joinItem,class:a.itemIdentifiers.joinItem}),(n=e.nodes.resizableImage)&&(r.uploadImage=s.buildImageUploadMenuItem(null,n,t));var w=e.nodes.image,j=e.nodes.resizableImage;w&&j&&(r.changeToDefaultImage=p.buildChangeImageTypeMenuItem(j,w,{title:a.itemTitles.imageDefault,class:a.itemIdentifiers.imageDefault}),r.changeToResizableImage=p.buildChangeImageTypeMenuItem(w,j,{title:a.itemTitles.imageResizable,class:a.itemIdentifiers.imageResizable}));var E=function(e){return e.nodes.paragraph?[].concat(u.ATTRIBUTE_DEFINITIONS.BACKGROUND_COLOR.knownValues.map((function(t){var n="sticky"+c.capitalize(t);return{name:n,command:h([{name:"type",value:"sticky"},{name:u.ATTRIBUTE_DEFINITIONS.BACKGROUND_COLOR.name,value:t},{name:"itemAlignment",value:"center",strong:!1}],e.nodes.paragraph,b(n))}}))).concat(u.ATTRIBUTE_DEFINITIONS.BACKGROUND_COLOR.knownValues.map((function(t){var n="box"+c.capitalize(t);return{name:n,command:h([{name:"type",value:"box"},{name:u.ATTRIBUTE_DEFINITIONS.BACKGROUND_COLOR.name,value:t}],e.nodes.paragraph,b(n))}}))).concat(u.ATTRIBUTE_DEFINITIONS.TEXT_ALIGNMENT.knownValues.map((function(t){var n=""+u.ATTRIBUTE_DEFINITIONS.TEXT_ALIGNMENT.name+c.capitalize(t);return{name:n,command:h([{name:u.ATTRIBUTE_DEFINITIONS.TEXT_ALIGNMENT.name,value:t}],e.nodes.paragraph,b(n))}}))).concat(u.ATTRIBUTE_DEFINITIONS.ITEM_ALIGNMENT.knownValues.map((function(t){var n=""+u.ATTRIBUTE_DEFINITIONS.ITEM_ALIGNMENT.name+c.capitalize(t);return{name:n,command:h([{name:u.ATTRIBUTE_DEFINITIONS.ITEM_ALIGNMENT.name,value:t}],e.nodes.paragraph,b(n))}}))).concat([{name:"quote",command:h([{name:u.ATTRIBUTE_DEFINITIONS.TYPE.name,value:"quote"},{name:u.ATTRIBUTE_DEFINITIONS.BACKGROUND_COLOR.name,value:null},{name:u.ATTRIBUTE_DEFINITIONS.TEXT_ALIGNMENT.name,value:null},{name:u.ATTRIBUTE_DEFINITIONS.ITEM_ALIGNMENT.name,value:null}],e.nodes.paragraph,b("quote"))}]):[]}(e);E.forEach((function(e){var t=e.name,n=e.command;return r[t]=n}));var x=O(e);return x.forEach((function(e){var t=e.name,n=e.command;return r[t]=n})),[r.toggleStrong,r.toggleEm,r.toggleCode,r.makeCodeBlock,r.makeHead1,r.makeHead2,r.makeHead3,r.wrapBulletList,r.wrapOrderedList,r.wrapTodoList,r.liftItemMenu,r.sinkItemMenu,r.joinUpItem,r.uploadImage,r.changeToDefaultImage,r.changeToResizableImage].concat(E.map((function(e){var t=e.name;return r[t]}))).concat(x.map((function(e){var t=e.name;return r[t]}))).filter((function(e){return e}))}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TodoList=void 0;var u=s(n(1));n(267);var c=n(268),l=n(269),d=n(271),p=n(274),f=n(159),h=n(89),m=n(276),g=n(53),v=n(160);var b=["done"],y=function(e){return b.includes(e)};function O(e){return e.proseMirrorState.doc.toJSON()}var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return u.default.createElement("span",{className:"TodoList-clear-button",onClick:this.props.onClick,onMouseDown:this.props.onMouseDown},u.default.createElement("i",{className:"mdi mdi-close"}))},t}(u.Component),_=function(e){function t(t){var n=e.call(this,t)||this,r=Array.isArray(t.content)?m.makeProseMirrorStateFromTodos(t.content):m.makeProseMirrorStateFromSerializedDocJson(t.content),o=r.proseMirrorState;n.historyPluginKey=r.historyPluginKey,n.state={proseMirrorState:o,currentlyEditedTodo:n.props.currentlyEditedTodo,cursorPosition:n.props.cursorPosition||0,timestamp:Date.now(),hiddenStates:{pinned:!1,open:!1,done:!1}},n.onBlur=n.onBlur.bind(n),n.onDrag=n.onDrag.bind(n),n.onSpacerClick=n.onSpacerClick.bind(n),n.onInsertEmpty=n.onInsertEmpty.bind(n),n.inputRefs=[],n.historyPlugin=m.buildCustomHistoryPlugin(n),n.dispatch=n.dispatch.bind(n);var i=f.buildMenuItemSpecs();n.subscriptions=[];var a=n.props.toolbarEvents&&n.props.toolbarEvents.subscribeForMenuItemRun((function(e){i.find((function(t){return t.spec.class===e})).spec.run(n.state.proseMirrorState,n.dispatch)}));return a&&n.subscriptions.push(a),n.menuItemIterator=g.prepareMenuItemIterator((function(e){return n.props.toolbarEvents&&n.props.toolbarEvents.publishMenuItemStateChange(e)}),i),n.menuItemIterator(o),n}return r(t,e),t.prototype.componentWillUnmount=function(){this.subscriptions.forEach((function(e){return e()}))},t.prototype.componentDidUpdate=function(e){this.props.isEditing&&!e.isEditing&&this.getInput(0).focus()},t.prototype.cursor=function(){var e=this.getInput(this.state.currentlyEditedTodo);if(e){var t=e.getDimensions(),n=t.y+t.height;this.props.onCursor&&this.props.onCursor(n)}},t.prototype.change=function(){this.props.onChange(O(this.state))},t.prototype.blur=function(){this.props.onBlur(O(this.state)),this.setState({currentlyEditedTodo:null})},t.prototype.suggestPersist=function(){this.props.onSuggestPersist&&this.props.onSuggestPersist(O(this.state))},t.prototype.focus=function(){this.props.onFocus(O(this.state)),this.cursor()},t.prototype.setFocus=function(){this.inputRefs[0].focus(0)},t.prototype.getInput=function(e){return this.inputRefs[e]},t.prototype.onCheck=function(e){var t=this;if(!this.props.isEditing)return!1;this.setState((function(t){var n=v.handleCheck(e,t.proseMirrorState),r=n.proseMirrorState,o=n.oldStatus,i=n.newStatus,a=n.newIndex;return{currentlyEditedTodo:null,doAnimation:{from:{index:e,listName:o},to:{index:a,listName:i}},proseMirrorState:r}}),(function(){t.suggestPersist(),t.setState({doAnimation:void 0})}))},t.prototype.onDrag=function(e){var t=this,n=e.from,r=e.to,o=e.newList;this.setState((function(e){return{proseMirrorState:v.handleDrag(n,r,o,t.state.proseMirrorState).proseMirrorState,resetDragState:!0}}),(function(){t.suggestPersist(),t.setState({resetDragState:void 0})}))},t.prototype.onDelete=function(e){var t=this;this.setState((function(t){var n=v.handleDelete(e,t.proseMirrorState),r=n.proseMirrorState,o=n.oldStatus,i=n.newLength;return{proseMirrorState:r,currentlyEditedTodo:null,doAnimation:{from:{index:e,listName:o},to:{index:i,listName:"done"}}}}),(function(){t.suggestPersist(),t.setState({doAnimation:void 0})}))},t.prototype.onFocus=function(e,t,n){var r=this,o=this.state.proseMirrorState,i=v.buildOffsetMap(this.state.proseMirrorState,e),a=n.map(this.state.proseMirrorState.doc,i);if(!a.eq(this.state.proseMirrorState.selection)){var s=this.state.proseMirrorState.tr.setSelection(a);o=this.state.proseMirrorState.apply(s),this.menuItemIterator(o)}this.setState({proseMirrorState:o,currentlyEditedTodo:e,cursorPosition:null},(function(){return r.focus()}))},t.prototype.onBlur=function(e){(function(e,t){return!!(e.target&&e.relatedTarget&&e.target.id&&e.relatedTarget.id&&e.target.id.startsWith(t)&&e.relatedTarget.id.startsWith(t))})({target:e.target&&e.target.parentNode,relatedTarget:e.relatedTarget&&e.relatedTarget.parentNode},"todoListEntry")||this.blur()},t.prototype.onSpacerClick=function(e){b.includes(e)&&this.setState((function(t){var n;return{hiddenStates:o(o({},t.hiddenStates),(n={},n[e]=!t.hiddenStates[e],n))}}))},t.prototype.onInsertEmpty=function(){this.apply(v.insertEmpty(this.state.proseMirrorState))},t.prototype.onEnter=function(){v.handleEnter(this.state.proseMirrorState,this.dispatch)},t.prototype.onBackspace=function(){v.handleBackspace(this.state.proseMirrorState,this.dispatch)},t.prototype.onToggleBold=function(){v.handleToggleBold(this.state.proseMirrorState,this.dispatch)},t.prototype.onToggleItalic=function(){v.handleToggleItalic(this.state.proseMirrorState,this.dispatch)},t.prototype.onInsertHardBreak=function(){v.handleInsertHardBreak(this.state.proseMirrorState,this.dispatch)},t.prototype.onArrow=function(e,t){"up"===t&&e>0?this.inputRefs[e-1].focus(this.state.proseMirrorState.doc.content.content[e-1].nodeSize-2):"up"===t&&0===e?this.props.onLeaveUpwards&&this.props.onLeaveUpwards():"down"===t&&e<this.state.proseMirrorState.doc.content.content.length-1&&this.inputRefs[e+1].focus(0)},t.prototype.apply=function(e){var t=this;this.setState((function(n){var r=n.proseMirrorState.apply(e);t.menuItemIterator(r);var o,i,a=r.selection.$cursor;if(a&&(o=a.index(-1),i=a.parentOffset,!e.getMeta(t.historyPluginKey)&&!e.getMeta("insertEmpty"))){var s=v.maybeHandleItemInsertion(n.proseMirrorState,r,o);s&&(r=r.apply(s))}return{proseMirrorState:r,currentlyEditedTodo:o,cursorPosition:i}}),(function(){e.docChanged&&t.change(),t.cursor()}))},t.prototype.onInnerTransaction=function(e,t,n){if(1!==t.length||!h.isHighlightPluginTransaction(t[0])){var r=v.buildOffsetMap(this.state.proseMirrorState,e),o=v.mapTransactions(t,r,this.state.proseMirrorState.tr),i=n.map(o.doc,r);i.eq(this.state.proseMirrorState.selection)||(o=o.setSelection(i)),this.apply(o)}},t.prototype.dispatch=function(e){this.apply(e)},t.prototype.onChangeQuery=function(e,t){var n=[];if(this.inputRefs){for(var r=function(t){var r=i.inputRefs[t].findOccurences(e);n=n.concat(r.map((function(e,n){return{occurence:e,index:t}})))},i=this,a=0;a<this.inputRefs.length;a++)r(a);var s=t%n.length,u=n.reduce((function(e,t,n){return e[t.index]||(e[t.index]=[]),e[t.index].push(o(o({},t.occurence),{class:n===s?"HighlightPlugin-highlighted-active":"HighlightPlugin-highlighted"})),e}),{});for(a=0;a<this.inputRefs.length;a++)this.inputRefs[a].highlightOccurences(u[a]||[]);var c=n[s],l=c&&this.inputRefs[c.index]&&this.inputRefs[c.index].coordsAtPos(c.occurence.start);return l&&{coordinates:l,numberOfOccurences:n.length}}},t.prototype.render=function(){var e=this,t=this.state.proseMirrorState.doc.content.content,n=v.getPinnedEntries(t),r=v.getOpenEntries(t),o=v.getDoneEntries(t),i=[{name:"pinned",items:n,collapsible:y("pinned"),hidden:this.state.hiddenStates.pinned},{name:"open",items:r,collapsible:y("open"),hidden:this.state.hiddenStates.open},{name:"done",items:o,collapsible:y("done"),hidden:this.state.hiddenStates.done}],a=["TodoList"];a.push(this.props.isEditing?"TodoList-editing":"TodoList-read-only");var s=n.length+r.length===0&&u.default.createElement(p.AllDoneHeader,{onClick:this.onInsertEmpty});return u.default.createElement("div",{className:a.join(" "),onClick:this.props.onClick},s,u.default.createElement(d.InteractiveList,{subLists:i,renderItem:function(t,n,r,o){var i=["TodoList-entry"];i.push("TodoList-entry-"+r),n===o.currentlyDraggedTodo&&i.push("TodoList-currently-dragged-todo");var a=function(t){return u.default.createElement(c.CheckBox,{index:t,onClick:e.onCheck.bind(e,t),disabled:!e.props.isEditing})}(n),s=function(t,n){var r=e.state.currentlyEditedTodo===n;return u.default.createElement(l.ProseMirrorField,{index:n,todo:t,onFocus:e.onFocus.bind(e,n),onEnter:e.onEnter.bind(e,n),onEscape:e.props.onEscape,onBackspace:e.onBackspace.bind(e,n),onToggleBold:e.onToggleBold.bind(e,n),onToggleItalic:e.onToggleItalic.bind(e,n),onInsertHardBreak:e.onInsertHardBreak.bind(e,n),onArrow:e.onArrow.bind(e,n),shouldFocus:r,onBlur:e.onBlur,cursorPosition:e.state.cursorPosition,ref:function(t){return e.inputRefs[n]=t},readonly:!e.props.isEditing,onInnerTransaction:e.onInnerTransaction.bind(e,n),historyPlugin:e.historyPlugin})}(t,n),d=function(t){return u.default.createElement("span",{className:"TodoList-entry-delete-button"},u.default.createElement(S,{onClick:e.onDelete.bind(e,t)}))}(n),p=function(e,t){return u.default.createElement("span",{className:t},e)};return u.default.createElement("span",{className:i.join(" ")},p(a,"TodoList-checkbox-left"),s,p(a,"TodoList-checkbox-right"),p(d,"TodoList-delete-button"))},doAnimation:this.state.doAnimation,resetDragState:this.state.resetDragState,onDrag:this.onDrag,onDragStart:this.props.onDragStart,onDragStop:this.props.onDragStop,onSpacerClick:this.onSpacerClick}),!1)},t}(u.Component);t.TodoList=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildCustomInputRules=t.buildMenuItemSpecs=void 0;var r=n(157),o=n(80),i=n(123);t.buildMenuItemSpecs=function(){return r.buildMenuItemSpecs(o.schema,void 0)},t.buildCustomInputRules=function(){return i.buildCustomInputRules(o.schema)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.insertEmpty=t.buildCustomInputRules=t.buildDiffTr=t.maybeHandleItemInsertion=t.handleDelete=t.handleDrag=t.handleCheck=t.handleInsertHardBreak=t.handleToggleItalic=t.handleToggleBold=t.handleBackspace=t.handleEnter=t.mapTransactions=t.buildOffsetMap=t.calculateParagraphPositions=t.getDoneEntries=t.getOpenEntries=t.getPinnedEntries=t.isDone=t.isOpen=t.isPinned=void 0;var o=n(5),i=n(15),a=n(10),s=n(123),u=n(80),c=n(270);t.isPinned=function(e){return"pinned"===e.attrs.status};t.isOpen=function(e){return"open"===e.attrs.status};t.isDone=function(e){return"done"===e.attrs.status};t.getPinnedEntries=function(e){return e.filter(t.isPinned)};t.getOpenEntries=function(e){return e.filter(t.isOpen)};function l(e){return e.reduce((function(e,t){return t&&t.attrs.index>e?t.attrs.index:e}),0)}function d(e){return e.doc.content.content.reduce((function(t,n){var r=t[t.length-1];return t.length<e.doc.content.content.length&&t.push(r+n.nodeSize),t}),[0])}function p(e,t,n,o){var i,a,s=d(e),u=s[t],c=s[n],l=e.doc.nodeAt(u),p=e.doc.nodeAt(c);if(t<n?(a=e.tr.insert(c+p.nodeSize,l).delete(u,u+l.nodeSize),i=c-l.nodeSize+p.nodeSize):t>n?(a=e.tr.delete(u,u+l.nodeSize).insert(c,l),i=c):(a=e.tr,i=c),o){var f=r(r({},l.attrs),o(l,p));a=a.setNodeMarkup(i,null,f)}return a}t.getDoneEntries=function(e){return e.filter(t.isDone)},t.calculateParagraphPositions=d,t.buildOffsetMap=function(e,t){var n=d(e);return a.StepMap.offset(n[t]+1)},t.mapTransactions=function(e,t,n){for(var r=n,o=0;o<e.length;o++)for(var i=e[o].steps,a=0;a<i.length;a++)r.step(i[a].map(t));return r},t.handleEnter=function(e,t){i.splitBlock(e,t)},t.handleBackspace=function(e,t){i.joinBackward(e,t)},t.handleToggleBold=function(e,t){c.toggleBold(e,t)},t.handleToggleItalic=function(e,t){c.toggleItalic(e,t)},t.handleInsertHardBreak=function(e,t){c.insertHardBreak(e,t)},t.handleCheck=function(e,n){var r=n.doc.content.content,o=!t.isDone(r[e]),i=o?-1:0,a=r.findIndex((function(e){return"done"===e.attrs.status}));-1===a&&(a=r.length);var s=o?"done":"open",u=p(n,e,a+=i,(function(e,t){return{status:s}}));return{proseMirrorState:n.apply(u),oldStatus:r[e].attrs.status,newStatus:s,newIndex:a}},t.handleDrag=function(e,t,n,r){var o=p(r,e,t,(function(e,t){return n?{status:n}:{status:t.attrs.status}}));return{proseMirrorState:r.apply(o)}},t.handleDelete=function(e,t){var n=function(e,t){var n=d(e)[t],r=e.doc.nodeAt(n);return e.tr.delete(n,n+r.nodeSize)}(t,e);return{proseMirrorState:t.apply(n),oldStatus:t.doc.content.content[e].attrs.status,newLength:t.doc.content.content.length-1}},t.maybeHandleItemInsertion=function(e,t,n){if(t.doc.content.content.length-e.doc.content.content.length===1){var r=l(t.doc.content.content),o=d(t);return t.tr.setNodeMarkup(o[n],null,{index:r+1,status:t.doc.content.content[n-1].attrs.status})}},t.buildDiffTr=function(e,t,n){var r=e.content.findDiffStart(t.doc.content);if(null!==r){var o=e.content.findDiffEnd(t.doc.content),i=o.a,a=o.b,s=r-Math.min(i,a);return s>0&&(i+=s,a+=s),n.replace(r,a,e.slice(r,i)).setMeta("fromOutside",!0)}},t.buildCustomInputRules=function(){return s.buildCustomInputRules(u.schema)},t.insertEmpty=function(e){var t=l(e.doc.content.content);return e.tr.insert(0,u.schema.nodes.paragraph.create({index:t+1})).setSelection(o.Selection.near(e.doc.resolve(0))).setMeta("insertEmpty",!0)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.makeItem=t.makeDocJsonFromTodos=void 0,t.makeDocJsonFromTodos=function(e){return{type:"doc",content:e=function(e){return e.map((function(e){return"string"===typeof e.text?{type:"paragraph",attrs:{index:e.index,status:e.status||"open"},content:e.text&&[{type:"text",text:e.text}]}:e}))}(e=function(e){var t=function(e){return e.reduce((function(e,t){return t&&t.index>e?t.index:e}),0)}(e);return e.map((function(e){return e.index?e:r(r({},e),{index:++t})}))}(e))}},t.makeItem=function(e,t){return{text:e,status:t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postItSchema=t.POSTIT_COLORS=void 0;var r=n(121),o=n(3);t.POSTIT_COLORS=["blue","red","yellow"];var i={doc:r.nodes.doc,paragraph:r.nodes.paragraph,text:r.nodes.text},a={strong:r.marks.strong,em:r.marks.em};t.postItSchema=new o.Schema({nodes:i,marks:a})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdsOfDeletableItems=void 0;var r=n(58),o=n(61);t.getIdsOfDeletableItems=function(e,t){void 0===t&&(t=r.ONE_WEEK);var n=new Date(Date.now()-t);return o.getAll(e).filter((function(e){return!1===e.permanent.obsolete.state&&e.document.archived&&e.updatedAt<=n})).map((function(e){return e.id}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePossiblyOldId=void 0,t.resolvePossiblyOldId=function e(t,n){var r=n,o=r.store.idMapping[t];return o?e(o,r):t}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.changeFileName=void 0;var o=n(52);t.changeFileName=function(e,t){var n=o.getPluginByLanguage(e.language);if(!n)throw"no plugin found!";var i,a,s,u=n.language,c=function(e,t,n){var r=e.split(".").pop();if(!r)return[t,t,n];var i=o.getPluginByExtension(r);return i?[i.testExtension(r),i.language,i]:[t,t,n]}(t,e.language,n),l=c[0],d=c[1],p=c[2];if(i=t,s=l,d===u)a=e.content;else{var f=n.toPlaintext(e.content);a=null===p||void 0===p?void 0:p.fromPlaintext(f)}return r(r({},e),{name:i,language:s,content:a})}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getActionByOrigin=t.makeOriginToActionMapping=void 0;var o=r(n(1)),i=n(66);t.makeOriginToActionMapping=function(e,t){return{origin:e,action:t}},t.getActionByOrigin=function(e,t){var n=e.find((function(e){return e.origin===t}));if(!n)throw i.compileError(t,"Origin not configured",o.default.createElement("span",null,"Origin ",o.default.createElement("em",null,t)," appears not to be configured. Did you enable it?"),void 0);return n.action}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.gistOriginConfig=t.statusCodeToText=t.checkReadyness=void 0;var a=i(n(1)),s=n(168),u=n(299);function c(e){return r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,s.getMasterGist(s.makeGistHttp(e.token),e.masterGistId).then((function(){return{ready:!0}})).catch((function(e){return 401===e.status||404===e.status?{ready:!1,reason:t.statusCodeToText[e.status]}:{ready:!1,reason:"Unexpected Error"}}))]}))}))}t.checkReadyness=c,t.statusCodeToText={401:"401 Unauthorized",404:"404 Master Gist Not Found"},t.gistOriginConfig={origin:"gist",backendFactory:function(e,t){return s.makeGistBackend(t)},defaultConfig:{enabled:!1,masterGistId:"",token:""},icon:"github",settingsPage:a.default.createElement(u.GistOriginSettingsPage,null),checkReadyness:c}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.makeGistBackend=t.makeGistHttp=t.getMasterGist=t.createMasterGist=void 0;var s=n(169),u=n(297),c=n(11),l=n(38),d=n(126),p=n(127),f=n(298),h={documents:[]};function m(e){var t={resource:e.document,documentType:e.permanent.documentType};return{files:{"1.json":{content:JSON.stringify(t)}}}}function g(e,t){return o(this,void 0,void 0,(function(){var n,r,o;return i(this,(function(i){switch(i.label){case 0:return[4,e.get("/"+t)];case 1:n=i.sent(),r=Object.entries(n.files);try{return o=JSON.parse(r[0][1].content),Array.isArray(o.documents)?[2,o]:[2,h]}catch(a){return[2,h]}return[2]}}))}))}function v(e,t,n){return o(this,void 0,void 0,(function(){var r,o,a,s;return i(this,(function(i){switch(i.label){case 0:return[4,g(e,t)];case 1:return r=i.sent(),o=n(r),a={files:(s={},s["1-snip-master-gist"]={content:JSON.stringify(o)},s)},[4,e.patch("/"+t,a)];case 2:return i.sent(),[2]}}))}))}function b(e,t,n){return o(this,void 0,void 0,(function(){var o,s;return i(this,(function(i){switch(i.label){case 0:return o=m(t),[4,e.post("",o)];case 1:return s=i.sent(),[4,v(e,n,(function(e){return r(r({},e),{documents:a(e.documents,[s.id])})}))];case 2:return i.sent(),[2,s]}}))}))}function y(e,t){return o(this,void 0,void 0,(function(){var n;return i(this,(function(r){return n=m(t),[2,e.patch("/"+t.id,n)]}))}))}function O(e,t,n){return o(this,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,e.del("/"+t.id)];case 1:return o.sent(),[4,v(e,n,(function(e){return r(r({},e),{documents:e.documents.filter((function(e){return e!==t.id}))})}))];case 2:return o.sent(),[2]}}))}))}function S(e,t,n){return o(this,void 0,void 0,(function(){return i(this,(function(r){return[2,{id:e,resource:{id:e},documentType:n.permanent.documentType,version:0,updatedAt:t}]}))}))}function _(e){var t={"Content-Type":"application/json",Authorization:"token "+e,Accept:"application/vnd.github.v3+json"};return u.makeHttp("https://api.github.com/gists",t)}t.createMasterGist=function(e){return o(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(o){switch(o.label){case 0:return t=_(e),n={files:(r={},r["1-snip-master-gist"]={content:JSON.stringify(h)},r)},[4,t.post("",n)];case 1:return[2,o.sent()]}}))}))},t.getMasterGist=g,t.makeGistHttp=_;t.makeGistBackend=function(e){var t=e.masterGistId,n=e.token,a={},u=new s.Mutex,h=_(n);return{fetchAll:function(){return o(void 0,void 0,void 0,(function(){var e,n,o,a;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,g(h,t)];case 1:return e=i.sent(),[4,c.allSettled(e.documents.map((function(e){return h.get("/"+e).catch((function(t){throw 404===t.status?{status:404,documentId:e,originalError:t}:t}))})))];case 2:return n=i.sent(),(o=c.getRejected(n).filter((function(e){return 404===e.status})).map((function(e){return e.documentId}))).length>0?[4,v(h,t,(function(e){return r(r({},e),{documents:e.documents.filter((function(e){return!o.includes(e)}))})}))]:[3,4];case 3:i.sent(),i.label=4;case 4:return[2,{results:c.getFulfilled(n).map((function(e){return{id:e.id,updatedAt:e.updated_at,documentJson:Object.entries(e.files)[0][1]}})).map((function(e){var t=e.id,n=e.updatedAt,o=e.documentJson,i=JSON.parse(o.content);return r(r({id:t},i),{resource:r({},i.resource),version:0,updatedAt:new Date(n)})})),errors:[]}];case 5:throw a=i.sent(),f.handleError(a);case 6:return[2]}}))}))},update:function(e){return o(void 0,void 0,void 0,(function(){var n,r;return i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,8,9,10]),[4,u.getLockOn(a)];case 1:return o.sent(),d.shouldCreate(e)?[4,b(h,e,t)]:[3,3];case 2:return[2,S((n=o.sent()).id,new Date(n.updated_at),e)];case 3:return p.shouldDelete(e)?[4,O(h,e,t)]:[3,5];case 4:return o.sent(),[2,S(l.DELETEABLE,new Date,e)];case 5:return[4,y(h,e)];case 6:return[2,S((n=o.sent()).id,new Date(n.updated_at),e)];case 7:return[3,10];case 8:throw r=o.sent(),f.handleError(r,e);case 9:return u.releaseLockOn(a),[7];case 10:return[2]}}))}))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mutex=void 0;var r=function(){var e;return[new Promise((function(t){return e=t})),e]},o=function(){function e(){this.locks={}}return e.prototype.hasLockOn=function(e){return void 0!==this.locks[e]&&this.locks[e].length>0},e.prototype.getLockOn=function(e){return this.locks[e]=this.locks[e]||[],0===this.locks[e].length?(this.locks[e].push(r()),Promise.resolve(!0)):(this.locks[e].push(r()),this.locks[e][this.locks[e].length-2][0])},e.prototype.releaseLockOn=function(e){this.locks[e][0][1](),this.locks[e].shift()},e}();t.Mutex=o},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.cloudOriginConfig=t.bumpCloudOriginToken=void 0;var s=a(n(1)),u=n(301),c=n(305),l=n(306),d=n(182);t.bumpCloudOriginToken=function(e){return r(r({},e),{reloadToken:Date.now()})},t.cloudOriginConfig={origin:"cloud",backendFactory:function(e){return u.makeCloudBackend(e)},defaultConfig:{enabled:d.maybeEnableCloudOriginByDefault(),reloadToken:0},icon:"cloud-outline",settingsPage:s.default.createElement(l.CloudOriginSettingsPage,null),checkReadyness:function(){return o(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2,c.checkLoginState().then((function(e){var t=e[0];return e[1]?t?{ready:!0}:{ready:!1,reason:"Not Logged In"}:{ready:!1,reason:"Unable To Reach Backend"}}))]}))}))}}},function(e,t,n){"use strict";var r,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function a(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,e];case 1:return t=n.sent(),[2,new Promise((function(e,n){t.ok?e(t.json()):n(t)}))]}}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.del=t.patch=t.post=t.get=t.baseUrl=void 0,r="http://localhost:5000"===window.location.origin?"http://localhost:4000/api":"http://192.168.1.107:5000"===window.location.origin?"http://192.168.1.107:4000/api":"http://172.20.10.2:5000"===window.location.origin?"http://172.20.10.2:4000/api":"file://"===window.location.origin||"https://getsnip.io"===window.location.origin?"https://api.getsnip.io":window.location.origin,t.baseUrl=r,t.get=function(e){var n={headers:new Headers({"Content-Type":"application/json"}),credentials:"include"};return a(fetch(""+t.baseUrl+e,n))},t.post=function(e,n){var r={method:"POST",body:JSON.stringify(n),headers:new Headers({"Content-Type":"application/json"}),credentials:"include"};return a(fetch(""+t.baseUrl+e,r))},t.patch=function(e,n){var r={method:"PATCH",body:JSON.stringify(n),headers:new Headers({"Content-Type":"application/json"}),credentials:"include"};return a(fetch(""+t.baseUrl+e,r))},t.del=function(e){return a(fetch(""+t.baseUrl+e,{method:"DELETE",credentials:"include"}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.makeFetcherAndPusherMappings=t.defaultMakeCacheFunctions=t.makeErrorBackend=t.noopCacheDeleter=t.noopCachePusher=t.noopCacheFetcher=t.isWrapperOfType=void 0;var s=n(11),u=n(166),c=n(173),l=n(175),d=n(176),p=n(177);t.isWrapperOfType=function(e,t){return e.permanent.documentType===t};t.noopCacheFetcher=function(){return o(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2,[]]}))}))};t.noopCachePusher=function(){return o(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2,{resource:void 0}]}))}))};t.noopCacheDeleter=function(){return o(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2,void 0]}))}))};var f=function(e,t){return function(){return o(void 0,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,e.fetchAll()];case 1:return(n=r.sent()).results.forEach((function(e){return t(e)})),[2,n]}}))}))}},h=function(e,t){return function(n){return o(void 0,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:return[4,e.update(n)];case 1:return r=o.sent(),t(r),[2,r]}}))}))}};function m(e,t){return{message:e,documentId:t}}t.makeErrorBackend=function(e){return{update:function(t){return new Promise((function(n,r){return setTimeout((function(){return r(m(e,t.id))}),1e3)}))},fetchAll:function(){return new Promise((function(t,n){return setTimeout((function(){return n(m(e))}),1e3)}))}}};t.defaultMakeCacheFunctions=function(e,t){var n=c.makeFileStoragePusher(e,t,(function(e){return e.id})),r=l.makeFileStorageFetcher(e,t);return{pushToCache:n,fetchFromCache:function(){return r().then((function(e){return e.results}))},deleteFromCache:d.makeFileStorageDeleter(e,t,(function(e){return e}))}},t.makeFetcherAndPusherMappings=function(e){return function(e){var t=e.resourceConfigs,n=e.originConfigs,o=e.settings;return t.reduce((function(e,t){var i,a,c=n.map((function(e){var n=s.getOriginSettings(o,e.origin,e.defaultConfig);if(!1===n.enabled)return null;var i=e.backendFactory(t.resourceName,n);return r(r({},e),{pusher:h(i,t.schemaEnforcer),fetcher:f(i,t.schemaEnforcer)})})).filter(s.isNotNull);return r(r({},e),{fetcherMappings:r(r({},e.fetcherMappings),(i={},i[t.resourceName]=c.map((function(e){return u.makeOriginToActionMapping(e.origin,e.fetcher)})),i)),pusherMappings:r(r({},e.pusherMappings),(a={},a[t.resourceName]=c.map((function(e){return u.makeOriginToActionMapping(e.origin,e.pusher)})),a))})}),{fetcherMappings:{},pusherMappings:{}})}(r(r({},e),{originConfigs:a(e.originConfigs,[p.noopOriginConfig])}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeFileStoragePusher=void 0;var r=n(39),o=n(128),i=n(92);t.makeFileStoragePusher=function(e,t,n){if(!r.isElectron())return o.fileStorageIsNotSupported();var a=window.require("fs");return function(r){return t?new Promise((function(o,i){a.writeFile(t+"/"+e+"-"+n(r),JSON.stringify(r),(function(e){e?i(e):o(r)}))})):i.noDirectorySpecified()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileFileStorageError=void 0,t.compileFileStorageError=function(e){return{isFileStorageError:!0,description:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeFileStorageFetcher=void 0;var r=n(11),o=n(39),i=n(128),a=n(92);t.makeFileStorageFetcher=function(e,t){if(!o.isElectron())return i.fileStorageIsNotSupported();var n=window.require("fs");return function(){return t?new Promise((function(o,i){n.readdir(t,(function(a,s){if(a)i(a);else{var u=s.filter((function(t){return t.startsWith(e)})).map((function(e){return new Promise((function(r,o){return n.readFile(t+"/"+e,(function(t,n){t?o(t):r({filename:e,content:n})}))}))}));r.allSettled(u).then((function(e){var t=e.filter((function(e){return"fulfilled"===e.status}));o({results:t.map((function(e){return JSON.parse(e.value.content)})),errors:[]})}))}}))})):a.noDirectorySpecified()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeFileStorageDeleter=void 0;var r=n(39),o=n(128),i=n(92);t.makeFileStorageDeleter=function(e,t,n){if(!r.isElectron())return o.fileStorageIsNotSupported();var a=window.require("fs");return function(r){return t?new Promise((function(o,i){a.unlink(t+"/"+e+"-"+n(r),(function(e){e?i(e):o(r)}))})):i.noDirectorySpecified()}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.noopOriginConfig=void 0;var i=n(66);t.noopOriginConfig={origin:"noop",backendFactory:function(){return function(){var e=i.compileError("noop","No origin configured","Please configure at least one origin.",void 0);return{update:function(){return new Promise((function(t,n){return n(e)}))},fetchAll:function(){return new Promise((function(e){return e({results:[],errors:[]})}))}}}()},defaultConfig:{enabled:!0},icon:"",settingsPage:null,checkReadyness:function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){return[2,{ready:!1,reason:"Not ready."}]}))}))}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ChangePasswordForm=void 0;var s=a(n(1)),u=n(81),c=n(129),l=n(93),d=n(94),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.default.createElement(d.CredentialsFormWrapper,null,s.default.createElement(l.CredentialsForm,{title:"Change Password",fields:[u.currentPasswordField(u.PLACEHOLDER_OLD_PASSWORD),u.newPasswordField(u.PLACEHOLDER_NEW_PASSWORD),u.passwordRepeatField()],submitLabel:u.LABEL_CHANGE_PASSWORD,onSubmit:function(e){return(new c.UserService).changePassword({currentPassword:e.currentPassword,password:e.password}).then((function(){return u.PASSWORD_HAS_BEEN_CHANGED}))}}),s.default.createElement("div",{className:"CredentialsForm-button-row"},s.default.createElement("button",{className:"CommonUI-button-without-border",onClick:this.props.onClickBack},u.LABEL_BACK)))},t}(s.Component);t.ChangePasswordForm=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ForgotPasswordForm=void 0;var s=a(n(1)),u=n(81),c=n(129),l=n(93),d=n(94),p="REQUEST_TOKEN",f="HAS_REQUESTED_TOKEN",h="FORGOT_PASSWORD_DONE",m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={showSendPasswordResetForm:!1,showContinueToPasswordResetForm:!1,step:p},n}return r(t,e),t.prototype.isOnRequestTokenForm=function(){return this.state.step===p||this.state.step===f},t.prototype.hasRequestedToken=function(){return this.state.step===f},t.prototype.isDone=function(){return this.state.step===h},t.prototype.render=function(){var e=this,t=s.default.createElement(s.default.Fragment,null,s.default.createElement(l.CredentialsForm,{title:"Reset Password",key:"requestTokenForm",fields:[u.emailField(u.validateEmailLength)],submitLabel:u.LABEL_REQUEST_RESET,disabled:this.hasRequestedToken(),onSubmit:function(t){return(new c.UserService).sendPasswordReset({username:t.email}).then((function(){return e.setState({step:f}),u.RESET_MAIL_SENT}))}}),s.default.createElement("div",{className:"CredentialsForm-button-row"},s.default.createElement("button",{disabled:this.hasRequestedToken(),className:"CommonUI-button-without-border",onClick:this.props.onClickBack},u.LABEL_BACK),s.default.createElement("button",{disabled:!this.hasRequestedToken(),className:"CommonUI-button-without-border",onClick:function(){return e.setState({step:"ENTER_TOKEN"})}},u.LABEL_NEXT))),n=s.default.createElement(s.default.Fragment,null,s.default.createElement(l.CredentialsForm,{title:"Reset Password",key:"enterTokenForm",fields:[u.passwordResetTokenField(),u.newPasswordField(u.PLACEHOLDER_NEW_PASSWORD),u.passwordRepeatField()],submitLabel:u.LABEL_RESET_PASSWORD,disabled:this.isDone(),onSubmit:function(t){return(new c.UserService).resetPassword({token:t.token.trim(),password:t.password}).then((function(){return e.setState({step:h}),u.PASSWORD_HAS_BEEN_CHANGED}))}}),s.default.createElement("div",{className:"CredentialsForm-button-row"},s.default.createElement("button",{className:"CommonUI-button-without-border",onClick:this.props.onClickBack},u.LABEL_BACK)));return s.default.createElement(d.CredentialsFormWrapper,null,this.isOnRequestTokenForm()?t:n)},t}(s.Component);t.ForgotPasswordForm=m},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SignInForm=void 0;var s=a(n(1)),u=n(114),c=n(81),l=n(171),d=n(308),p=n(93),f=n(94),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this;s.default.createElement("div",{className:"CredentialsForm-button-column"},s.default.createElement("button",{className:"CommonUI-button-without-border",onClick:this.props.onClickForgotPassword},c.LABEL_FORGOT_PASSWORD),s.default.createElement("button",{className:"CommonUI-button-without-border",onClick:this.props.onClickChangePassword},c.LABEL_CHANGE_PASSWORD),s.default.createElement("button",{className:"CommonUI-button-without-border",onClick:this.props.onClickSignUp},c.LABEL_SIGN_UP));return s.default.createElement(f.CredentialsFormWrapper,null,s.default.createElement(p.CredentialsForm,{title:"Sign In",fields:[c.emailField(),c.currentPasswordField(c.PLACEHOLDER_PASSWORD)],submitLabel:c.LABEL_SIGN_IN,onSubmit:function(t){return(new d.SessionService).login({username:t.email,password:t.currentPassword}).then((function(){return e.props.onSuccess&&e.props.onSuccess(),e.props.onSubmit&&e.props.onSubmit(),c.SIGNIN_SUCCESSFUL}))}}),!1,s.default.createElement("div",{className:"CredentialsForm-button-column"},s.default.createElement("button",{className:"CommonUI-button-without-border",onClick:function(){return u.getElectron().shell.openExternal(l.baseUrl)}},c.LABEL_SIGN_UP)))},t}(s.Component);t.SignInForm=h},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SignUpForm=void 0;var s=a(n(1)),u=n(81),c=n(129),l=n(93),d=n(94),p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={signUpSuccessful:!1},n}return r(t,e),t.prototype.render=function(){var e=this;return s.default.createElement(d.CredentialsFormWrapper,null,s.default.createElement(l.CredentialsForm,{title:"Sign Up",fields:[u.emailField(u.validateEmailLength),u.newPasswordField(u.PLACEHOLDER_PASSWORD),u.passwordRepeatField()],submitLabel:u.LABEL_SIGN_UP,disabled:this.state.signUpSuccessful,onSubmit:function(t){return(new c.UserService).signup({username:t.email,password:t.password}).then((function(){return e.setState({signUpSuccessful:!0}),u.VERIFICATION_MAIL_SENT}))}}),s.default.createElement("div",{className:"CredentialsForm-button-row"},!this.state.signUpSuccessful&&s.default.createElement("button",{className:"CommonUI-button-without-border",onClick:this.props.onClickSignIn},u.LABEL_BACK),this.state.signUpSuccessful&&s.default.createElement("button",{className:"CommonUI-button-without-border",onClick:this.props.onClickSignIn},u.LABEL_GO_TO_SIGN_IN)))},t}(s.Component);t.SignUpForm=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maybeEnableCloudOriginByDefault=t.getDefaultOrigin=void 0;var r=n(39);t.getDefaultOrigin=function(){return r.isElectron()?"noop":"cloud"},t.maybeEnableCloudOriginByDefault=function(){return!r.isElectron()}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fileOriginConfig=t.makeFileBackend=t.DIRECTORY_NOT_SPECIFIED=t.DIRECTORY_NOT_ACCESSIBLE=void 0;var a=i(n(1)),s=n(309),u=n(310),c=n(312);function l(e,t){return new c.FileStorage(e,t.fileLocation)}t.DIRECTORY_NOT_ACCESSIBLE="Unable To Access Directory",t.DIRECTORY_NOT_SPECIFIED="No Directory Specified",t.makeFileBackend=l,t.fileOriginConfig={origin:"file",backendFactory:function(e,t){return l(e,t)},defaultConfig:{enabled:!1,fileLocation:""},icon:"file-outline",settingsPage:a.default.createElement(u.FileOriginSettingsPage,null),checkReadyness:function(e){return r(this,void 0,void 0,(function(){return o(this,(function(n){return""===e.fileLocation.trim()?[2,{ready:!1,reason:t.DIRECTORY_NOT_SPECIFIED}]:[2,s.testDirectoryAccess(e.fileLocation).then((function(){return{ready:!0}})).catch((function(){return{ready:!1,reason:t.DIRECTORY_NOT_ACCESSIBLE}}))]}))}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useRequestFocus=void 0;var r=n(1),o=n(130);t.useRequestFocus=function(e){var t=r.useRef(null);return o.useObservable(r.useCallback((function(){var e;return null===(e=t.current)||void 0===e?void 0:e.focus()}),[]),e),t}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoFocusingInputField=void 0;var s=a(n(1)),u=n(9);n(95);t.AutoFocusingInputField=function(e){var t=s.useRef(null);return u.useAutoFocusingInputField(t),s.default.createElement("input",r({ref:t},e))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Blurable=void 0;var s=a(n(1)),u=n(9);function c(e,t){var n=e[0],o=e[1],i=e[2],a=t[0];return r(r({},o?{onBlur:function(e){return a.current&&!a.current.contains(e.relatedTarget)&&n()}}:{}),i?{onKeyDown:function(e){return e.keyCode===u.KEY_CODES.ESCAPE&&n()}}:{})}n(329);t.Blurable=function(e){var t=e.onBlur,n=e.children,o=e.useBlur,i=void 0===o||o,a=e.useEscape,l=void 0===a||a,d=s.useRef(null),p=u.useFactory(c,[t,i,l],[d]);return s.default.createElement("div",r({ref:d,className:"Blurable-outer1",tabIndex:0},p),n)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;var s=i(n(1)),u=a(n(131)),c=n(186);n(330);t.Modal=function(e){var t=s.useMemo((function(){return document.getElementById("modal-root")}),[]);return u.default.createPortal(s.default.createElement(c.Blurable,{onBlur:e.onClose,useBlur:!1,useEscape:!0},s.default.createElement("div",{className:"Modal-main",onMouseDown:function(){return e.onClose()}},s.default.createElement("div",{className:"Modal-inner",onMouseDown:function(e){return e.stopPropagation()}},e.children))),t)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SidePanel=void 0;var a=i(n(1)),s=n(11);n(332);var u={vertical:"height",horizontal:"width"};t.SidePanel=function(e){var t,n,i=e.children,c=e.state,l=e.size,d=e.direction,p=e.useTransition,f=void 0===p||p,h=["0px",l+"px"],m=r(((t={})[u[d]]=h[c],t),f?{transition:u[d]+" 0.15s"}:{}),g=((n={})["min"+s.capitalize(u[d])]=h[1],n),v=o(["SidePanel-wrapper"],0===c?["SidePanel-isCollapsed"]:[]).join(" ");return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"SidePanel-outer1",style:m},a.default.createElement("div",{className:v,style:g},1===c?i:null)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventListenerManager=t.makeAdapterFactory=t.preventDefault=t.stopPropagation=void 0,t.stopPropagation=function(e){e.stopPropagation()},t.preventDefault=function(e){e.preventDefault()},t.makeAdapterFactory=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return function(n){return e.forEach((function(e){return e(n)})),t(n)}}},t.makeEventListenerManager=function(e){var t=new Map;return[function(n,r,o){var i=e(r);t.set(r,i),document.addEventListener(n,i,o)},function(e,n){var r=t.get(n);document.removeEventListener(e,r)}]}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollShadows=void 0;var i=o(n(1)),a=n(9);n(334);t.ScrollShadows=function(e){var t,n,o=a.useScrollTop(),s=o[0],u=o[1],c=a.useDimensions(),l=c[0],d=c[1],p=a.useDimensions(),f=p[0],h=p[1],m=s<=0,g=s>=Math.floor((null!==(t=null===h||void 0===h?void 0:h.height)&&void 0!==t?t:0)-(null!==(n=null===d||void 0===d?void 0:d.height)&&void 0!==n?n:0));return i.default.createElement("div",{className:"ScrollShadows-main",ref:l},i.default.createElement("div",{className:"ScrollShadows-shadow "+(m?"":"ScrollShadows-shadowActive")}),i.default.createElement("div",r({},a.trackScrollTop(u),{className:"ScrollShadows-inner"}),i.default.createElement("div",{ref:f},e.children)),i.default.createElement("div",{className:"ScrollShadows-shadowBottom "+(g?"":"ScrollShadows-shadowActive")}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchedEditableLabel=void 0;var i=o(n(1)),a=n(9),s=n(185);n(95);t.SwitchedEditableLabel=function(e){var t=e.initialValue,n=e.onChange,o=e.onToggle,u=e.placeholderWhenReadonly,c=e.doubleClick,l=e.className,d=a.useInputField(t),p=d[0],f=d[1],h=a.useEditableLabel({onToggle:function(e){return null===o||void 0===o?void 0:o(e,p)}}),m=h[0],g=h[1];return m?i.default.createElement(s.AutoFocusingInputField,r({className:l},a.makeInputFieldBindings({value:p,setValue:f,onChange:n}),a.makeEditableLabelInputFieldBindings({setToggled:g}),{onKeyDown:function(e){return e.stopPropagation()}})):i.default.createElement("span",r({},a.makeEditableLabelLabelBindings({setToggled:g,useDoubleClick:c})),p||u)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSubject=void 0;var r=n(1),o=n(193);t.useSubject=function(){return r.useMemo((function(){return new o.Subject}),[])}},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMegaSyncedAppState=void 0;var r=n(133),o=n(284),i=n(1),a=n(9),s=n(295),u=n(296),c=n(90),l=n(172);function d(e,t){var n=e[0];return n?l.defaultMakeCacheFunctions(r.DOCUMENTS_RESOURCE,n):null}t.useMegaSyncedAppState=function(e,t){var n=a.useDebouncedMemo((function(){return l.makeFetcherAndPusherMappings({settings:t,resourceConfigs:r.resourceConfigs,originConfigs:c.originConfigs})}),500,[t.originSettings]),p=a.useFactory(d,[e.cacheLocation],[]),f=o.useAutoSyncedAppState(t.defaultOrigin,n,p),h=f[0],m=f[1],g=f[2],v=f[3];return r.useUpdateSettings(m,t),i.useEffect((function(){document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&g({type:"requestDownload"})}))}),[]),s.useArchiveManager(h.store.store,m),[h,m,v,u.useDirtyState(h.store)]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOriginSettings=void 0,t.getOriginSettings=function(e,t,n){var r;return(null===(r=e.originSettings.find((function(e){return e.origin===t})))||void 0===r?void 0:r.settings)||n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startAnimation=void 0,t.startAnimation=function(e,t,n,r){var o=!1,i=t-e,a=performance.now();return window.requestAnimationFrame((function t(s){var u=(s-a)/n;r(e+Math.round(i*function(e){return(1-Math.cos(Math.PI*e))/2}(u))),!o&&u<1?window.requestAnimationFrame(t):r(e+i)})),function(){return o=!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isNotNull=t.getRejected=t.getFulfilled=t.allSettled=t.capitalize=t.copyToClipboard=t.ThemeContext=void 0;var a=i(n(1));function s(e){return"fulfilled"===e.status}function u(e){return"rejected"===e.status}t.ThemeContext=a.default.createContext(""),t.copyToClipboard=function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},t.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.allSettled=function(e){return r(this,void 0,void 0,(function(){var t=this;return o(this,(function(n){return[2,Promise.all(e.map((function(e){return r(t,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e];case 1:return[2,{status:"fulfilled",value:t.sent()}];case 2:return[2,{status:"rejected",reason:t.sent()}];case 3:return[2]}}))}))})))]}))}))},t.getFulfilled=function(e){return e.filter(s).map((function(e){return e.value}))},t.getRejected=function(e){return e.filter(u).map((function(e){return e.reason}))},t.isNotNull=function(e){return null!==e}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useObject=t.getObject=t.AppContext=void 0;var a=i(n(1));function s(e,t){var n=e.find((function(e){return e.name===t}));if(!n)throw"AppContext: object '"+t+"' not found!";return n.object}t.AppContext=a.default.createContext([]),t.getObject=s,t.useObject=function(e){return s(a.useContext(t.AppContext),e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useRefsCallback=void 0;var r=n(1);t.useRefsCallback=function(){var e=r.useRef([]),t=r.useCallback((function(t,n){return e.current&&(e.current[n]=t)}),[]);return{refs:e,callback:t}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.buildTransitionMap=t.useStateMachine=t.makeStateMachineReducer=void 0;var o=n(1);function i(e){var t=e.transitions,n=e.extract,r=void 0===n?function(e){return e}:n,o=e.write,i=void 0===o?function(e,t){return t}:o;return function(e,n){var o=t[r(e)][n]||r(e);return i(e,o)}}t.makeStateMachineReducer=i,t.useStateMachine=function(e,t){return o.useReducer(i({transitions:t}),e)},t.buildTransitionMap=function(e){var t=e[0].slice(1),n=t.reduce((function(e,t){var n;return r(r({},e),((n={})[t]={},n))}),{});return e.reduce((function(e,n,o){if(0===o)return e;var i=n[0],a=n.slice(1);return t.reduce((function(e,t,n){var o,s;return r(r({},e),((o={})[t]=r(r({},e[t]),((s={})[i]=a[n],s)),o))}),e)}),n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usePrevious=void 0;var r=n(1);t.usePrevious=function(e){var t=r.useRef();return r.useEffect((function(){t.current=e})),t.current}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useInputField=t.makeInputFieldBindings=void 0;var r=n(1);t.makeInputFieldBindings=function(e){return{value:e.value,onChange:function(t){var n;e.setValue(t.target.value),null===(n=e.onChange)||void 0===n||n.call(e,t.target.value)}}},t.useInputField=function(e){return r.useState(e)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.makeTreeViewEntryBindings=t.makeExpandedIconBindings=void 0,t.makeExpandedIconBindings=function(e){return e.width=e.width||"1em",r({style:{width:e.width}},e.entry.hasChildren?{onClick:function(){var t;return null===(t=e.setCollapsed)||void 0===t?void 0:t.call(e,e.entry.index,!e.entry.isCollapsed)}}:{})},t.makeTreeViewEntryBindings=function(e){return e.height=e.height||"1.5em",{onMouseDown:function(){var t;return null===(t=e.onSelect)||void 0===t?void 0:t.call(e,e.entry)},key:e.entry.index+"-"+e.entry.depth+"-"+e.entry.name,style:{zIndex:1e4-e.entry.index,height:e.height,marginTop:e.entry.isInsideCollapsed?"-"+e.height:void 0,transition:e.entry.isInsideCollapsed?"margin-top 0.15s, opacity 0.1s":"margin-top 0.15s, opacity 0.15s ease-in",opacity:e.entry.isInsideCollapsed?0:1,display:"flex",position:"relative"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAutoFocusingInputField=void 0;var r=n(1);t.useAutoFocusingInputField=function(e){r.useEffect((function(){var t;null===(t=e.current)||void 0===t||t.focus()}),[])}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.makeDefaultSelectionKeyHandlerChain=t.useScrollIntoViewForSelection=t.useSelection=void 0;var a=n(1),s=n(78),u=n(137),c=n(85),l=n(144),d=function(e){return function(t){return r(r({},t),{mode:e})}},p=function(e){return function(t){return r(r({},t),{value:e})}},f=function(e){return function(t){return r(r({},t),{currentIndex:e})}},h=function(){return function(e){return r(r({},e),{derivedStates:{active:"focused"===e.mode||"navigatingByKey"===e.mode||"navigatingByMouse"===e.mode,navigating:"navigatingByKey"===e.mode||"navigatingByMouse"===e.mode}})}},m=function(e,t){return function(n){return r(r({},n),{filteredEntries:t(e,n.value)})}};function g(e,t){var n=e[0],o=e[1];return function(e,t){switch(t.type){case"focus":case"click":return s.pipe(e,d("focused"),h(),(function(e){return[e,[]]}));case"confirm":return s.pipe(e,t.close?d("closed"):d("focused"),s.doUnless(!1===t.reset,p("")),s.doUnless(!1===t.reset,f(0)),s.doUnless(!1===t.reset,m(n,o)),h(),(u=[{type:"confirm",oldState:e}],function(e){return[e,u]}));case"change":return s.pipe(e,d("focused"),p(t.value),f(0),m(n,o),h(),(function(e){return[e,[]]}));case"escape":return s.pipe(e,d("closed"),h(),f(0),(function(e){return[e,[]]}));case"up":return s.pipe(e,(function(e){return r(r({},e),{currentIndex:s.normalizeCounter(e.currentIndex-1,e.filteredEntries.length)})}),d("navigatingByKey"),h(),(function(e){return[e,[]]}));case"down":return s.pipe(e,(a=t.considerFocused,function(e){return r(r({},e),{currentIndex:a&&"focused"===e.mode?e.currentIndex:s.normalizeCounter(e.currentIndex+1,e.filteredEntries.length)})}),d("navigatingByKey"),h(),(function(e){return[e,[]]}));case"mouseMove":return s.pipe(e,(i=t.currentIndex,function(e){return"navigatingByMouse"===e.mode&&e.currentIndex===i?e:s.pipe(e,d("navigatingByMouse"),f(i))}),h(),(function(e){return[e,[]]}));case"blur":return s.pipe(e,d("closed"),p(""),f(0),h(),(function(e){return[e,[]]}));case"updateFilteredEntries":return s.pipe(e,m(n,o),(function(e){return[e,[]]}))}var i,a,u}}function v(e,t){var n=this,r=e[0];return function(e,t,a){return o(n,void 0,void 0,(function(){return i(this,(function(e){switch(t.type){case"confirm":null===r||void 0===r||r(t.oldState)}return[2]}))}))}}t.useSelection=function(e){var t=e.entries,n=e.filter,r=e.initialValue,o=e.onConfirm,i=void 0===o?function(){}:o,s=c.useFactory(g,[t,n],[]),u=c.useFactory(v,[i],[]),d=a.useMemo((function(){return function(e,t,n){return h()({value:e,filteredEntries:n(t,e),currentIndex:0,mode:"closed",derivedStates:{active:!1,navigating:!1}})}(r,t,n)}),[]),p=l.useReducerWithEffects(s,u,d),f=p[0],m=p[1];return a.useEffect((function(){return m({type:"updateFilteredEntries"})}),[t,m]),[f,m]},t.useScrollIntoViewForSelection=function(e){var t=e.state,n=e.entryRefs;return u.useScrollIntoView({dependency:t.currentIndex,condition:t.derivedStates.active,index:t.currentIndex,refs:n,useTimeout:!0})},t.makeDefaultSelectionKeyHandlerChain=function(e,t){return void 0===t&&(t=!0),[s.buildKeyboardEventHandlerChainItem(s.KEY_CODES.ENTER,(function(){return e({type:"confirm",reset:!0,close:!1})})),s.buildKeyboardEventHandlerChainItem(s.KEY_CODES.ESCAPE,(function(){return e({type:"escape"})})),s.buildKeyboardEventHandlerChainItem(s.KEY_CODES.DOWN_ARROW,(function(n){return s.preventDefault(n),e({type:"down",considerFocused:t})})),s.buildKeyboardEventHandlerChainItem(s.KEY_CODES.UP_ARROW,(function(t){return s.preventDefault(t),e({type:"up"})}))]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useScrollTop=t.trackScrollTop=void 0;var r=n(1);t.trackScrollTop=function(e){return{onScroll:function(t){return e(t.currentTarget.scrollTop)}}},t.useScrollTop=function(){return r.useState(0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDimensions=void 0;var r=n(1);t.useDimensions=function(){var e=r.useRef(null),t=r.useState(null),n=t[0],o=t[1],i=new ResizeObserver((function(e){var t=e[0];return o(t.contentRect)}));return r.useEffect((function(){var t=e.current;if(t)return i.observe(t),function(){return i.unobserve(t)}}),[e.current]),[e,n]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useOnce=void 0;var r=n(1);t.useOnce=function(e,t){var n=r.useState(!1),o=n[0],i=n[1];r.useEffect((function(){if(t&&!o)return i(!0),e()}),[t])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebouncedMemo=void 0;var r=n(1),o=n(119);t.useDebouncedMemo=function(e,t,n){var i=r.useMemo((function(){return o.debounce((function(e,t){return t((function(){return e()}))}),t)}),[]),a=i[0],s=i[1],u=r.useMemo((function(){return e()}),[]),c=r.useState((function(){return u})),l=c[0],d=c[1];return r.useEffect((function(){return a(e,d).catch((function(){return null})),function(){return s()}}),n),l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebouncedEffect=void 0;var r=n(1),o=n(119);function i(e){e()}t.useDebouncedEffect=function(e,t,n){var a=r.useMemo((function(){return o.debounce(i,t)}),[]),s=a[0],u=a[1];r.useEffect((function(){return s(e).catch((function(){return null})),function(){return u()}}),n)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeMirrorPlugin=t.LANGUAGE=void 0;var i=o(n(1)),a=n(224),s=n(227),u=n(245),c=n(87),l=n(86),d="CodeMirrorPlugin";function p(e,t){return e.split("\n").splice(0,t).join("\n")}t.LANGUAGE="code";t.CodeMirrorPlugin={name:d,language:t.LANGUAGE,icon:"mdi-code-tags",editorClass:function(){return"SnippetEditor-code-mode"},snippetListClass:function(){return null},testExtension:function(e){return l.supportedCodeLanguages.includes(l.fileExtensionToLanguage[e])?l.fileExtensionToLanguage[e]:null},testLanguage:function(e){return e===t.LANGUAGE||l.supportedCodeLanguages.includes(e)},toPlaintext:function(e){return e},fromPlaintext:function(e){return e},bootstrap:function(e){return e},produceFileMetaData:function(e){return{id:e.id,normalizedLanguage:t.LANGUAGE,textContent:e.document.content,upperCaseTextContent:e.document.content.toUpperCase(),title:e.document.name,upperCaseTitle:e.document.name.toUpperCase(),body:e.document.content,trimmedBody:e.document.content.split("\n").splice(0,2).join("\n"),searchableString:[e.document.content,e.document.name].join(" ").toUpperCase()}},extractSubSnippets:function(e){return[{pluginName:d,type:"",content:e.snippet.content,textContent:e.snippet.content,searchableString:e.snippet.content.toUpperCase(),original:e}]},renderSubSnippet:function(e){return i.default.createElement(a.CodeMirrorReader,{content:p(e.original.snippet.content,6),language:e.original.snippet.language})},serialize:function(e){return e},deserialize:function(e){return e},init:function(e){return e},reader:a.CodeMirrorReader,writer:s.CodeMirrorWriter,toolbar:u.Toolbar,listEntry:function(e){return i.default.createElement(c.DefaultListEntry,r({},e),i.default.createElement(a.CodeMirrorReader,{content:p(e.snippetListEntry.snippet.content,2),language:e.snippetListEntry.snippet.language}))},createSnippetConfig:{viaInput:{placeholder:"Paste Code ...",bootstrap:function(e){return e}},viaButton:{label:"Code",bootstrap:function(){return""}}}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeMirrorReader=void 0;var s=a(n(1));n(145),n(225);var u=a(n(28)),c=n(58),l=n(146),d=n(11),p=n(86),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.highlight=function(){u.colorize([this.refs.codeBlock])},t.prototype.componentDidMount=function(){this.highlight()},t.prototype.componentDidUpdate=function(){this.highlight()},t.prototype.shouldComponentUpdate=function(e){return c.shouldComponentUpdateForSnippet(this.props,e)},t.prototype.render=function(){var e=p.getMimeTypeForLanguage(this.props.language);return s.default.createElement("div",{className:"cm-s-"+l.getCodeMirrorThemeByName(this.context)},s.default.createElement("pre",{ref:"codeBlock","data-lang":e},this.props.content))},t.contextType=d.ThemeContext,t}(s.Component);t.CodeMirrorReader=f},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modeInfo=void 0;for(var r=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}],o=0;o<r.length;o++){var i=r[o];i.mimes&&(i.mime=i.mimes[0])}t.modeInfo=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeMirrorWriter=void 0;var s=a(n(1));n(228),n(229),n(230),n(231),n(238);var u=n(239),c=n(146),l=n(86),d=function(e){function t(t){var n=e.call(this,t)||this;return n.language=n.props.language,t.toolbarEvents.publishCurrentLanguage(n.language),n}return r(t,e),t.prototype.componentDidMount=function(){this.initialize()},t.prototype.componentDidUpdate=function(e){e.language!==this.props.language&&this.setLanguage(this.props.language)},t.prototype.componentWillUnmount=function(){this.cm.toTextArea()},t.prototype.initialize=function(){var e=this,t=l.getMimeTypeForLanguage(this.language),n=function(e){return function(t){return e&&e(t.getValue())}},r=n(this.props.onChange),o=n(this.props.onBlur),i=n(this.props.onFocus);this.cm=u.initEditorView({element:this.refs.textarea,content:this.props.content,mode:t,onChange:r,onBlur:o,onFocus:i,onCursor:function(t){return e.props.onCursor&&e.props.onCursor(t)},theme:c.getCodeMirrorThemeByName(this.props.settings.themeName),onEscape:this.props.onEscape,onLeaveUpwards:this.props.onLeaveUpwards})},t.prototype.getValue=function(){return this.cm.getValue()},t.prototype.setValue=function(e){this.cm.setValue(e)},t.prototype.setLanguage=function(e){this.language=e,this.cm.toTextArea(),this.initialize()},t.prototype.focusEnd=function(){this.cm.focus(),this.cm.execCommand("goDocEnd")},t.prototype.focusStart=function(){this.cm.focus(),this.cm.execCommand("goDocStart")},t.prototype.focus=function(){this.focusStart()},t.prototype.render=function(){return s.default.createElement("div",{className:"CodeMirrorWriter-editor-container"},s.default.createElement("textarea",{ref:"textarea"}))},t}(s.Component);t.CodeMirrorWriter=d},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(232),n(147),n(233),n(149),n(234),n(236),n(237)},,,,,,,function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.initEditorView=void 0;var a=i(n(28));n(240),n(241),n(242),n(243);var s=n(9);n(244),t.initEditorView=function(e){var t=e.element,n=e.content,r=e.mode,o=e.onChange,i=e.onBlur,u=e.onFocus,c=e.onCursor,l=e.theme,d=e.onEscape,p=e.onLeaveUpwards,f=a.fromTextArea(t,{lineNumbers:!0,lineWrapping:!0,scrollbarStyle:"native",mode:r,theme:l,scrollPastEnd:!0});return f.setValue(n),f.on("change",o),f.on("blur",i),f.on("focus",u),f.on("cursorActivity",c),f.addKeyMap({Esc:function(e){return d&&d()}}),f.on("keydown",(function(e,t){t.keyCode===s.KEY_CODES.UP_ARROW&&1===e.doc.sel.ranges.length&&e.doc.sel.ranges[0].anchor===e.doc.sel.ranges[0].head&&0===e.doc.sel.ranges[0].anchor.line&&0===e.doc.sel.ranges[0].anchor.ch&&p&&p()})),f}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=void 0;var s=a(n(1));n(246);var u=n(120),c=n(86),l=[s.default.createElement("option",{key:"empty",value:""})].concat(c.supportedCodeLanguages.map((function(e){return s.default.createElement("option",{key:e,value:e},e)}))),d=function(e){function t(t){var n=e.call(this,t)||this;n.handleChange=n.handleChange.bind(n),n.state={selectedLanguage:void 0},n.subscriptions=[];var r=n.props.toolbarEvents.subscribeForCurrentLanguage((function(e){return n.setState({selectedLanguage:e})}));return r&&n.subscriptions.push(r),n}return r(t,e),t.prototype.componentWillUnmount=function(){this.subscriptions.forEach((function(e){return e()}))},t.prototype.handleChange=function(e){var t=e.target.value;this.setState({selectedLanguage:t}),this.props.toolbarEvents.publishCurrentLanguageChange(t)},t.prototype.render=function(){return s.default.createElement(u.ToolbarItemGroup,null,s.default.createElement(u.ToolbarItem,null,s.default.createElement(u.ToolbarIcon,{iconName:"format-bold"})),s.default.createElement(u.ToolbarItem,null,s.default.createElement("div",{className:"Autocomplete-shadow-panel"}),s.default.createElement("select",{className:"CodeMirror-toolbar-language-select",value:this.state.selectedLanguage,onChange:this.handleChange},l)))},t}(s.Component);t.Toolbar=d},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RichTextPlugin=t.LANGUAGE=void 0;var i=o(n(1)),a=n(53),s=n(251),u=n(263),c=n(87),l=n(125),d=n(58),p="RichText Plugin";function f(e){var t=new Array;return a.initDoc(a.completeSchema,e.snippet.content).descendants((function(n){t=(t=t.concat(function(e,t){return e.type===a.completeSchema.nodes.code_block?[{pluginName:p,type:"code block",content:e.textContent,textContent:e.textContent,searchableString:e.textContent.toUpperCase(),original:t}]:[]}(n,e))).concat(function(e,t){var n=e.isText&&e.marks&&e.marks.find((function(e){return e.type===a.completeSchema.marks.link}));return n?[{pluginName:p,type:"link",content:{label:n.attrs.label||n.attrs.href,href:n.attrs.href},textContent:n.attrs.href,searchableString:(n.attrs.label+" "+n.attrs.href).toUpperCase(),original:t}]:[]}(n,e))})),t}t.LANGUAGE="richtext";t.RichTextPlugin={name:p,language:t.LANGUAGE,icon:"mdi-text",editorClass:function(){return"SnippetEditor-richtext-mode"},snippetListClass:function(){return"SnippetList-entry-type-richtext"},testExtension:function(e){return"rt"===e?t.LANGUAGE:null},testLanguage:function(e){return e===t.LANGUAGE},toPlaintext:function(e){return a.getTextFromDoc(a.initDoc(a.completeSchema,e))},fromPlaintext:function(e){return a.docJsonFromString(a.completeSchema,e)},bootstrap:function(e){return a.docJsonFromString(a.completeSchema,e)},produceFileMetaData:function(e){return l.produceFileMetaData(e.id,e.document.name,a.getTextFromDoc(a.initDoc(a.completeSchema,e.document.content)),t.LANGUAGE)},extractSubSnippets:function(e){return f(e)},renderSubSnippet:function(e){switch(e.type){case"code block":return i.default.createElement("pre",null,i.default.createElement("code",null,e.content));case"link":return i.default.createElement("a",{href:e.content.href},e.content.label)}},serialize:function(e){return d.serializeJson(e)},deserialize:function(e){return d.deserializeJson(e)},init:function(e){return a.initDoc(a.completeSchema,e)},reader:s.RichTextReader,writer:s.RichTextWriter,toolbar:u.Toolbar,listEntry:function(e){return i.default.createElement(c.DefaultListEntry,r({},e),i.default.createElement(s.RichTextReader,{content:e.snippetListEntry.snippet.content,name:e.snippetListEntry.snippet.name,language:e.snippetListEntry.snippet.language,fileMeta:e.snippetListEntry.metaData,trim:!0}))},createSnippetConfig:{viaInput:{placeholder:"Paste Text ...",bootstrap:function(e){return a.docJsonFromString(a.completeSchema,e)}},viaButton:{label:"Note",bootstrap:function(){return a.docJsonFromString(a.completeSchema,"")}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.liftListItem=t.splitTodoListItem=void 0;var r=n(3),o=n(10);o.Transform.prototype.splitTodoListItem=function(e,t,n){void 0===t&&(t=1);for(var i=this.doc.resolve(e),a=r.Fragment.empty,s=r.Fragment.empty,u=i.depth,c=i.depth-t,l=t-1;u>c;u--,l--){a=r.Fragment.from(i.node(u).copy(a));var d=n&&n[l],p=d&&d.type||i.node(u).type;s=r.Fragment.from(d?p.create(d.attrs,s):i.node(u).copy(s))}return this.step(new o.ReplaceStep(e,e,new r.Slice(a.append(s),t,t,!0)))},t.splitTodoListItem=function(e){return function(t,n){var i=t.selection,a=i.$from,s=i.$to,u=i.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(s))return!1;var c=a.node(-1);if(c.type!=e)return!1;if(0==a.parent.content.size){if(2==a.depth||a.node(-3).type!=e||a.index(-2)!=a.node(-2).childCount-1)return!1;if(n){for(var l=r.Fragment.empty,d=a.index(-1)>0,p=a.depth-(d?1:2);p>=a.depth-3;p--)l=r.Fragment.from(a.node(p).copy(l));l=l.append(r.Fragment.from(e.createAndFill()));var f=t.tr.replace(a.before(d?null:-1),a.after(-3),new r.Slice(l,d?3:2,2));f.setSelection(t.selection.constructor.near(f.doc.resolve(a.pos+(d?3:2)))),n(f.scrollIntoView())}return!0}var h=s.pos==a.end()?c.contentMatchAt(a.indexAfter(-1)).defaultType:null,m=t.tr.delete(a.pos,s.pos),g=h&&[null,{type:h}];return!!o.canSplit(m.doc,a.pos,2,g)&&(0!==a.parentOffset&&(g=g||[]).push({attrs:{done:!1}}),n&&n(m.splitTodoListItem(a.pos,2,g).scrollIntoView()),!0)}},t.liftListItem=function(e){return function(t,n){var i=t.selection,a=i.$from,s=i.$to,u=a.blockRange(s,(function(t){return t.childCount&&t.firstChild.type==e}));return!!u&&(!n||(a.node(u.depth-1).type==e?function(e,t,n,i){var a=e.tr,s=i.end,u=i.$to.end(i.depth);s<u&&(a.step(new o.ReplaceAroundStep(s-1,u,s,u,new r.Slice(r.Fragment.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new r.NodeRange(a.doc.resolve(i.$from.pos),a.doc.resolve(u),i.depth));return t(a.lift(i,o.liftTarget(i)).scrollIntoView()),!0}(t,n,e,u):function(e,t,n){for(var i=e.tr,a=n.parent,s=n.end,u=n.endIndex-1,c=n.startIndex;u>c;u--)s-=a.child(u).nodeSize,i.delete(s-1,s+1);var l=i.doc.resolve(n.start),d=l.nodeAfter,p=0==n.startIndex,f=n.endIndex==a.childCount,h=l.node(-1),m=l.index(-1);if(!h.canReplace(m+(p?0:1),m+1,d.content.append(f?r.Fragment.empty:r.Fragment.from(a))))return!1;var g=l.pos,v=g+d.nodeSize;return i.step(new o.ReplaceAroundStep(g-(p?1:0),v+(f?1:0),g+1,v-1,new r.Slice((p?r.Fragment.empty:r.Fragment.from(a.copy(r.Fragment.empty))).append(f?r.Fragment.empty:r.Fragment.from(a.copy(r.Fragment.empty))),p?0:1,f?0:1),p?0:1)),t(i.scrollIntoView()),!0}(t,n,u)))}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RichTextWriter=t.RichTextReader=void 0;var u=s(n(1)),c=n(153),l=n(156),d=n(53),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return u.default.createElement(c.ProseMirrorReader,o({schema:d.completeSchema},this.props))},t}(u.Component);t.RichTextReader=p;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.focus=function(){this.refs.editor.focus()},t.prototype.onChangeQuery=function(e,t){return this.refs.editor.onChangeQuery(e,t)},t.prototype.render=function(){return u.default.createElement(l.ProseMirrorWriter,o({schema:d.completeSchema,uploadFile:this.props.uploadFile},this.props,{ref:"editor"}))},t}(u.Component);t.RichTextWriter=f},,,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageView=void 0;var r=function(){function e(e,t,n){var r=document.createElement("span");r.style.position="relative",r.style.width=e.attrs.width,r.style.display="inline-block",r.style.lineHeight="0";var o=document.createElement("img");o.setAttribute("src",e.attrs.src),o.style.width="100%";var i=document.createElement("span");i.style.position="absolute",i.style.bottom="-5px",i.style.right="-5px",i.style.width="10px",i.style.height="10px",i.style.border="3px solid black",i.style.borderTop="none",i.style.borderLeft="none",i.style.display="none",i.style.cursor="nwse-resize",i.onmousedown=function(o){o.preventDefault();var i=o.pageX,a=parseFloat(getComputedStyle(r).fontSize),s=parseFloat(e.attrs.width.match(/(.+)em/)[1]),u=function(e){var t=(e.pageX-i)/a;r.style.width=s+t+"em"};document.addEventListener("mousemove",u),document.addEventListener("mouseup",(function o(i){i.preventDefault(),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",o);var a=t.state.tr.setNodeMarkup(n(),null,{src:e.attrs.src,width:r.style.width}).setSelection(t.state.selection);t.dispatch(a)}))},r.appendChild(i),r.appendChild(o),this.dom=r,this.img=o,this.handle=i}return e.prototype.selectNode=function(){this.img.classList.add("ProseMirror-selectednode"),this.handle.style.display=""},e.prototype.deselectNode=function(){this.img.classList.remove("ProseMirror-selectednode"),this.handle.style.display="none"},e}();t.ImageView=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(3),i=n(42),a=n(40),s=n(10),u=function(e,t){return void 0===e&&(e=[]),e.some((function(e){return e===t}))},c=function(e,t,n,r,a,c){var l=r.index(r.depth-2),d=r.node(r.depth-2);if(t){if(0===l){var p=r,f=r.blockRange(p,(function(e){return e.childCount&&u(a,e.firstChild.type)})),h=f.end,m=f.$to.end(f.depth);h<m&&(n.step(new s.ReplaceAroundStep(h-1,m,h,m,new o.Slice(o.Fragment.from(a[0].create(null,f.parent.copy())),1,0),1,!0)),f=new o.NodeRange(n.doc.resolve(f.$from.pos),n.doc.resolve(m),f.depth));var g=s.liftTarget(f);return!!g&&(t(n=(n=(n=(n=n.lift(f,g)).join(n.mapping.map(r.pos-2))).join(n.mapping.map(r.pos-2))).scrollIntoView()),!0)}var v=d.child(l-1);return u(c,v.lastChild.type)?(i.sinkListItem(d.child(l).type)(e,t),!0):(t(n=(n=n.join(r.pos-2)).join(n.mapping.map(r.pos-2))),!0)}return!1};function l(e,t){return function(n,r){var o=n.selection.$cursor;if(!o)return!1;var i=0===o.parentOffset,a=u(e,o.node(-1).type),s=0===o.index(-1);if(!i||!a||!s)return!1;var l=function(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}(o);return(!u(t,l.nodeBefore.type)||l.parent===o.node(-1))&&c(n,r,n.tr,o,e,t)}}function d(e,t){return function(n,o){var i=n.selection.$cursor;if(!i)return!1;var a=i.parentOffset===i.parent.nodeSize-2,s=u(e,i.node(-1).type);if(!a||!s)return!1;var l=function(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}(i);if(!l)return!1;var d=u(e,l.nodeAfter.type),p=u(t,l.nodeAfter.type);if(!d&&(!p||l.parent!==i.node(-1)))return!1;var f=p?3:2,h=n.doc.resolve(l.pos+f),m=n.tr;return m=m.setSelection(r.Selection.near(h)),n=n.apply(m),c(n,o,m,h,e,t)}}t.buildKeyMap=function(e,t){var n=l(e,t),r=d(e,t);return a.keymap({Backspace:n,Delete:r})},t.eagerJoinBackward=l,t.eagerJoinForward=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeBlockView=void 0,n(258);var r=n(11),o=function(){function e(e,t,n){var o=document.createElement("pre");o.classList.add("CommonUI-delayedIconContainer");var i=document.createElement("code"),a=document.createElement("div");a.classList.add("CodeBlockView-handle"),a.classList.add("CommonUI-delayedIconWrapper"),a.setAttribute("contenteditable","false"),a.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation(),r.copyToClipboard(t.state.doc.nodeAt(n()).textContent),a.innerHTML="<i class='mdi mdi-check'></i>",setTimeout((function(){a.innerHTML="<i class='mdi mdi-clipboard-text-outline'></i>"}),1e3)})),a.innerHTML="<i class='mdi mdi-clipboard-text-outline'></i>",o.append(a),o.append(i),this.dom=o,this.contentDOM=i,this.handle=a}return e.prototype.ignoreMutation=function(e){return e.target===this.handle},e}();t.CodeBlockView=o},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollPastEndPlugin=void 0;var r=n(5),o=n(54);t.ScrollPastEndPlugin=new r.Plugin({state:{init:function(e,t){var n=document.createElement("div");n.style.height="100%",n.style.width="100%",n.style.cursor="text";var r=t.doc.nodeSize-2,i=o.Decoration.widget(r,n,{});return o.DecorationSet.empty.add(t.doc,[i])},apply:function(e,t){return t.map(e.mapping,e.doc)}},props:{decorations:function(e){return this.getState(e)}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomParagraphView=void 0,n(261);var r=n(79),o=n(11),i=n(122),a=function(e,t,n){if("box"===e.attrs.type){var a=document.createElement("div");a.classList.add("CustomParagraph-box-outer");var s=document.createElement("p"),u=document.createElement("i");u.classList.add("mdi"),u.classList.add("mdi-"+r.itemIconNames["box"+o.capitalize(e.attrs.backgroundColor)]),u.classList.add("CustomParagraph-box-icon"),i.extractClasses(e).forEach((function(e){return a.classList.add(e)})),a.append(u),a.append(s),this.dom=a,this.contentDOM=s}};t.CustomParagraphView=a},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=void 0;var s=a(n(1)),u=n(79),c=n(124),l={heading2:"ProseMirrorToolSet-action-button-heading-2",heading3:"ProseMirrorToolSet-action-button-heading-3",stickyBlue:"ProseMirrorToolSet-action-button-color-blue",stickyRed:"ProseMirrorToolSet-action-button-color-red",stickyYellow:"ProseMirrorToolSet-action-button-color-yellow",boxBlue:"ProseMirrorToolSet-action-button-color-blue",boxRed:"ProseMirrorToolSet-action-button-color-red",boxYellow:"ProseMirrorToolSet-action-button-color-yellow",colorBlue:"ProseMirrorToolSet-action-button-color-blue",colorRed:"ProseMirrorToolSet-action-button-color-red",colorYellow:"ProseMirrorToolSet-action-button-color-yellow",backgroundColorBlue:"ProseMirrorToolSet-action-button-color-blue",backgroundColorRed:"ProseMirrorToolSet-action-button-color-red",backgroundColorYellow:"ProseMirrorToolSet-action-button-color-yellow"},d=[["bold","italic","code","codeBlock"],["heading1","heading2","heading3","fontSizeSmall","fontSizeBig"],["bulletList","orderedList","todoList","liftItem","sinkItem","joinItem"],["colorBlue","colorRed","colorYellow","backgroundColorBlue","backgroundColorRed","backgroundColorYellow"],["quote","stickyBlue","stickyRed","stickyYellow","boxBlue","boxRed","boxYellow"],["textAlignmentCenter","textAlignmentRight","itemAlignmentCenter"]].map((function(e){return e.map((function(e){return{itemIdentifier:u.itemIdentifiers[e],itemIconName:u.itemIconNames[e],additionalClasses:l[e]}}))})),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.default.createElement(c.ProseMirrorToolSet,{iconConfigs:d,toolbarEvents:this.props.toolbarEvents})},t}(s.Component);t.Toolbar=p},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TodoListPlugin=void 0;var i=o(n(1)),a=n(53),s=n(80),u=n(266),c=n(277),l=n(278),d=n(87),p=n(125),f=n(161),h=n(58),m="todo";t.TodoListPlugin={name:"TodoList Plugin",language:m,icon:"mdi-checkbox-marked-circle-outline",editorClass:function(){return"SnippetEditor-todo-mode"},snippetListClass:function(){return"SnippetList-entry-type-todo"},testExtension:function(e){return"todo"===e?m:null},testLanguage:function(e){return e===m},toPlaintext:function(e){return a.getTextFromDoc(a.initDoc(s.schema,e))},fromPlaintext:function(e){return a.docJsonFromString(s.schema,e)},bootstrap:function(e){return a.docJsonFromString(s.schema,e)},produceFileMetaData:function(e){return p.produceFileMetaData(e.id,e.document.name,a.getTextFromDoc(a.initDoc(s.schema,e.document.content)),m)},extractSubSnippets:function(){return[]},renderSubSnippet:function(){return i.default.createElement("span",null,"n/a")},serialize:function(e){return h.serializeJson(e)},deserialize:function(e){return h.deserializeJson(e)},init:function(e){return a.initDoc(s.schema,e)},reader:c.TodoListReader,writer:u.TodoListWriter,toolbar:l.Toolbar,listEntry:function(e){return i.default.createElement(d.DefaultListEntry,r({},e),i.default.createElement(c.TodoListReader,{content:e.snippetListEntry.snippet.content,fileMeta:e.snippetListEntry.metaData,trim:!0}))},createSnippetConfig:{viaInput:null,viaButton:{label:"Todos",bootstrap:function(){return f.makeDocJsonFromTodos([{text:""}])}}}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TodoListWriter=void 0;var s=a(n(1)),u=n(158),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onChange=function(e){this.props.onChange&&this.props.onChange(e)},t.prototype.onBlur=function(e){this.props.onBlur&&this.props.onBlur(e)},t.prototype.onFocus=function(e){this.props.onFocus&&this.props.onFocus(e)},t.prototype.onSuggestPersist=function(e){this.props.onSuggestPersist&&this.props.onSuggestPersist(e)},t.prototype.focus=function(){this.refs.editor.setFocus()},t.prototype.onChangeQuery=function(e,t){return this.refs.editor.onChangeQuery(e,t)},t.prototype.render=function(){return s.default.createElement("div",{className:"TodoList-wrapper"},s.default.createElement(u.TodoList,{content:this.props.content,language:this.props.language,onChange:this.onChange.bind(this),onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),onSuggestPersist:this.onSuggestPersist.bind(this),isEditing:!0,onClick:this.props.onClick,toolbarEvents:this.props.toolbarEvents,onDragStart:this.props.onDragStart,onDragStop:this.props.onDragStop,ref:"editor",onEscape:this.props.onEscape,onLeaveUpwards:this.props.onLeaveUpwards}))},t}(s.Component);t.TodoListWriter=c},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckBox=void 0;var s=a(n(1)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.default.createElement("button",{className:"TodoList-checkbox",onClick:this.props.onClick,disabled:this.props.disabled,tabIndex:0},s.default.createElement("i",{className:"mdi mdi-crop-square TodoList-checkbox-open-indicator"}),s.default.createElement("i",{className:"mdi mdi-check TodoList-checkbox-done-indicator"}))},t}(s.Component);t.CheckBox=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ProseMirrorField=void 0;var s=a(n(1)),u=n(54),c=n(5),l=n(40),d=n(159),p=n(89),f=n(160),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.componentDidUpdate=function(e){if(e.todo!==this.props.todo){var t=f.buildDiffTr(this.props.todo,this.editorView.state,this.editorView.state.tr);t&&this.editorView.dispatch(t)}},t.prototype.componentDidMount=function(){var e=this,t=function(t){return e.editorView.state.selection.$cursor&&e.editorView.state.selection.$cursor.pos===t},n=this.props.todo,r=c.EditorState.create({doc:n,plugins:[d.buildCustomInputRules(),this.props.historyPlugin,l.keymap({Enter:function(){return e.props.onEnter&&e.props.onEnter()},Escape:function(){return e.props.onEscape&&e.props.onEscape()},Backspace:function(){return e.props.onBackspace&&e.props.onBackspace()},ArrowDown:function(){t(e.editorView.state.doc.nodeSize-2)&&e.props.onArrow&&e.props.onArrow("down")},ArrowUp:function(){t(0)&&e.props.onArrow&&e.props.onArrow("up")},"Mod-b":function(){return e.props.onToggleBold&&e.props.onToggleBold()},"Mod-i":function(){return e.props.onToggleItalic&&e.props.onToggleItalic()},"Mod-Enter":function(){return e.props.onInsertHardBreak&&e.props.onInsertHardBreak()}}),p.HighlightPlugin]});this.editorView=new u.EditorView(this.input,{state:r,dispatchTransaction:function(t){var n=e.editorView.state.applyTransaction(t),r=n.state,o=n.transactions;e.editorView.updateState(r),t.getMeta("fromOutside")||e.props.onInnerTransaction(o,r.selection)},handleDOMEvents:{blur:function(t,n){e.props.onBlur&&e.props.onBlur(n)},focus:function(t,n){e.props.onFocus&&e.props.onFocus(n,t.state.selection)}},handleKeyDown:function(e,t){if("Backspace"===t.key){var n=e.state.selection.$cursor;n&&0===n.parentOffset&&t.preventDefault()}}}),!this.props.readonly&&this.props.shouldFocus&&this.focus(this.props.cursorPosition)},t.prototype.componentWillUnmount=function(){this.editorView.destroy()},t.prototype.focus=function(e){var t=this;this.editorView.dispatch(this.editorView.state.tr.setSelection(c.Selection.near(this.editorView.state.doc.resolve(e)))),setTimeout((function(){t.editorView.focus()}))},t.prototype.findOccurences=function(e){return p.findOccurences(this.editorView.state.doc,e)},t.prototype.highlightOccurences=function(e){p.highlightOccurences(this.editorView,e)},t.prototype.getDimensions=function(){return this.input.getBoundingClientRect()},t.prototype.coordsAtPos=function(e){return this.editorView.coordsAtPos(e)},t.prototype.render=function(){var e=this;return this.props.readonly?s.default.createElement("div",{className:"TodoList-entry-input-field",ref:function(t){return e.input=t},spellCheck:!1}):s.default.createElement("div",{id:"todoListEntry-"+this.props.index,className:"TodoList-entry-input-field",ref:function(t){return e.input=t}})},t}(s.Component);t.ProseMirrorField=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.insertHardBreak=t.toggleItalic=t.toggleBold=void 0;var r=n(15),o=n(80);t.toggleBold=r.toggleMark(o.schema.marks.strong),t.toggleItalic=r.toggleMark(o.schema.marks.em);t.insertHardBreak=function(e,t){return t(e.tr.replaceSelectionWith(o.schema.nodes.hard_break.create()).scrollIntoView()),!0}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveList=void 0;var u=s(n(1));n(272);var c=n(273);function l(e){return e.collapsible}function d(e){return e.hidden}function p(e){return e.reduce((function(e,t){return e+t.items.length}),0)+e.length}function f(e,t){return function(t){for(var n=0,r=0,o=0,i=0;i<e.length;i++){if(d(e[i])||(n+=e[i].items.length),l(e[i])&&(o+=1),t<n+o)return t-o+r;d(e[i])&&(r+=e[i].items.length)}}}var h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={dragState:c.init(),subLists:t.subLists},n.entryRefs=[],n.onDragHandleMouseUp=n.onDragHandleMouseUp.bind(n),n.onDragHandleTouchEnd=n.onDragHandleTouchEnd.bind(n),n.onDragStart=n.onDragStart.bind(n),n.onDragStop=n.onDragStop.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onTouchMove=n.onTouchMove.bind(n),n}return r(t,e),t.prototype.componentDidUpdate=function(e){var t,n=this;if(!e.doAnimation&&this.props.doAnimation){var r=p(this.props.subLists)-p(e.subLists)===-1,o=(t=r?e.subLists:this.props.subLists,this.state,function(e){for(var n=e.index,r=e.listName,o=0,i=0,a=0,s=0;s<t.length;s++){if(d(t[s])||(o+=t[s].items.length),l(t[s])&&(a+=1),n<=o&&r===t[s].name)return n+a-i;d(t[s])&&(i+=t[s].items.length)}return o+t.length}),i=o(this.props.doAnimation.from),a=o(this.props.doAnimation.to),s=c.prepareDragStateForAnimation(this.entryRefs,i,a,p(this.state.subLists));this.setState({dragState:s,subLists:this.props.subLists})}else e.doAnimation&&!this.props.doAnimation?setTimeout((function(){n.setState({dragState:c.init(),subLists:n.props.subLists})}),50):e.resetDragState||!0!==this.props.resetDragState?e.subLists!==this.props.subLists&&this.setState({subLists:this.props.subLists}):this.setState({dragState:c.init(),subLists:this.props.subLists})},t.prototype.onDragStop=function(){var e;if(null!==this.state.dragState.currentlyDraggedTodoNew){var t=f(this.state.subLists,this.state),n=this.state.dragState.currentlyDraggedTodo-this.state.dragState.currentlyDraggedTodoNew,r=function(e,t,n,r){for(var o=0,i=e-t,a=i>0,s=i<0,u=0;u<n.length;u++)if(l(n[u])&&(o+=1),d(n[u])||(o+=n[u].items.length),t===o){if(a&&l(n[u+1]))return n[u].name;if(s)return n[u+1].name}return!1}(this.state.dragState.currentlyDraggedTodo,this.state.dragState.currentlyDraggedTodoNew,this.state.subLists,this.state),o=n>0&&r?1:0,i=t(this.state.dragState.currentlyDraggedTodo),a=(null!==(e=t(this.state.dragState.currentlyDraggedTodoNew))&&void 0!==e?e:0)+o,s=void 0;s=r?{from:i,to:a,newList:r}:{from:i,to:a},this.props.onDrag&&this.props.onDrag(s)}else this.setState({dragState:c.init()});this.props.onDragStop&&this.props.onDragStop()},t.prototype.onDragHandleMouseUp=function(){document.removeEventListener("mouseup",this.onDragHandleMouseUp),document.removeEventListener("mousemove",this.onMouseMove),this.onDragStop()},t.prototype.onDragHandleTouchEnd=function(){document.removeEventListener("touchend",this.onDragHandleTouchEnd),document.removeEventListener("touchmove",this.onTouchMove),this.onDragStop()},t.prototype.onDrag=function(e){var t=c.onDrag(e,p(this.state.subLists),this.state.dragState);this.setState({dragState:t})},t.prototype.onMouseMove=function(e){e.preventDefault(),this.onDrag(e.clientY)},t.prototype.onTouchMove=function(e){var t=e.touches[0].clientY;this.onDrag(t)},t.prototype.onDragStart=function(e,t){var n=c.getEntryHeights(this.entryRefs);this.setState({dragState:o(o({},this.state.dragState),c.onStart(e,n,t))}),this.props.onDragStart&&this.props.onDragStart()},t.prototype.onDragHandleMouseDown=function(e,t){this.onDragStart(e,t.clientY),document.addEventListener("mouseup",this.onDragHandleMouseUp),document.addEventListener("mousemove",this.onMouseMove)},t.prototype.onDragHandleTouchStart=function(e,t){var n=t.touches[0].clientY;this.onDragStart(e,n),document.addEventListener("touchend",this.onDragHandleTouchEnd),document.addEventListener("touchmove",this.onTouchMove)},t.prototype.renderDragHandle=function(e){return u.default.createElement("i",{className:"TodoList-drag-handle mdi mdi-drag",onMouseDown:this.onDragHandleMouseDown.bind(this,e),onTouchStart:this.onDragHandleTouchStart.bind(this,e)})},t.prototype.maybeRenderDragPosition=function(e){return{top:c.getVerticalOffset(e,this.state.dragState)}},t.prototype.renderSubList=function(e,t,n,r,o,i){var a=this;return t.map((function(s,c){var l=c+n,d=s.attrs.index,p=l+"-"+d+"-"+t.length+"-"+r,f=["InteractiveList-item"];return i&&f.push("InteractiveList-item-hidden"),a.state.dragState.currentlyDraggedTodo===l&&f.push("InteractiveList-dragged-item"),u.default.createElement("div",{key:p,className:f.join(" "),style:a.maybeRenderDragPosition(l),ref:function(e){return!i&&(a.entryRefs[l]=e)}},a.renderDragHandle(l),a.props.renderItem(s,o(l),e,a.state.dragState))}))},t.prototype.onSpacerClick=function(e){this.props.onSpacerClick&&this.props.onSpacerClick(e)},t.prototype.renderSpacer=function(e,t,n){var r=this,o=["InteractiveList-spacer"];return n&&o.push("InteractiveList-spacer-hidden"),u.default.createElement("div",{onClick:this.onSpacerClick.bind(this,t),key:"spacer-"+e+"-"+t,style:this.maybeRenderDragPosition(e),className:o.join(" "),ref:function(t){return r.entryRefs[e]=t}},t,u.default.createElement("i",{className:"mdi mdi-chevron-down"}))},t.prototype.render=function(){var e=this,t=p(this.state.subLists),n=f(this.state.subLists,this.state),r=0,o=[];this.state.subLists.forEach((function(i){var a=i.name,s=i.items,u=i.hidden;i.collapsible&&(o=o.concat([e.renderSpacer(0+r,a,u)]),r+=1),o=o.concat(e.renderSubList(a,s,r,t,n,u)),u||(r+=s.length)}));var i=[];return this.state.dragState.isDragging&&i.push("InteractiveList-dragging"),u.default.createElement("div",{className:i.join(" ")},o)},t}(u.Component);t.InteractiveList=h},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(){return{isDragging:!1,currentlyDraggedTodo:null,currentlyDraggedTodoNew:null,initialDragPositionY:null,currentDragPositionY:null,entryHeights:null,entryBottomPositions:null}}function i(e,t,n){var r=t.reduce((function(e,t){var n=e[e.length-1]||0;return e.push(n+t),e}),[]);return{isDragging:!0,currentlyDraggedTodo:e,initialDragPositionY:n,currentDragPositionY:n,entryHeights:t,entryBottomPositions:r}}function a(e,t,n){var o=n.currentlyDraggedTodo,i=n.initialDragPositionY,a=n.entryHeights,s=n.entryBottomPositions,u=e-i,c=null;if(u>0)for(var l=u+s[o],d=o+1;d<a.length;d++)l>=s[d]&&(c=d);else if(u<0){var p=u+s[o]-a[o];for(d=o-1;d>=0;d--)p<=s[d]-a[d]&&(c=d)}return r(r({},n),{currentDragPositionY:e,currentlyDraggedTodoNew:c})}function s(e){return e.filter((function(e){return null!==e})).map((function(e){return e.getBoundingClientRect().height}))}Object.defineProperty(t,"__esModule",{value:!0}),t.prepareDragStateForAnimation=t.getEntryHeights=t.getVerticalOffset=t.onDrag=t.onStop=t.onStart=t.init=void 0,t.init=o,t.onStart=i,t.onStop=function(e,t){return{isDragging:!1,currentlyDraggedTodo:null,currentlyDraggedTodoNew:null,initialDragPositionY:null,currentDragPositionY:null,entryHeights:null,entryBottomPositions:null}},t.onDrag=a,t.getVerticalOffset=function(e,t){if(t.currentlyDraggedTodo===e)return t.currentDragPositionY-t.initialDragPositionY;if(t.isDragging&&null!==t.currentlyDraggedTodoNew){if(t.currentlyDraggedTodo<t.currentlyDraggedTodoNew&&t.currentlyDraggedTodo<e&&e<=t.currentlyDraggedTodoNew)return-t.entryHeights[t.currentlyDraggedTodo];if(t.currentlyDraggedTodo>t.currentlyDraggedTodoNew&&t.currentlyDraggedTodo>e&&e>=t.currentlyDraggedTodoNew)return t.entryHeights[t.currentlyDraggedTodo]}return 0},t.getEntryHeights=s,t.prepareDragStateForAnimation=function(e,t,n,r){var o,u,c=s(e),l=i(n,c=function(e,t,n){var r=e.map((function(e){return e})),o=r[t];return r.splice(t,1),r.splice(n,0,o),r}(c,t,n),0);return t<n?(o=l.entryBottomPositions[n]-l.entryHeights[n],u=l.entryBottomPositions[t]-l.entryHeights[t]):(o=l.entryBottomPositions[n],u=l.entryBottomPositions[t]),l.initialDragPositionY=o,a(u,c.length,l)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AllDoneHeader=void 0;var s=a(n(1));n(275);var u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hasExpanded:!1},n}return r(t,e),t.prototype.componentDidMount=function(){var e=this;setTimeout((function(){return e.setState({hasExpanded:!0})}))},t.prototype.render=function(){var e=["AllDoneHeader"];return this.state.hasExpanded&&e.push("AllDoneHeader-expanded"),s.default.createElement("div",{className:e.join(" ")},s.default.createElement("div",{className:"InteractiveList-item"},s.default.createElement("i",{className:"TodoList-drag-handle mdi mdi-drag"}),s.default.createElement("span",{className:"TodoList-entry TodoList-entry-open"},s.default.createElement("button",{className:"TodoList-checkbox"},s.default.createElement("i",{className:"mdi mdi-crop-square TodoList-checkbox-open-indicator"})),s.default.createElement("div",{className:"TodoList-entry-input-field",onClick:this.props.onClick},"Add todo ..."),s.default.createElement("span",{className:"TodoList-entry-delete-button"},s.default.createElement("span",{className:"Buttons-basic-button"},s.default.createElement("i",{className:"mdi mdi-close Buttons-15"}))))))},t}(s.Component);t.AllDoneHeader=u},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeProseMirrorStateFromSerializedDocJson=t.makeProseMirrorStateFromTodos=t.makeProseMirrorStateFromDoc=t.buildCustomHistoryPlugin=void 0;var r=n(36),o=n(40),i=n(5),a=n(88),s=n(80),u=n(53),c=n(161);function l(e){var t=r.history();return{proseMirrorState:i.EditorState.create({doc:e,plugins:[t,a.makeAnchorPlugin(s.schema,t)]}),historyPluginKey:t.key}}t.buildCustomHistoryPlugin=function(e){return o.keymap({"Mod-z":function(){return r.undo(e.state.proseMirrorState,e.dispatch)},"Mod-y":function(){return r.redo(e.state.proseMirrorState,e.dispatch)}})},t.makeProseMirrorStateFromDoc=l,t.makeProseMirrorStateFromTodos=function(e){return l(u.initDoc(s.schema,c.makeDocJsonFromTodos(e)))},t.makeProseMirrorStateFromSerializedDocJson=function(e){return l(u.initDoc(s.schema,e))}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TodoListReader=void 0;var u=s(n(1)),c=n(158),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return this.props.trim?u.default.createElement("div",null,this.props.fileMeta.trimmedBody):u.default.createElement("div",{className:"TodoList-wrapper"},u.default.createElement(c.TodoList,o({todos:this.props.content.todos,isEditing:!1},this.props)))},t}(u.Component);t.TodoListReader=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=void 0;var s=a(n(1)),u=n(79),c=n(124),l=[["bold","italic","code"]].map((function(e){return e.map((function(e){return{itemIdentifier:u.itemIdentifiers[e],itemIconName:u.itemIconNames[e]}}))})),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.default.createElement(c.ProseMirrorToolSet,{iconConfigs:l,toolbarEvents:this.props.toolbarEvents})},t}(s.Component);t.Toolbar=d},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostItPlugin=void 0;var i=o(n(1)),a=n(280),s=n(282),u=n(87),c=n(162),l=n(53),d=n(125),p=n(58),f="sticky";function h(e){return{color:"blue",doc:l.docJsonFromString(c.postItSchema,e)}}t.PostItPlugin={name:"PostIt Plugin",language:f,icon:"mdi-square",editorClass:function(e){return"SnippetEditor-postit-mode PostIt-color-"+e.content.color},snippetListClass:function(e){return"SnippetList-entry-type-postit PostIt-color-"+e.content.color},testExtension:function(e){return"sticky"===e?f:null},testLanguage:function(e){return e===f},toPlaintext:function(e){return l.getTextFromDoc(l.initDoc(c.postItSchema,e.doc))},fromPlaintext:function(e){return h(e)},bootstrap:h,produceFileMetaData:function(e){return d.produceFileMetaData(e.id,e.document.name,l.getTextFromDoc(l.initDoc(c.postItSchema,e.document.content.doc)),f)},extractSubSnippets:function(){return[]},renderSubSnippet:function(){return i.default.createElement("span",null,"n/a")},serialize:function(e){return p.serializeJson(e)},deserialize:function(e){return p.deserializeJson(e)},init:function(e){return r(r({},e),{doc:l.initDoc(c.postItSchema,e.doc)})},reader:a.PostItReader,writer:a.PostItWriter,toolbar:s.Toolbar,listEntry:function(e){return i.default.createElement(u.DefaultListEntry,r({},e),i.default.createElement(a.PostItReader,{content:e.snippetListEntry.snippet.content,fileMeta:e.snippetListEntry.metaData,trim:!0}))},createSnippetConfig:{viaInput:null,viaButton:{label:"Sticky",bootstrap:function(){return h("")}}}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PostItWriter=t.PostItReader=void 0;var u=s(n(1)),c=n(156),l=n(153);n(281);var d=n(162),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return u.default.createElement(l.ProseMirrorReader,o({schema:d.postItSchema},this.props,{content:this.props.content.doc}))},t}(u.Component);t.PostItReader=p;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.setColor=function(e){this.props.onSuggestPersist({color:e})},t.prototype.focus=function(){this.refs.editor.focus()},t.prototype.onChangeQuery=function(e,t){return this.refs.editor.onChangeQuery(e,t)},t.prototype.onBlur=function(e){this.props.onBlur({doc:e})},t.prototype.onChange=function(e){this.props.onChange({doc:e})},t.prototype.onSuggestPersist=function(e){this.props.onSuggestPersist({doc:e})},t.prototype.render=function(){var e=this,t=d.POSTIT_COLORS.map((function(t){return u.default.createElement("span",{className:"PostIt-color-button PostIt-color-"+t+" "+(e.props.content.color===t?"PostIt-color-button-selected":"")+" ",key:t,onClick:e.setColor.bind(e,t)})}));return u.default.createElement(u.Fragment,null,u.default.createElement("div",{id:"ProseMirrorWriter-toolbar-container"}),u.default.createElement("div",{className:"PostIt-editor-wrapper"},u.default.createElement(c.ProseMirrorWriter,o({ref:"editor",schema:d.postItSchema},this.props,{content:this.props.content.doc,onBlur:this.onBlur.bind(this),onChange:this.onChange.bind(this),onSuggestPersist:this.onSuggestPersist.bind(this)}))),u.default.createElement("div",null,t))},t}(u.Component);t.PostItWriter=f},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=void 0;var s=a(n(1)),u=n(79),c=n(124),l=[["bold","italic"]].map((function(e){return e.map((function(e){return{itemIdentifier:u.itemIdentifiers[e],itemIconName:u.itemIconNames[e]}}))})),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return s.default.createElement(c.ProseMirrorToolSet,{iconConfigs:l,toolbarEvents:this.props.toolbarEvents})},t}(s.Component);t.Toolbar=d},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.changeOrigin=void 0;var o=n(135),i=n(38),a=n(60);t.changeOrigin=function(e,t,n,s){var u=i.get(e,t);return t.startsWith(a.LOCAL_ID_PREFIX)?e=i.save(e,t,u.document,{updatedAt:new Date,config:{permanent:r(r({},u.permanent),{origin:s})}}):(e=i.save(e,n,u.document,{updatedAt:new Date,config:{permanent:r(r({},u.permanent),{origin:s})}}),e=i.save(e,t,u.document,{updatedAt:new Date,config:{permanent:r(r({},u.permanent),{obsolete:{state:!0,reason:"originSwitch",replacedBy:n}})}}),e=o.setUpIdMapping(e,u.id,n)),[e,u]}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.useAutoSyncedAppState=t.doDownloadFactory=t.isSynced=void 0;var i=n(133),a=n(285),s=n(38),u=n(9),c=n(1),l=n(116),d=n(11),p=n(286),f=n(288),h=n(289),m=n(9),g=n(290),v=n(293),b=n(294);function y(e,t,n){return r(this,void 0,void 0,(function(){var r,a,u;return o(this,(function(o){switch(o.label){case 0:return s.getAllDirties(e.store.store,h.isDocumentType("tag")).filter(l.isTag).length>0?[4,s.syncSomeAndAwaitAll(e.store,t,i.readId,h.isDocumentType("tag"))]:[3,2];case 1:return r=o.sent(),a=d.getFulfilled(r),u=d.getRejected(r),n({type:"updateAfterSync",results:a,syncErrors:u}),[2,{actions:[],errors:u}];case 2:return s.getAllDirties(e.store.store,h.isDocumentType("snippet")).length>0?[4,s.syncSomeAndAwaitAll(e.store,t,i.readId,h.isDocumentType("snippet"))]:[3,4];case 3:return r=o.sent(),a=d.getFulfilled(r),u=d.getRejected(r),n({type:"updateAfterSync",results:a,syncErrors:u}),[2,{actions:[],errors:u}];case 4:return[2,{actions:[],errors:[]}]}}))}))}function O(e,t){var n=this,i=e[0],a=e[1],s=(0,t[0])(y,3333)[0];return function(e,t){return r(n,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return t?[2,new Promise((function(t){return t({serviceCall:y(e,a,i)})}))]:[3,1];case 1:return n.trys.push([1,3,,4]),[4,s(e,a,i)];case 2:return[2,{serviceCall:n.sent().result}];case 3:throw n.sent();case 4:return[2]}}))}))}}function S(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,s.initSyncer(e,i.getId,i.getEntity,i.getPermanent,i.getUpdatedAt)];case 1:return n=r.sent(),t({type:"mergeDocumentStore",store:n.store}),[2,{actions:[],errors:n.errors}]}}))}))}function _(e,t){var n=this,i=e[0],a=e[1],s=(0,t[0])(S,2222)[0];return function(){return r(n,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,s(a,i)];case 1:return[2,{serviceCall:e.sent().result}];case 2:throw e.sent();case 3:return[2]}}))}))}}t.isSynced=function(e){return 0===s.getAllDirties(e.store.store,(function(){return!0})).length},t.doDownloadFactory=_;t.useAutoSyncedAppState=function(e,t,n,r){void 0===r&&(r=m.debounce);var o=c.useReducer(i.reduce,i.initialState),s=o[0],l=o[1],d=c.useMemo((function(){return g.makeMultiOriginPusher(t.pusherMappings.documents)}),[t.pusherMappings.documents]),h=c.useMemo((function(){return v.makeMultiOriginFetcher(t.fetcherMappings.documents)}),[t.fetcherMappings.documents]),y=u.useFactory(O,[l,d],[r]),S=u.useFactory(_,[l,h],[r]),w=a.useSyncManager(y,S),j=w[0],E=w[1];return f.useUploadRequest(s,t,e,E),b.useDownloadRequest(t,e,E),p.useCacheManager(s.store,n),p.useInitialLoadFromCache(l,n),[s,l,E,j]}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.useSyncManager=t.reducer=void 0;var a=n(9),s=n(1);function u(e){return!1!==e.doPostUpload?[{type:"doUpload",immediate:!1,wrappedState:e.doPostUpload.wrappedState}]:!1!==e.doPostDownload?[{type:"doDownload"}]:[]}function c(e){return!1!==e.doPostUpload?{doPostUpload:!1}:!1!==e.doPostDownload?{doPostDownload:!1}:{}}function l(e,t){switch(t.type){case"notifyUploadRequested":return[r(r({},e),{state:{name:"uploadRequested"}}),[]];case"notifyUploadStart":return[r(r({},e),{state:{name:"uploadOngoing"}}),[]];case"notifyUploadDone":return[r(r(r(r({},e),{state:{name:"idle"}}),c(e)),{pushErrors:t.errors}),u(e)];case"notifyDownloadRequested":return[r(r({},e),{state:{name:"downloadRequested"}}),[]];case"notifyDownloadStart":return[r(r({},e),{state:{name:"downloadOngoing"}}),[]];case"notifyDownloadDone":return[r(r(r(r({},e),{state:{name:"idle"}}),c(e)),{pullErrors:t.errors}),u(e)];case"requestUpload":switch(e.state.name){case"downloadRequested":case"uploadOngoing":case"downloadOngoing":return[r(r({},e),{doPostUpload:{wrappedState:t.wrappedState}}),[]];case"uploadRequested":case"idle":return[r(r({},e),{state:{name:"uploadRequested"}}),[{type:"doUpload",wrappedState:t.wrappedState}]]}case"requestDownload":switch(e.state.name){case"uploadOngoing":case"downloadOngoing":case"uploadRequested":return[r(r({},e),{doPostDownload:!0}),[]];case"downloadRequested":case"idle":return[e,[{type:"doDownload"}]]}}}function d(e,t){var n=this,r=e[0],a=e[1];return function(e,t,s){return o(n,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:switch(t.type){case"doUpload":return[3,1];case"doDownload":return[3,5]}return[3,9];case 1:return n.trys.push([1,4,,5]),s({type:"notifyUploadRequested"}),[4,r(t.wrappedState,t.immediate)];case 2:return e=n.sent().serviceCall,s({type:"notifyUploadStart"}),[4,e];case 3:return[2,[{type:"notifyUploadDone",errors:n.sent().errors}]];case 4:return n.sent(),[2,void 0];case 5:return n.trys.push([5,8,,9]),s({type:"notifyDownloadRequested"}),[4,a()];case 6:return e=n.sent().serviceCall,s({type:"notifyDownloadStart"}),[4,e];case 7:return[2,[{type:"notifyDownloadDone",errors:n.sent().errors}]];case 8:return n.sent(),[2,void 0];case 9:return[2]}}))}))}}t.reducer=l,t.useSyncManager=function(e,t){var n=a.useFactory(d,[e,t],[]),r=a.useReducerWithEffects(l,n,s.useMemo((function(){return{state:{name:"idle"},doPostUpload:!1,doPostDownload:!1,pushErrors:[],pullErrors:[]}}),[]));return[r[0],r[1]]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useCacheManager=t.useInitialLoadFromCache=void 0;var r=n(115),o=n(1),i=n(287),a=n(61),s=n(9);t.useInitialLoadFromCache=function(e,t){s.useOnce((function(){t.fetchFromCache().then((function(t){e({type:"mergeDocumentStore",store:{store:t.reduce((function(e,t){return t.dirty?r.saveDirty(e,t.id,t.document,{config:{permanent:t.permanent},updatedAt:new Date(t.updatedAt)}):r.saveSynced(e,t.id,t.document,{config:{permanent:t.permanent},updatedAt:new Date(t.updatedAt)})}),[]),idMapping:{}}})}))}),null!==t)},t.useCacheManager=function(e,t){var n=o.useState([]),r=n[0],s=n[1];o.useEffect((function(){if(null!==t){var n=function(e){return e.store.map((function(e){return{id:e.id,version:e.item.permanent.version,internalVersion:e.item.internalVersion}})).sort((function(e,t){return e.id.localeCompare(t.id)}))}(e),o=i.calculateDiff(n,r,(function(e,t){return e.id.localeCompare(t.id)}),(function(e,t){return e.version===t.version&&e.internalVersion===t.internalVersion})),u=o.missing,c=o.obsolete;u.forEach((function(n){var r=a.get(e.store,n.id);r&&t.pushToCache(r)})),c.forEach((function(e){t.deleteFromCache(e.id)})),s(n)}}),[e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateDiff=void 0,t.calculateDiff=function(e,t,n,r){var o=function e(t){var o=t.listA,i=t.listB,a=t.missing,s=t.obsolete;if(0===o.length)return{listA:[],listB:[],missing:a,obsolete:s.concat(i)};if(0===i.length)return{listA:[],listB:[],missing:a.concat(o),obsolete:s};var u=o[0],c=o.slice(1),l=i[0],d=i.slice(1),p=n(u,l);return 0===p?r(u,l)?e({listA:c,listB:d,missing:a,obsolete:s}):e({listA:c,listB:d,missing:a.concat(l),obsolete:s}):e(p>0?{listA:o,listB:d,missing:a,obsolete:s.concat(l)}:{listA:c,listB:i,missing:a.concat(u),obsolete:s})}({listA:e,listB:t,missing:[],obsolete:[]});return{missing:o.missing,obsolete:o.obsolete}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useUploadRequest=void 0;var r=n(1),o=n(38);function i(e){return o.getAllDirties(e.store.store,(function(){return!0})).length>0}t.useUploadRequest=function(e,t,n,o){r.useEffect((function(){!1===e.blockNextSync&&i(e)&&o({type:"requestUpload",wrappedState:e})}),[e.store]),r.useEffect((function(){i(e)&&o({type:"requestUpload",wrappedState:e})}),[t,n])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDocumentType=void 0;t.isDocumentType=function(e){return function(t){return t.permanent.documentType===e}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.makeMultiOriginPusher=void 0;var a=n(166);t.makeMultiOriginPusher=function(e){return function(t){return o(void 0,void 0,void 0,(function(){return i(this,(function(n){return[2,a.getActionByOrigin(e,t.permanent.origin)(t).then((function(e){return r(r(r({},e),{origin:t.permanent.origin}),e.backup?{backup:r(r({},e.backup),{origin:t.permanent.origin})}:{})}))]}))}))}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OriginError=void 0;var o=r(n(1));n(292);t.OriginError=function(e){return o.default.createElement("div",{className:"OriginError-outer"},o.default.createElement("strong",null,e.title),o.default.createElement("div",null,e.description))}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.makeMultiOriginFetcher=void 0;var s=n(11);t.makeMultiOriginFetcher=function(e){return function(){return o(void 0,void 0,void 0,(function(){var t,n,u,c;return i(this,(function(l){switch(l.label){case 0:return t=e.map((function(e){return o(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,e.action()];case 1:return[2,t.sent().results.map((function(t){return r(r({},t),{origin:e.origin})}))]}}))}))})),[4,s.allSettled(t)];case 1:return n=l.sent(),u=s.getFulfilled(n),c=s.getRejected(n),[2,{results:u.reduce((function(e,t){return a(e,t)}),[]),errors:c}]}}))}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDownloadRequest=void 0;var r=n(1);t.useDownloadRequest=function(e,t,n){r.useEffect((function(){n({type:"requestDownload"})}),[e,t])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useArchiveManager=void 0;var r=n(1),o=n(163),i=n(58);t.useArchiveManager=function(e,t){var n=i.ONE_WEEK;r.useEffect((function(){o.getIdsOfDeletableItems(e,n).length>0&&t({type:"markArchivedObsolete",timespanInMs:n})}),[e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDirtyState=void 0;var r=n(1),o=n(38);t.useDirtyState=function(e){var t=r.useState(!1),n=t[0],i=t[1];return r.useEffect((function(){i(o.getAllDirties(e.store,(function(){return!0})).length>0)}),[e]),n}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function a(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,e];case 1:return t=n.sent(),[2,new Promise((function(e,n){t.ok?e(t.json()):n(t)}))]}}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.makeHttp=void 0,t.makeHttp=function(e,t){var n=this;return{get:function(n){var o={headers:new Headers(r({"If-Modified-Since":"Thu, 25 Oct 2012 15:16:27 GMT"},t))};return a(fetch(""+e+n,o))},post:function(n,r){var o={method:"POST",body:JSON.stringify(r),headers:new Headers(t)};return a(fetch(""+e+n,o))},patch:function(n,r){var o={method:"PATCH",body:JSON.stringify(r),headers:new Headers(t)};return a(fetch(""+e+n,o))},del:function(r){return o(n,void 0,void 0,(function(){var n;return i(this,(function(o){switch(o.label){case 0:return n={method:"DELETE",headers:new Headers(t)},[4,fetch(""+e+r,n)];case 1:return o.sent(),[2,void 0]}}))}))}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleError=t.isGistOriginError=void 0;var o=r(n(1)),i=n(66);t.isGistOriginError=function(e){return"gist"===e.origin},t.handleError=function(e,t){return 401===e.status?i.compileError("gist",t?o.default.createElement("strong",null,"gist document ",t.id):o.default.createElement("strong",null,"gist"),"Please provide an Access Token.",{status:401,original:e}):404===e.status?i.compileError("gist",null,"Please provide a Master Gist ID.",{status:404,original:e}):i.compileError("gist",null,"Unknown error.",{status:"unexpected",original:e})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.GistOriginSettingsPage=void 0;var s=i(n(1)),u=n(11),c=n(90),l=n(168),d=n(167);n(300);t.GistOriginSettingsPage=function(e){var t=s.useContext(c.OriginReadynessContext),n=s.useState(!1),r=n[0],o=n[1],i=u.useObject("dispatchSettings"),p=u.useObject("settings"),f=u.getOriginSettings(p,"gist",d.gistOriginConfig.defaultConfig);return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"GistOriginSettingsPage-settings"},s.default.createElement("h2",null,"Token"),s.default.createElement("span",{className:"GistOriginSettingsPage-small-text"},"Create a personal access token in your github developer settings (use the gist scope) and paste it here:"),s.default.createElement("input",{className:a(["CommonUI-input CommonUI-input-with-border CommonUI-input-centered"],!1===t.ready&&t.reason===d.statusCodeToText[401]?["CommonUI-input-red"]:[]).join(" "),type:"password",value:f.token,onChange:function(e){return i({type:"setOriginSettings",origin:"gist",settings:{token:e.target.value}})}}),s.default.createElement("h2",null,"Master Gist Id"),s.default.createElement("span",{className:"GistOriginSettingsPage-small-text"},"Paste existing:"),s.default.createElement("input",{className:a(["CommonUI-input CommonUI-input-with-border CommonUI-input-centered"],!1===t.ready&&t.reason===d.statusCodeToText[404]?["CommonUI-input-red"]:[]).join(" "),value:f.masterGistId,onChange:function(e){return i({type:"setOriginSettings",origin:"gist",settings:{masterGistId:e.target.value}})}}),s.default.createElement("button",{disabled:r,className:"CommonUI-button-without-border",onClick:function(){o(!0),l.createMasterGist(f.token).then((function(e){return i({type:"setOriginSettings",origin:"gist",settings:{masterGistId:e.id}})})).catch((function(){return i({type:"setOriginSettings",origin:"gist",settings:{masterGistId:""}})})).finally((function(){o(!1)}))}},"or create one"),s.default.createElement("div",{className:"GistOriginSettingsPage-readyness"},!0===t.ready?"Success":!1===t.ready?t.reason:"Pending")))}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.makeCloudBackend=t.Cloud=void 0;var a=n(91),s=n(169),u=n(302),c=n(303),l=n(38),d=n(172),p=n(126),f=n(127),h=n(9),m=n(304);function g(e,t){return e.documentType===t}var v=function(e){return{id:e.id,version:e.version,updatedAt:new Date(e.updatedAt)}},b=function(e){if("tag"===e.documentType)return u.fromFetchTagDto;if("snippet"===e.documentType)return c.fromFetchSnippetDto;throw"snip-cloud: unable to process after fetch (invalid document type "+e.documentType+")"},y=function(e){return r(r({id:e.id},e.backup?{backup:{id:e.backup.id,resource:b(e.backup)(e.backup.resource),documentType:e.backup.documentType,version:e.backup.version,updatedAt:new Date(e.backup.updatedAt)}}:{}),{version:e.version,updatedAt:new Date(e.updatedAt)})},O=function(e){return{id:e.id,version:e.version,updatedAt:new Date(e.updatedAt)}},S=function(e){if(d.isWrapperOfType(e,"tag"))return u.toPushTagDto(e.id,e.document,e.permanent.version);if(d.isWrapperOfType(e,"snippet"))return c.toPushSnippetDto(e.id,e.document,e.permanent.version);throw"snip-cloud: unable to process before push (invalid document type "+e.permanent.documentType+")"},_=function(e,t){return{id:e.id,resource:t(e.resource),documentType:e.documentType,version:e.version,updatedAt:new Date(e.updatedAt)}},w=function(e){return function(t){return r(r({},t),{documentType:e})}},j=function(){function e(e,t){void 0===t&&(t=750),this.rest=e,this.mutex=new s.Mutex,this.id={},this.lastFetchTimestamp=null,this.throttle=t}return e.prototype.update=function(e){return o(this,void 0,void 0,(function(){var t,n,o;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,8,9,11]),[4,this.mutex.getLockOn(this.id)];case 1:return i.sent(),p.shouldCreate(e)?(t=S(e),[4,this.rest.create(t)]):[3,3];case 2:return n=i.sent(),[2,h.pipe(n,v,w(e.permanent.documentType))];case 3:return f.shouldDelete(e)?[4,this.rest.delete(e.id,{document_type:e.permanent.documentType})]:[3,5];case 4:return n=i.sent(),[2,h.pipe(n,(s=l.DELETEABLE,function(e){return r(r({},e),{id:s})}),O,w(e.permanent.documentType))];case 5:return t=S(e),[4,this.rest.update(t)];case 6:return n=i.sent(),[2,h.pipe(n,y,w(e.permanent.documentType))];case 7:return[3,11];case 8:throw o=i.sent(),m.handlePushError(o,e);case 9:return[4,(a=this.throttle,new Promise((function(e){return setTimeout(e,a)})))];case 10:return i.sent(),this.mutex.releaseLockOn(this.id),[7];case 11:return[2]}var a,s}))}))},e.prototype.processFetchResult=function(e){return this.lastFetchTimestamp=e.timestamp,{results:e.resources.map((function(e){return function(e){if(g(e,"tag"))return _(e,u.fromFetchTagDto);if(g(e,"snippet"))return _(e,c.fromFetchSnippetDto);throw"snip-cloud: unable to process after fetch (invalid document type "+e.documentType+")"}(e)})),errors:[]}},e.prototype.fetchAll=function(){return o(this,void 0,void 0,(function(){var e,t,n;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.lastFetchTimestamp?(e=this.processFetchResult,[4,this.rest.index({timestamp:this.lastFetchTimestamp})]):[3,2];case 1:return[2,e.apply(this,[r.sent()])];case 2:return t=this.processFetchResult,[4,this.rest.index()];case 3:return[2,t.apply(this,[r.sent()])];case 4:return[3,6];case 5:throw n=r.sent(),m.handlePullError(n);case 6:return[2]}}))}))},e}();t.Cloud=j,t.makeCloudBackend=function(e){var t=new a.Rest(e);return new j(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPushTagDto=t.fromFetchTagDto=void 0,t.fromFetchTagDto=function(e){return{path:e.path,archived:e.archived}},t.toPushTagDto=function(e,t,n){return{id:e,path:t.path,archived:t.archived,version:n,document_type:"tag"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPushSnippetDto=t.fromFetchSnippetDto=void 0;var r=n(52);t.fromFetchSnippetDto=function(e){var t=r.getPluginByLanguage(e.language);if(!t)throw"no plugin found for language "+e.language;return{tags:e.tags,archived:e.archived,content:t.deserialize(e.content),language:e.language,name:e.name}},t.toPushSnippetDto=function(e,t,n){var o=r.getPluginByLanguage(t.language);if(!o)throw"no plugin found for language "+t.language;return{id:e,tags:t.tags.map((function(e){return e})),archived:t.archived,name:t.name,language:t.language,content:o.serialize(t.content),version:n,document_type:"snippet"}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handlePullError=t.handlePushError=t.defaultHandleError=void 0;var o=r(n(1)),i=n(66),a="Unknown error.",s=function(){return o.default.createElement("span",null,"Unauthorized. Please Log In.")},u=function(e){return o.default.createElement("strong",null,"cloud document ",e)};t.defaultHandleError=function(e){return e},t.handlePushError=function(e,t){var n={isPushError:!0,code:e.status,documentId:t.id};return 401===e.status?i.compileError("cloud",u(t.id),o.default.createElement(o.default.Fragment,null,s()),n):i.compileError("cloud",u(t.id),a,n)},t.handlePullError=function(e){var t={isPullError:!0,code:e.status};return 401===e.status?i.compileError("cloud",o.default.createElement("strong",null,"cloud"),s(),t):i.compileError("cloud",o.default.createElement("strong",null,"cloud"),a,t)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkLoginState=void 0;var i=n(91);function a(){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2,new Promise((function(e,t){return new i.Rest("sessions").index().then((function(){return e(!0)})).catch((function(n){return 401===n.status?e(!1):t(n)}))}))]}))}))}t.checkLoginState=function(){return r(this,void 0,void 0,(function(){var e,t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,a()];case 1:return e=n.sent(),t=!0,[3,3];case 2:return n.sent(),e=!1,t=!1,[3,3];case 3:return[2,[e,t]]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CloudOriginSettingsPage=void 0;var a=i(n(1)),s=n(11),u=n(178),c=n(179),l=n(180),d=n(181),p=n(170);t.CloudOriginSettingsPage=function(){var e=s.useObject("dispatchSettings"),t=a.useState("signin"),n=t[0],r=t[1],o=s.useObject("settings"),i=s.getOriginSettings(o,"cloud",p.cloudOriginConfig.defaultConfig);switch(n){case"signin":return a.default.createElement(l.SignInForm,{onClickSignUp:function(){return r("signup")},onClickForgotPassword:function(){return r("forgot-password")},onClickChangePassword:function(){return r("change-password")},onSubmit:function(){e({type:"setOriginSettings",origin:"cloud",settings:p.bumpCloudOriginToken(i)})}});case"signup":return a.default.createElement(d.SignUpForm,{onClickSignIn:function(){return r("signin")}});case"forgot-password":return a.default.createElement(c.ForgotPasswordForm,{onClickBack:function(){return r("signin")}});case"change-password":return a.default.createElement(u.ChangePasswordForm,{onClickBack:function(){return r("signin")}})}}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionService=void 0;var i=n(91),a=function(){function e(){this.rest=new i.Rest("sessions")}return e.prototype.login=function(e){var t=e.username,n=e.password;return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.rest.create({email:t,password:n,remember_me:"true"})];case 1:return e.sent(),[2]}}))}))},e.prototype.logout=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.rest.deleteAll()];case 1:return e.sent(),[2]}}))}))},e.prototype.waitForLogin=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.rest.index()];case 1:return[2,e.sent()]}}))}))},e}();t.SessionService=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testDirectoryAccess=void 0;var r=n(92);t.testDirectoryAccess=function(e){if(!e)return r.noDirectorySpecified();var t=window.require("fs");return new Promise((function(n,r){return t.writeFile(e+"/probe","probe",(function(e){e?r(e):n(!0)}))}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.FileOriginSettingsPage=void 0;var c=i(n(1)),l=n(11),d=n(90),p=n(183);n(311);t.FileOriginSettingsPage=function(){var e=c.useContext(d.OriginReadynessContext),t=l.useObject("dispatchSettings"),n=l.useObject("settings"),r=l.getOriginSettings(n,"file",p.fileOriginConfig.defaultConfig);return c.default.createElement("div",{className:"FileOriginSettingsPage-outer"},c.default.createElement("h2",null,"Location"),c.default.createElement("input",{className:u(["CommonUI-input CommonUI-input-centered CommonUI-input-with-border"],!1!==e.ready||e.reason!==p.DIRECTORY_NOT_ACCESSIBLE&&e.reason!==p.DIRECTORY_NOT_SPECIFIED?[]:["CommonUI-input-red"]).join(" "),value:r.fileLocation,onChange:function(e){return t({type:"setOriginSettings",origin:"file",settings:{fileLocation:e.target.value}})}}),c.default.createElement("button",{className:"CommonUI-button",onClick:function(){return a(void 0,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return[4,window.require("electron").remote.dialog.showOpenDialog({title:"Choose Directory",properties:["openDirectory"]})];case 1:return(e=n.sent().filePaths[0])&&t({type:"setOriginSettings",origin:"file",settings:{fileLocation:e}}),[2]}}))}))}},"Choose Directory"),c.default.createElement("div",{className:"FileOriginSettingsPage-readyness"},!0===e.ready?"Success":!1===e.ready?e.reason:"Pending"))}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileStorage=void 0;var i=n(176),a=n(175),s=n(173),u=n(126),c=n(127),l=n(38),d=n(313),p=(new Date).getTime();var f=function(){function e(e,t){var n=a.makeFileStorageFetcher(e,t);this.fetcher=function(){return n().catch((function(e){throw d.handleFileStorageError(e)}))};var r=s.makeFileStoragePusher(e,t,(function(e){return e.id}));this.pusher=function(e){return r({id:u.shouldCreate(e)?"FILE-"+p++:e.id,resource:e.document,documentType:e.permanent.documentType,version:0,updatedAt:new Date}).catch((function(t){throw d.handleFileStorageError(t,e)}))};var o=i.makeFileStorageDeleter(e,t,(function(e){return e}));this.deleter=function(e){return o(e.id).catch((function(t){throw d.handleFileStorageError(t,e)}))}}return e.prototype.update=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return c.shouldDelete(e)?[4,this.deleter(e).then((function(){return{id:l.DELETEABLE,resource:e.document,documentType:e.permanent.documentType,version:0,updatedAt:new Date}}))]:[3,2];case 1:return[2,t.sent()];case 2:return[4,this.pusher(e)];case 3:return[2,t.sent()]}}))}))},e.prototype.fetchAll=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2,this.fetcher()]}))}))},e}();t.FileStorage=f},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleFileStorageError=void 0;var o=r(n(1)),i=n(66);t.handleFileStorageError=function(e,t){return e.isFileStorageError?i.compileError("file",t?o.default.createElement("strong",null,"file document ",t.id):o.default.createElement("strong",null,"file"),e.description,void 0):i.compileError("file",null,"Unknown error.",void 0)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SnippetEditor=void 0;var u=s(n(1));n(315);var c=n(58),l=n(120),d=n(9),p=n(11),f=n(52),h=n(165),m=n(316),g=n(318),v=function(e){function t(t){var n=e.call(this,t)||this;n.persist=n.persist.bind(n),n.onChangeFile=n.onChangeFile.bind(n),n.onAddTag=n.onAddTag.bind(n),n.onDeleteTag=n.onDeleteTag.bind(n),n.onChangeHasFocus=n.onChangeHasFocus.bind(n),n.onDragStart=n.onDragStart.bind(n),n.onDragStop=n.onDragStop.bind(n),n.onChangeQuery=n.onChangeQuery.bind(n),n.onKeyDownInQueryField=n.onKeyDownInQueryField.bind(n),n.toggleSearch=n.toggleSearch.bind(n),n.onBlurQueryField=n.onBlurQueryField.bind(n),n.onFocus=n.onFocus.bind(n),n.persistDebounced=c.debounce(n.persist,250),n.state={snippet:t.snippet,metaData:t.metaData,currentFileIdx:0,tagInput:"",editorHasFocus:null,dirty:!1,editAsRichText:void 0,isDragging:!1,query:"",queryIndex:0,isDoingSearch:!1},n.toolbarEvents=new m.ToolbarEvents,n.subscriptions=[];var r=n.toolbarEvents.subscribeForCurrentLanguageChange((function(e){n.setState((function(t){return{snippet:o(o({},t.snippet),{language:e})}}),n.persist)}));n.subscriptions.push(r);var i=n.toolbarEvents.subscribeForMarkdownWYSIWYGToggle((function(e){n.setState({editAsRichText:e})}));n.subscriptions.push(i);var a=t.requestSearch.subscribe((function(){n.toggleSearch(!0),n.highlightOccurence(n.state.query,n.state.queryIndex)}));return n.subscriptions.push((function(){return a.unsubscribe()})),n}return r(t,e),t.prototype.componentDidUpdate=function(e){var t=this;this.props.metaData.resolvedTags===this.state.metaData.resolvedTags&&this.props.snippet.tags===this.state.snippet.tags||this.setState((function(e){return{snippet:o(o({},t.state.snippet),{tags:t.props.snippet.tags}),metaData:o(o({},t.state.metaData),{resolvedTags:t.props.metaData.resolvedTags})}}))},t.prototype.componentWillUnmount=function(){this.persistDebounced.cancel(),this.subscriptions.forEach((function(e){return e()}))},t.prototype.persist=function(){this.props.dispatch({type:"updateSnippet",id:this.props.metaData.id,snippet:this.state.snippet}),this.setState({dirty:!1})},t.prototype.onUpdateFile=function(e,t,n,r){var i=this;this.setState((function(e){var r="string"===typeof t?t:o(o({},e.snippet.content),t),a=o(o({},e.snippet),{content:r}),s=i.state.dirty;return n&&(s=!0),{snippet:a,dirty:s}}),r)},t.prototype.onChangeFile=function(e,t){this.onUpdateFile(e,t,!0,this.persistDebounced)},t.prototype.onBlurFile=function(e,t){var n=this;this.onChangeHasFocus(!1),this.state.dirty&&this.onUpdateFile(e,t,!1,(function(){return n.persist()}))},t.prototype.onFocus=function(){this.onChangeHasFocus(!0)},t.prototype.onSuggestPersist=function(e,t){var n=this;this.onUpdateFile(e,t,!1,(function(){return n.persist()}))},t.prototype.onChangeFileName=function(e){this.setState((function(t){return{snippet:h.changeFileName(t.snippet,e)}}),this.persist)},t.prototype.onAddTag=function(e){this.props.dispatch({type:"addTagToSnippet",id:this.props.metaData.id,tag:e})},t.prototype.onDeleteTag=function(e){var t=this;this.setState((function(t){var n=t.snippet.tags.filter((function(n){return n!==t.metaData.resolvedTags[e].id}));return{snippet:o(o({},t.snippet),{tags:n})}}),(function(){t.persist()}))},t.prototype.onChangeHasFocus=function(e){this.setState({editorHasFocus:e}),this.props.onChangeHasFocus(e)},t.prototype.onDragStart=function(){this.props.onChangeIsDragging(!0),this.setState({isDragging:!0})},t.prototype.onDragStop=function(){this.props.onChangeIsDragging(!1),this.setState({isDragging:!1})},t.prototype.focus=function(){this.refs.editor.focus()},t.prototype.onChangeQuery=function(e){var t=this,n=e.target.value;this.setState({query:n,queryIndex:0},(function(){return t.highlightOccurence(t.state.query,t.state.queryIndex)}))},t.prototype.onKeyDownInQueryField=function(e){var t=this;e.keyCode===d.KEY_CODES.ENTER||e.keyCode===d.KEY_CODES.TAB?(e.preventDefault(),this.setState((function(e){return{queryIndex:e.queryIndex+1}}),(function(){return t.highlightOccurence(t.state.query,t.state.queryIndex)}))):e.keyCode===d.KEY_CODES.ESCAPE&&(this.toggleSearch(!1),this.highlightOccurence("",0))},t.prototype.toggleSearch=function(e){this.setState({isDoingSearch:e})},t.prototype.onBlurQueryField=function(){this.toggleSearch(!1)},t.prototype.animateSearch=function(e,t){var n=this;this.cancelScrollAnimation&&this.cancelScrollAnimation(),this.cancelScrollAnimation=p.startAnimation(e,t,125,(function(e){n.refs.fileView.scrollTop=e}))},t.prototype.highlightOccurence=function(e,t){var n=t,r=this.refs.editor.onChangeQuery([e],n);if(""!==e&&r){var o=this.refs.fileView.getBoundingClientRect();if(r.coordinates.top-20<o.y){var i=this.refs.fileView.scrollTop,a=this.refs.fileView.scrollTop-(o.y-r.coordinates.top)-20;this.animateSearch(i,a)}else if(r.coordinates.bottom+20>o.y+o.height){i=this.refs.fileView.scrollTop,a=this.refs.fileView.scrollTop+(r.coordinates.bottom-(o.y+o.height))+20;this.animateSearch(i,a)}}},t.prototype.render=function(){var e=this.state.snippet,t=f.getPluginByLanguage(e.language);if(!t)return u.default.createElement("span",null,"no plugin found for language ",e.language);var n=t.writer,r=t.toolbar,o=t.editorClass(this.state.snippet)||"",i=["SnippetEditor"];this.state.isDragging&&i.push("SnippetEditor-is-dragging"),i.push(o),i.push(this.state.editorHasFocus?"SnippetEditor-focused":"SnippetEditor-not-focused");var a=u.default.createElement(n,{key:e.language+"-"+this.state.currentFileIdx,content:e.content,language:e.language,onBlur:this.onBlurFile.bind(this,this.state.currentFileIdx),onFocus:this.onFocus,onChange:this.onChangeFile.bind(this,this.state.currentFileIdx),onSuggestPersist:this.onSuggestPersist.bind(this,this.state.currentFileIdx),allowReadMode:this.props.allowReadMode,onChangeHasFocus:this.onChangeHasFocus,uploadFile:this.props.uploadFile,toolbarEvents:this.toolbarEvents,settings:this.props.settings,ref:"editor",onEscape:this.props.onEscape,onDragStart:this.onDragStart,onDragStop:this.onDragStop,availableEditorWidth:this.props.availableEditorWidth});return u.default.createElement("div",{className:i.join(" ")},r&&u.default.createElement("div",{className:"Toolbar-decoupler"},u.default.createElement(l.Toolbar,null,u.default.createElement(r,{toolbarEvents:this.toolbarEvents}))),u.default.createElement(g.SearchBar,{visible:this.state.isDoingSearch,onChangeQuery:this.onChangeQuery,onKeyDownInQueryField:this.onKeyDownInQueryField,onBlurQueryField:this.onBlurQueryField,query:this.state.query}),u.default.createElement("div",{className:"SnippetEditor-file-view",tabIndex:0,ref:"fileView"},a))},t}(u.Component);t.SnippetEditor=v},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarEvents=void 0;var r=n(317),o=function(){function e(){this.eventBus=new r.EventBus(["runMenuItem","menuItemStateChange","toggleMarkdownWYSIWYG","tellCurrentLanguage","changeCurrentLanguage"],{replayMessages:!0})}return e.prototype.subscribeForMenuItemStateChanges=function(e){return this.eventBus.subscribe("menuItemStateChange",e)},e.prototype.publishMenuItemStateChange=function(e){this.eventBus.publish("menuItemStateChange",e)},e.prototype.subscribeForMenuItemRun=function(e){return this.eventBus.subscribe("runMenuItem",e)},e.prototype.publishMenuItemRun=function(e){this.eventBus.publish("runMenuItem",e)},e.prototype.subscribeForMarkdownWYSIWYGToggle=function(e){return this.eventBus.subscribe("toggleMarkdownWYSIWYG",e)},e.prototype.publishToggleMarkdownWYSIWYG=function(e){this.eventBus.publish("toggleMarkdownWYSIWYG",e)},e.prototype.subscribeForCurrentLanguage=function(e){return this.eventBus.subscribe("tellCurrentLanguage",e)},e.prototype.publishCurrentLanguage=function(e){this.eventBus.publish("tellCurrentLanguage",e)},e.prototype.subscribeForCurrentLanguageChange=function(e){return this.eventBus.subscribe("changeCurrentLanguage",e)},e.prototype.publishCurrentLanguageChange=function(e){this.eventBus.publish("changeCurrentLanguage",e)},e}();t.ToolbarEvents=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventBus=void 0;var r=function(){function e(e,t){var n=this,r=(void 0===t?{replayMessages:!1}:t).replayMessages;this.subscriptions={},this.unpublishedMessages={},this.replayMessages=r,e.forEach((function(e){n.subscriptions[e]=[],n.unpublishedMessages[e]=[]}))}return e.prototype.subscribe=function(e,t){var n=this;return this.subscriptions[e].push(t),this.replayMessages&&this.unpublishedMessages[e].length>0&&(this.unpublishedMessages[e].forEach(t),this.unpublishedMessages[e]=[]),function(){n.subscriptions[e]=n.subscriptions[e].filter((function(e){return e!==t}))}},e.prototype.publish=function(e,t){this.subscriptions[e].length>0?this.subscriptions[e].forEach((function(e){return e(t)})):this.unpublishedMessages[e].push(t)},e}();t.EventBus=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SearchBar=void 0;var s=a(n(1)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.componentDidUpdate=function(e){e.visible!==this.props.visible&&(this.props.visible?this.refs.input&&this.refs.input.focus():this.refs.input&&this.refs.input.blur())},t.prototype.render=function(){var e=["SnippetEditor-search-bar"];return this.props.visible&&e.push("SnippetEditor-search-bar-visible"),s.default.createElement("div",{className:e.join(" ")},s.default.createElement("input",{ref:"input",value:this.props.query,onChange:this.props.onChangeQuery,onKeyDown:this.props.onKeyDownInQueryField,onBlur:this.props.onBlurQueryField}))},t}(s.Component);t.SearchBar=u},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.useElectronState=void 0;var i=n(1),a=n(39);function s(e){var t=function(e){return window.require("electron").remote.app.getPath("userData")+"/"+e}(e),n=window.require("fs");return n.existsSync(t)||n.mkdirSync(t),t}t.useElectronState=function(e,t){void 0===t&&(t="storage");var n=i.useState(null),u=n[0],c=n[1];return i.useEffect((function(){(function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return a.isElectron()?[2,{cacheLocation:s(e)}]:[2,{cacheLocation:void 0}]}))}))})(t).then(c)}),[e.localFileLocation]),[u,c]}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.extractSubSnippets=void 0;var o=n(52);t.extractSubSnippets=function(e,t){return e[0].reduce((function(e,t){var n=o.getPluginByLanguage(t.snippet.language),i=n?n.extractSubSnippets(t):[];return r(e,i)}),[])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterSubSnippets=void 0;var r=n(60),o=n(322);t.filterSubSnippets=function(e,t){return""===t.trim()?[]:e.map((n=t.toUpperCase().split(" "),function(e){var t=r.findOccurences(e.searchableString,n);return t.length>0?{relevance:r.calculateSearchRelevance(t,n),updatedAt:e.original.metaData.updatedAt,subSnippet:e}:null})).filter(o.filterNull).sort((function(e,t){var n=e.relevance,r=e.updatedAt,o=t.relevance,i=t.updatedAt;return o-n||i.getTime()-r.getTime()})).slice(0,20).map((function(e){return e.subSnippet}));var n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterNull=void 0,t.filterNull=function(e){return null!==e}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.renderSubSnippet=void 0;var o=r(n(1)),i=n(52);t.renderSubSnippet=function(e){var t=i.getPluginByLanguage(e.original.snippet.language);return t?t.renderSubSnippet(e):o.default.createElement("span",null,"n/a")}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.renderSnippet=void 0;var i=o(n(1)),a=n(52);t.renderSnippet=function(e){var t=a.getPluginByLanguage(e.snippetListEntry.snippet.language),n=(null===t||void 0===t?void 0:t.listEntry)||function(){return i.default.createElement("span",null,"n/a")};return i.default.createElement(n,r({},e))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useSettings=t.defaultSettings=void 0;var o=n(1),i=n(9),a=n(182),s=n(39),u=i.treeView.updateCollapsedPaths;function c(e,t){var n,o,a,s;switch(t.type){case"selectTagPath":return r(r({},e),{selectedTagPath:t.path,showOnlyDeleted:!1});case"setCollapsedTagPath":return r(r({},e),{collapsedPaths:u(e.collapsedPaths,t.path,t.collapsed)});case"selectArchive":return r(r({},e),{selectedTagPath:[],showOnlyDeleted:!0});case"toggleSidebar":return r(r({},e),{sidebarToggles:r(r({},e.sidebarToggles),(n={},n[t.sidebar]=null!==(a=t.value)&&void 0!==a?a:i.normalizeCounter(e.sidebarToggles[t.sidebar]+1,2),n))});case"setSidebarWidth":return r(r({},e),{sidebarWidths:r(r({},e.sidebarWidths),(o={},o[t.sidebar]=t.value,o))});case"setThemeName":return r(r({},e),{themeName:t.value});case"setLocalFileLocation":return r(r({},e),{localFileLocation:t.value});case"toggleScrollbarStyling":return r(r({},e),{scrollbarStylingToggle:null!==(s=t.value)&&void 0!==s?s:i.normalizeCounter(e.scrollbarStylingToggle+1,2)});case"setOriginSettings":return r(r({},e),{originSettings:e.originSettings.filter((function(e){return e.origin!==t.origin})).concat({origin:t.origin,settings:r(r({},(e.originSettings.find((function(e){return e.origin===t.origin}))||{}).settings||{}),t.settings)})});case"setDefaultOrigin":return r(r({},e),{defaultOrigin:t.origin});case"toggleShrinkInFullScreen":return r(r({},e),{shrinkInFullScreen:!e.shrinkInFullScreen})}}t.defaultSettings={selectedTagPath:[],showOnlyDeleted:!1,sidebarWidths:{tags:200,snippetList:200,create:200},sidebarToggles:{tags:1,snippetList:1,create:0},collapsedPaths:[],themeName:"light",localFileLocation:null,scrollbarStylingToggle:s.isWindows()?1:0,originSettings:[],defaultOrigin:a.getDefaultOrigin(),shrinkInFullScreen:!0};t.useSettings=function(e){return o.useReducer(c,o.useMemo((function(){return e||t.defaultSettings}),[]))}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Autocomplete=void 0;var i=o(n(1)),a=n(9);n(328),n(95);var s=n(184),u={style:{position:"relative"}},c={style:{position:"absolute"}},l=function(e,t){return e.filter((function(e){return e.includes(t)}))};t.Autocomplete=function(e){var t=e.entries,n=e.onLeftArrowKeyDownAtEdge,o=e.requestFocus,d=e.placeholder,p=e.onConfirm,f=e.className,h=a.useSelection({entries:t,filter:l,initialValue:"",onConfirm:function(e){return null===p||void 0===p?void 0:p("focused"===e.mode?e.value:e.filteredEntries[e.currentIndex])}}),m=h[0],g=h[1],v=a.useRefsCallback(),b=v.refs,y=v.callback;a.useScrollIntoViewForSelection({state:m,entryRefs:b});var O=a.makeDefaultSelectionKeyHandlerChain(g);O=O.concat(a.buildKeyboardEventHandlerChainItem(a.KEY_CODES.LEFT_ARROW,(function(e){return 0===e.target.selectionStart&&n(e)})));var S=a.buildHandler(O),_=s.useRequestFocus(o);return i.default.createElement("div",r({},u),i.default.createElement("input",{ref:_,onKeyDown:S,onFocus:function(){return g({type:"focus"})},onBlur:function(){return g({type:"blur"})},value:m.value,onChange:function(e){return g({type:"change",value:e.target.value})},className:f||"CommonUI-input",placeholder:d}),m.derivedStates.active&&m.filteredEntries.length>0&&i.default.createElement("div",r({className:"Autocomplete-panel"},c),m.filteredEntries.map((function(e,t){return i.default.createElement("div",{onMouseMove:function(){return g({type:"mouseMove",currentIndex:t})},onClick:function(){return g({type:"confirm"})},onMouseDown:function(e){return e.preventDefault()},key:t,className:"Autocomplete-entry "+(m.derivedStates.navigating&&t===m.currentIndex?"Autocomplete-selectedEntry":""),ref:function(e){return e&&y(e,t)}},e)}))))}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.ResizableSidePanel=void 0;var u=a(n(1)),c=n(188),l=n(9),d=n(189);n(333);var p=l.drag.useDrag,f=d.makeEventListenerManager(d.makeAdapterFactory(d.stopPropagation,d.preventDefault)),h=f[0],m=f[1];function g(e,t){switch(t.type){case"change":return r(r({},e),{size:Math.max(e.minSize,e.size+t.amount)})}}t.ResizableSidePanel=function(e){var t=e.children,n=e.state,r=e.initialSize,o=e.onStopResize,i=e.direction,a=e.minSize,d=void 0===a?100:a,f=u.useReducer(g,{size:r,minSize:d}),v=f[0],b=f[1];l.useStateChangeEffect(v.size,{trigger:"change",run:function(){return null===o||void 0===o?void 0:o(v.size)}});var y=p({onStop:function(e){return b({type:"change",amount:e})}}),O=y[0],S=y[1],_=s(["ResizableSidePanel-resizer"],O.isDragging?["ResizableSidePanel-isResizing"]:[]).join(" ");return u.default.createElement(u.default.Fragment,null,u.default.createElement(c.SidePanel,{state:n,direction:i,size:Math.max(d,v.size+O.currentDelta),useTransition:!O.isDragging},t),u.default.createElement("span",{onMouseDown:function(e){return l.onStartDrag(S,h,m,e)},className:_}))}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=void 0;var a=i(n(1)),s=n(9),u=n(187),c=n(190);n(336);t.Selection=function(e){var t=a.useRef(null);a.useEffect((function(){var e;null===(e=t.current)||void 0===e||e.focus()}),[]);var n=s.useSelection({entries:e.entries,filter:e.filter,initialValue:"",onConfirm:e.onConfirm}),r=n[0],o=n[1],i=s.useRefsCallback(),l=i.refs,d=i.callback;s.useScrollIntoViewForSelection({state:r,entryRefs:l});var p=a.useMemo((function(){var e=s.makeDefaultSelectionKeyHandlerChain(o,!1);return s.buildHandler(e)}),[]),f=""!==r.value&&r.filteredEntries.map((function(t,n){return a.default.createElement(a.default.Fragment,{key:n},a.default.createElement("div",{className:"Selection-itemOuter",onMouseMove:function(){return o({type:"mouseMove",currentIndex:n})},onMouseDown:function(e){return e.stopPropagation(),o({type:"confirm"})},ref:function(e){return e&&d(e,n)}},a.default.createElement("div",{className:r.currentIndex===n?"Selection-item Selection-selectedItem":"Selection-item"},e.renderEntry(t))))}));return a.default.createElement(u.Modal,{onClose:e.onClose},a.default.createElement("div",{className:"Selection-main"},a.default.createElement("div",{className:"Selection-header"},a.default.createElement("input",{value:r.value,onChange:function(e){return o({type:"change",value:e.target.value})},onKeyDown:p,className:"CommonUI-input CommonUI-input-centered CommonUI-input-with-border",ref:t})),a.default.createElement(c.ScrollShadows,null,a.default.createElement("div",{className:"Selection-results"},f))))}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},u=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeView=t.ENTRY_HEIGHT=void 0;var c=a(n(1)),l=n(9),d=n(191);n(338),n(95);var p=l.treeView.useTreeView,f=l.treeView.makeExpandedIconBindings,h=l.treeView.makeTreeViewEntryBindings;t.ENTRY_HEIGHT="1.75em",t.TreeView=c.default.forwardRef((function(e,n){var o=e.tree,i=e.onSelect,a=e.onRename,m=e.onSetCollapsedPath,g=e.collapsedPaths,v=e.currentPath,b=e.indexOffset,y=e.extraElements,O=e.renderActionIcon,S=e.navigateLeft,_=e.navigateRight,w=p({tree:o,collapsedPaths:g}),j=w[0],E=w[1],x=c.useState(0),P=x[0],C=x[1];c.useEffect((function(){C(l.findIndex(v,j.entries))}),[j.entries,v]);var T=P+b,k=function(e,t){E({type:"setCollapsed",index:e,collapsed:t}),m(j.entries[e],t)},D=function(e){var n,o,l,p=h({entry:e,onSelect:i,height:t.ENTRY_HEIGHT}),m=p.key,g=s(p,["key"]),v=u(["TreeView-entry"],e.isInsideCollapsed?["TreeView-entryInsideCollapsed"]:[],T===e.index?["TreeView-entrySelected"]:[],["CommonUI-delayedIconContainer"]),b=e.data.id&&(null===(n=null===y||void 0===y?void 0:y[e.data.id])||void 0===n?void 0:n.before),S=e.data.id&&(null===(o=null===y||void 0===y?void 0:y[e.data.id])||void 0===o?void 0:o.after);return c.default.createElement(c.default.Fragment,{key:m},b,c.default.createElement("span",r({},g,{className:v.join(" ")}),(l=e.depth,Array.from(Array(l).keys()).map((function(e){return c.default.createElement("span",{key:e,className:"TreeView-spacing"})}))),function(e){var t=f({entry:e,setCollapsed:k});return e.hasChildren&&e.isCollapsed?c.default.createElement("i",r({},t,{className:"mdi mdi-chevron-right TreeView-spacing"})):e.hasChildren&&!e.isCollapsed?c.default.createElement("i",r({},t,{className:"mdi mdi-chevron-down TreeView-spacing"})):c.default.createElement("i",{className:"TreeView-spacing"})}(e),c.default.createElement("i",{className:"mdi mdi-tag-outline CommonUI-spacing"}),function(e){return c.default.createElement("span",{className:"TreeView-entryLabel"},e.data.readonly?c.default.createElement("span",null,e.name):c.default.createElement(d.SwitchedEditableLabel,{className:"CommonUI-input CommonUI-input-hidden",doubleClick:!0,initialValue:e.name,onToggle:function(t,n){return!1===t&&n!==e.name&&a(n,e.path)}}))}(e),O(e)),S)};return c.default.createElement("div",r({className:"TreeView-outer1"},l.makeTreeViewWrapperBindings(u(l.makeDefaultTreeViewKeyHandlerChain(j,T,i,k),_?[l.buildKeyboardEventHandlerChainItem(l.KEY_CODES.RIGHT_ARROW,(function(){return _()}))]:[],S?[l.buildKeyboardEventHandlerChainItem(l.KEY_CODES.LEFT_ARROW,(function(){return S()}))]:[])),{style:{backgroundColor:"inherit"},tabIndex:0,ref:n}),j.entries.map((function(e){return D(e)})))}))},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTimeout=void 0;var r=n(360),o=n(1),i=n(130),a=n(192);t.useTimeout=function(e,t){var n=a.useSubject(),s=o.useMemo((function(){return n.pipe(r.delay(t))}),[]);return i.useObservable(e,s),o.useCallback((function(e){return n.next(e)}),[])}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultVerticalTabNode=void 0;var i=o(n(1));n(341);t.DefaultVerticalTabNode=function(e){return i.default.createElement("div",{className:r(["VerticalTabs-default-node"],e.isSelected?["VerticalTabs-default-node-selected"]:[]).join(" "),onMouseDown:e.onSelect},i.default.createElement("i",{className:"mdi mdi-"+e.iconName}),e.children)}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultSettingsLayout=void 0;var o=r(n(1));t.DefaultSettingsLayout=function(e){return o.default.createElement("div",{className:"VerticalTabs-outer "+e.className},o.default.createElement("div",{className:"VerticalTabs-list"},e.tabList),o.default.createElement("div",{className:"VerticalTabs-body"},e.title&&o.default.createElement("div",{className:"Settings-body-title"},e.title),e.currentPage))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultSettingsPage=void 0;var o=r(n(1));t.DefaultSettingsPage=function(e){return o.default.createElement("div",{className:"Settings-body-outer"},e.children)}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r=n(12),o=n(0),i=n(1),a=n.n(i),s=n(131),u=n.n(s),c=(n(201),n(22)),l=(n(202),n(203),n(204),n(8)),d=n(9),p=n(14),f=n(11),h=function(e){var t=Object(d.useFactory)(l.extractSubSnippets,[e.snippetList],[]);return Object(o.jsx)(p.Selection,{onClose:e.onClose,entries:t,filter:l.filterSubSnippets,onConfirm:function(t){t.filteredEntries[t.currentIndex]&&Object(f.copyToClipboard)(t.filteredEntries[t.currentIndex].textContent),e.onClose()},renderEntry:l.renderSubSnippet})};n(344);function m(e,t){return Object(l.findOccurencesAndCompileSearchResults)(e,t.split(" "))}var g=function(e){return Object(o.jsx)(p.Selection,{onClose:e.onClose,entries:e.snippetList,filter:m,onConfirm:function(t){var n;e.select(null===(n=t.filteredEntries[t.currentIndex])||void 0===n?void 0:n.id),e.onClose()},renderEntry:function(e){var t=e.chunks;return Object(o.jsx)(a.a.Fragment,{children:t.slice(0,30).map((function(e,t){return e.highlight?Object(o.jsx)("span",{className:"SearchModal-occurence",children:e.text},t):Object(o.jsx)("span",{children:e.text},t)}))})}})},v=n(44),b=(n(345),"createSnippetSidebarFocusable"),y=function(e){return Object(o.jsxs)("button",{id:"".concat(b,"-").concat(e.label),className:"CreateSnippetSidebar-button",onClick:e.action,onKeyDown:function(t){t.keyCode===d.KEY_CODES.ENTER&&(t.preventDefault(),e.action(t))},tabIndex:0,children:[Object(o.jsx)("i",{className:"mdi ".concat(e.iconClass)}),e.label]})},O=function(e){var t=Object(i.useRef)(null);Object(i.useEffect)((function(){setTimeout((function(){var e;null===(e=t.current)||void 0===e||e.focus()}),250)}),[]);var n=Object(l.getConfigsForInputs)(),a=Object(l.getConfigsForButtons)();return Object(o.jsxs)("div",{className:"CreateSnippetSidebar-main",children:[n.map((function(n,i){var a=Object(r.a)(n,2),s=a[0],u=a[1];return Object(o.jsx)("textarea",Object(v.a)({id:"".concat(b,"-").concat(i),placeholder:u.placeholder,className:"CommonUI-input",onChange:function(t){return e.onAdd({content:u.bootstrap(t.target.value),language:s})},value:"",tabIndex:0},0===i?{ref:t}:{}),i)})),a.map((function(t,n){var i=Object(r.a)(t,3),a=i[0],s=i[1],u=i[2];return Object(o.jsx)(y,{label:u.label,iconClass:s,action:function(){return e.onAdd({content:u.bootstrap(),language:a})}},n)}))]})},S=(n(346),n(195)),_=function(e){var t=Object(i.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1],u=Object(p.useTimeout)(Object(i.useCallback)((function(){return s(!1)}),[]),2e3),c=a?e.successLabel:e.label,l=(e.successLabel,e.label,Object(S.a)(e,["successLabel","label"]));return Object(o.jsx)("button",Object(v.a)(Object(v.a)({},l),{},{onClick:function(t){var n;null===(n=e.onClick)||void 0===n||n.call(e,t),s(!0),u()},children:c}))};n(347);var w=function(e){var t=Object(f.useObject)("dispatch"),n=Object(i.useState)(e.currentOrigin),a=Object(r.a)(n,2),s=a[0],u=a[1];return Object(o.jsxs)("div",{className:"OriginSelector-outer",children:[Object(o.jsx)("select",{className:"CommonUI-button",value:s,onChange:function(e){return u(e.target.value)},children:l.originConfigs.map((function(e){return Object(o.jsx)("option",{value:e.origin,children:e.origin},e.origin)}))}),Object(o.jsx)(_,{disabled:s===e.currentOrigin,className:"CommonUI-button-without-border",successLabel:"Switched!",label:"Switch",onClick:function(){return t({type:"changeOrigin",id:e.id,origin:s})}})]})},j=function(e){var t=Object(f.useObject)("dispatch");return Object(o.jsxs)("div",{className:"Settings-single-page",children:[Object(o.jsxs)("div",{className:"Settings-top-section",children:[Object(o.jsxs)("div",{className:"Settings-top-section-key-value-pair",children:[Object(o.jsx)("span",{children:"Document Id"}),Object(o.jsx)("span",{children:e.entry.metaData.id})]}),Object(o.jsxs)("div",{className:"Settings-top-section-key-value-pair",children:[Object(o.jsx)("span",{children:"Last updated"}),e.entry.metaData.updatedAt.toLocaleString()]})]}),Object(o.jsxs)("div",{className:"Settings-row",children:[Object(o.jsxs)("div",{className:"Settings-row-tile",children:[Object(o.jsx)("h2",{children:"Origin"}),Object(o.jsx)(w,{currentOrigin:e.entry.metaData.origin,id:e.entry.metaData.id})]}),Object(o.jsxs)("div",{className:"Settings-row-tile",children:[Object(o.jsx)("h2",{children:"Archive"}),!e.entry.tag.archived&&Object(o.jsxs)("button",{className:"CommonUI-button",onClick:function(){return t({type:"deleteTag",path:e.entry.tag.path})},children:[Object(o.jsx)("i",{className:"mdi mdi-package-down"})," Remove Tag"]})]})]})]})},E="archive",x="everything",P=function(e){var t=e.tagList,n=e.selectedPath,s=e.onSelectPath,u=e.onSelectArchive,c=e.showOnlyDeleted,l=e.onRenamePath,f=e.onToggleCollapsed,h=e.collapsedPaths,m=e.requestFocus,g=e.resolvePossiblyOldId,b=e.navigateRight,y=Object(p.useRequestFocus)(m),O=Object(i.useMemo)((function(){var e=Object(d.compileTree)(t.filter((function(e){return!e.tag.archived})).map((function(e){return{path:e.tag.path,data:{id:e.metaData.id,isPath:!0,origin:e.metaData.origin}}})),{id:"derived",origin:"cloud"},{id:"root",origin:"cloud"}),n=[{name:"Everything",content:[],root:!1,data:{readonly:!0,id:x,origin:"cloud"}},{name:"Archive",content:[],root:!1,data:{readonly:!0,id:E,origin:"cloud"}}];return Object(v.a)(Object(v.a)({},e),{},{content:n.concat(e.content)})}),[t]),S=Object(i.useState)(null),_=Object(r.a)(S,2),w=_[0],P=_[1],C=w&&g(w),T=C&&t.find((function(e){return e.metaData.id===C})),k=T&&Object(o.jsx)(p.Modal,{onClose:function(){return P(null)},children:Object(o.jsx)(j,{entry:T})});return Object(o.jsxs)(a.a.Fragment,{children:[Object(o.jsx)("div",{className:"TagsSidebar-outer1",children:Object(o.jsx)(p.TreeView,{ref:y,tree:O,currentPath:n,onSelect:function(e){e.data.id===x?s([]):e.data.id===E?u():s(e.path)},onRename:l,extraElements:{archive:{after:Object(o.jsx)("span",{className:"TagsSidebar-divider"})}},onSetCollapsedPath:function(e,t){return f(e.path,t)},collapsedPaths:h,indexOffset:n.length>0?0:c?1:0,renderActionIcon:function(e){return e.data.readonly||e.data.derived?void 0:Object(o.jsx)(a.a.Fragment,{children:Object(o.jsx)("span",{className:"CommonUI-delayedIconWrapper",children:Object(o.jsx)("i",{className:"mdi mdi-dots-horizontal TreeView-deleteIcon",onMouseDown:function(){return P(e.data.id)}})})})},navigateRight:b})}),k]})};n(348);function C(e){switch(e.state.name){case"uploadRequested":case"uploadOngoing":return["mdi-upload","SyncStateIndicator-load"];case"downloadRequested":case"downloadOngoing":return["mdi-download","SyncStateIndicator-load"];case"idle":return e.pushErrors.length>0||e.pullErrors.length>0?["mdi-alert"]:["mdi-check","SyncStateIndicator-success"]}}function T(e){switch(e.state.name){case"uploadRequested":case"uploadOngoing":return Object(o.jsx)("div",{className:"SyncStateIndicator-details-panel",children:"uploading..."});case"downloadRequested":case"downloadOngoing":return Object(o.jsx)("div",{className:"SyncStateIndicator-details-panel",children:"downloading..."});case"idle":var t=e.pullErrors.length>0?Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Errors during download:"}),e.pullErrors.map((function(e,t){return Object(o.jsx)("div",{children:Object(l.maybeRenderError)(e)},t)}))]}):null,n=e.pushErrors.length>0?Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Errors during upload:"}),e.pushErrors.map((function(e,t){return Object(o.jsx)("div",{children:Object(l.maybeRenderError)(e)},t)}))]}):null;return t||n?Object(o.jsxs)("div",{className:"SyncStateIndicator-details-panel",children:[t,n]}):null}}var k=function(e){return Object(o.jsxs)("span",{className:"SyncStateIndicator-main",children:[T(e.syncState),(t=e.syncState,Object(o.jsx)("i",{className:["mdi"].concat(Object(c.a)(C(t))).join(" ")}))]});var t},D={dark:{base:"Theme-dark",code:"one-dark"},light:{base:"Theme-light",code:"one-dark"},solarizedLight:{base:"Theme-solarized-light",code:"solarized light"},solarizedDark:{base:"Theme-solarized-dark",code:"solarized dark"},classicBlue:{base:"Theme-classic-blue",code:"classic-blue"}};function I(e){return D[e].base}n(349),n(350);var M=n(16),L=function(e){var t=Object(f.useObject)("dispatch"),n=Object(i.useMemo)((function(){return new M.a}),[]);return Object(o.jsxs)("div",{className:"TagsSection-main",children:[Object(o.jsx)("div",{className:"TagsSection-tags",children:e.tags.length>0?e.tags.map((function(n){return Object(o.jsxs)("span",{className:"TagsSection-tag",children:[n.text,Object(o.jsx)("i",{className:"mdi mdi-close",onClick:function(){return t({type:"removeTagFromSnippet",snippetId:e.snippetId,tagId:n.id})}})]},n.text)})):Object(o.jsx)("span",{className:"TagsSection-tag TagsSection-tag-placeholder",children:"No tags yet"})}),Object(o.jsx)("div",{className:"TagsSection-autocomplete-container",children:Object(o.jsx)(p.Autocomplete,{className:"CommonUI-input CommonUI-input-hidden CommonUI-input-centered",onLeftArrowKeyDownAtEdge:function(){},entries:e.tagList.filter((function(e){return!1===e.tag.archived})).filter((function(t){return!e.tags.find((function(e){return e.id===t.metaData.id}))})).map((function(e){return e.metaData.text})),requestFocus:n,closeOnConfirm:!1,resetOnConfirm:!0,onConfirm:function(n){return t({type:"addTagToSnippet",id:e.snippetId,tag:n})},placeholder:"Add tag..."})})]})},A=function(e){var t=Object(f.useObject)("dispatch");return Object(o.jsxs)("div",{className:"Settings-single-page",children:[Object(o.jsxs)("div",{className:"Settings-top-section",children:[Object(o.jsxs)("div",{className:"Settings-top-section-key-value-pair",children:[Object(o.jsx)("span",{children:"Document Id"}),Object(o.jsx)("span",{children:e.snippetListEntry.metaData.id})]}),Object(o.jsxs)("div",{className:"Settings-top-section-key-value-pair",children:[Object(o.jsx)("span",{children:"Last updated"}),e.snippetListEntry.metaData.updatedAt.toLocaleString()]})]}),Object(o.jsxs)("div",{className:"Settings-row",children:[Object(o.jsxs)("div",{className:"Settings-row-tile",children:[Object(o.jsx)("h2",{children:"Name"}),Object(o.jsx)(p.SwitchedEditableLabel,{initialValue:e.snippetListEntry.snippet.name,placeholderWhenReadonly:"untitled",onToggle:function(n,r){return!1===n&&t({type:"setSnippetName",snippetId:e.snippetListEntry.metaData.id,name:r})},className:"CommonUI-input CommonUI-input-hidden CommonUI-input-centered"})]}),Object(o.jsxs)("div",{className:"Settings-row-tile",children:[Object(o.jsx)("h2",{children:"Origin"}),Object(o.jsx)(w,{currentOrigin:e.snippetListEntry.metaData.origin,id:e.snippetListEntry.metaData.id})]})]}),Object(o.jsxs)("div",{className:"Settings-row-tile",children:[Object(o.jsx)("h2",{children:"Tags"}),Object(o.jsx)(L,{snippetId:e.snippetListEntry.metaData.id,tags:e.snippetListEntry.metaData.resolvedTags,tagList:e.tagList})]}),Object(o.jsxs)("div",{className:"Settings-row-tile",children:[Object(o.jsx)("h2",{children:"Archive"}),e.snippetListEntry.snippet.archived?Object(o.jsxs)("button",{className:"CommonUI-button",onClick:function(){return t({type:"restoreSnippet",id:e.snippetListEntry.metaData.id,snippet:e.snippetListEntry.snippet})},children:[Object(o.jsx)("i",{className:"mdi mdi-package-up"})," Restore From Archive"]}):Object(o.jsxs)("button",{className:"CommonUI-button",onClick:function(){return t({type:"deleteSnippet",id:e.snippetListEntry.metaData.id,snippet:e.snippetListEntry.snippet})},children:[Object(o.jsx)("i",{className:"mdi mdi-package-down"})," Move To Archive"]})]})]})};function N(e,t){return Math.max(0,t.findIndex((function(t){return t.metaData.id===e.selectedSnippetId})))}function F(e,t,n){t[n]&&e.setSelectedSnippetId(t[n].metaData.id)}function R(e,t,n){var r=N(e,t);n<0?F(e,t,0===r?t.length-1:r-1):n>0&&(r===t.length-1?F(e,t,0):F(e,t,r+1))}var B=function(e){var t,n,s,u=Object(p.useRequestFocus)(e.requestFocus),c=e.snippetList.filter((t=e.settings.selectedTagPath,n=e.settings.showOnlyDeleted,s=e.tagList,n?function(e){return!0===e.snippet.archived}:0===t.length?function(e){return!1===e.snippet.archived}:function(e){return!1===e.snippet.archived&&e.snippet.tags.some((function(e){var n=s.find((function(t){return t.metaData.id===e})),r=n&&n.tag.path;return r&&Object(d.isExactPath)(t,r)}))})),f=Object(i.useMemo)((function(){return Object(d.buildHandler)(function(e,t){return[Object(d.buildKeyboardEventHandlerChainItem)(d.KEY_CODES.UP_ARROW,(function(n){Object(d.preventDefault)(n),R(e,t,-1)})),Object(d.buildKeyboardEventHandlerChainItem)(d.KEY_CODES.DOWN_ARROW,(function(n){Object(d.preventDefault)(n),R(e,t,1)})),Object(d.buildKeyboardEventHandlerChainItem)(d.KEY_CODES.LEFT_ARROW,(function(t){Object(d.preventDefault)(t),e.navigateLeft()})),Object(d.buildKeyboardEventHandlerChainItem)(d.KEY_CODES.RIGHT_ARROW,(function(t){Object(d.preventDefault)(t),e.navigateRight()}))]}(e,c))}),[e,c]),h=Object(i.useState)(null),m=Object(r.a)(h,2),g=m[0],v=m[1],b=Object(d.useRefsCallback)(),y=b.refs,O=b.callback;Object(d.useScrollIntoView)({dependency:e.selectedSnippetId,condition:e.enableScrollIntoView,index:N(e,c),refs:y});var S=c.map((function(t,n){return Object(o.jsx)("div",{ref:function(e){return e&&O(e,n)},className:"SnippetList-entryOuter ".concat(t.metaData.id===e.selectedSnippetId?"SnippetList-entryOuterSelected":""),children:Object(l.renderSnippet)({snippetListEntry:t,settings:e.settings,setSelectedSnippetId:e.setSelectedSnippetId,listEntryIcon:e.listEntryIcon,runItemAction:function(){return v(t.metaData.id)}})},"".concat(e.settings.themeName,"-").concat(n))})),_=g&&e.resolvePossiblyOldId(g),w=_&&e.snippetList.find((function(e){return e.metaData.id===_})),j=w&&Object(o.jsx)(p.Modal,{onClose:function(){return v(null)},children:Object(o.jsx)(A,{snippetListEntry:w,tagList:e.tagList})});return Object(o.jsxs)(a.a.Fragment,{children:[Object(o.jsx)("div",{className:"SnippetList-listOuter",ref:u,tabIndex:0,onKeyDown:f,children:Object(o.jsx)(p.ScrollShadows,{children:Object(o.jsx)("div",{"keyboard-aware-element":"true",className:"SnippetList-listInner",children:S})})}),j]})};n(351);function U(e,t,n,r,i){return Object(o.jsx)(p.DefaultVerticalTabNode,{iconName:t,onSelect:function(){return r(e)},isSelected:i===e,children:n},n)}var H=[{label:"Dark",value:"dark"},{label:"Light",value:"light"},{label:"Solarized Dark",value:"solarizedDark"},{label:"Solarized Light",value:"solarizedLight"}],W=function(){var e=Object(f.useObject)("settings"),t=Object(f.useObject)("dispatchSettings"),n=Object(i.useState)(e.scrollbarStylingToggle),s=Object(r.a)(n,2),u=s[0],c=s[1];return Object(o.jsxs)(a.a.Fragment,{children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Theme"}),Object(o.jsx)("select",{className:"CommonUI-button",value:e.themeName,onChange:function(e){return t({type:"setThemeName",value:e.target.value})},children:H.map((function(e){var t=e.label,n=e.value;return Object(o.jsx)("option",{value:n,children:t},n)}))})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Scrollbar styling"}),Object(o.jsxs)("select",{className:"CommonUI-button",onChange:function(e){return c(Object(d.parseOffOrOn)(e.target.value))},value:u,children:[Object(o.jsx)("option",{value:"0",children:"Disable"}),Object(o.jsx)("option",{value:"1",children:"Enable"})]}),Object(o.jsx)("button",{className:"CommonUI-button-without-border",disabled:u===e.scrollbarStylingToggle,onClick:function(){t({type:"toggleScrollbarStyling",value:u}),setTimeout((function(){(0,window.require("electron").remote.getCurrentWindow)().reload()}),500)},children:"Set & Reload"})]})]})};n(352);function z(e,t){return e.origin===t.currentOrigin?"Already set":t.selectButtonTitle}function V(e,t){var n=Object(i.useState)({ready:"pending"}),o=Object(r.a)(n,2),a=o[0],s=o[1];return Object(i.useEffect)((function(){s({ready:"pending"})}),[e,t]),Object(d.useDebouncedEffect)((function(){t.checkReadyness(e).then((function(e){return s(e)}))}),1e3,[e,t]),a}var K=function(e){var t=Object(i.useState)(l.originConfigs[0]),n=Object(r.a)(t,2),s=n[0],u=n[1],c=function(e,t){var n=Object(f.useObject)("settings");return"noop"===e?t:Object(f.getOriginSettings)(n,e,t)}(s.origin,s.defaultConfig),d=Object(f.useObject)("dispatchSettings"),h=V(c,s),m=l.originConfigs.map((function(e){return U(e,e.icon,e.origin,u,s)})),g=s.origin,b=Object(o.jsxs)(a.a.Fragment,{children:[Object(o.jsxs)("div",{className:"Settings-top-section",children:[c.enabled&&Object(o.jsx)("div",{className:"OriginConfigurator-general-settings-button",children:Object(o.jsx)(_,{label:z(s,e),successLabel:"Set!",disabled:s.origin===e.currentOrigin,className:"CommonUI-button-without-border",onClick:function(){return e.onSelect(s)}},g)}),Object(o.jsx)("div",{className:"OriginConfigurator-general-settings-button",children:Object(o.jsx)(_,{label:c.enabled?"Disable":"Enable",successLabel:c.enabled?"Enabled!":"Disabled!",className:"CommonUI-button-without-border",onClick:function(){return d({type:"setOriginSettings",origin:s.origin,settings:Object(v.a)(Object(v.a)({},c),{},{enabled:!c.enabled})})},children:c.enabled?"Disable":"Enable"},g)})]}),c.enabled&&Object(o.jsx)("div",{className:"OriginConfigurator-settings-page",children:s.settingsPage})]});return Object(o.jsx)(l.OriginReadynessContext.Provider,{value:h,children:Object(o.jsx)(p.DefaultSettingsLayout,{className:"OriginConfigurator-outer",tabList:m,currentPage:b})})};function G(e,t,n){switch(e){case"general":return Object(o.jsx)(p.DefaultSettingsPage,{children:Object(o.jsx)(W,{})});case"origin":return Object(o.jsx)(a.a.Fragment,{children:Object(o.jsx)(K,{currentOrigin:n.defaultOrigin,selectButtonTitle:"Set as default",onSelect:function(e){return t({type:"setDefaultOrigin",origin:e.origin})}})})}}var q=function(){var e=Object(f.useObject)("dispatchSettings"),t=Object(f.useObject)("settings"),n=Object(i.useState)("general"),a=Object(r.a)(n,2),s=a[0],u=a[1],c=[U("general","cog-outline","General",u,s),U("origin","arrow-top-right-thick","Origins",u,s)];return Object(o.jsx)(p.DefaultSettingsLayout,{className:"Settings-outer",tabList:c,currentPage:G(s,e,t)})},Y=(n(353),function(e){return Object(o.jsxs)("div",{className:"TagsSidebar-outer1 EmptyTagsSidebar",children:[Object(o.jsx)("div",{children:"No tags yet."}),e.noSnippetsYet?null:Object(o.jsxs)("div",{children:["To add a tag, go to a snippet and click the '",Object(o.jsx)("i",{className:"mdi mdi-dots-horizontal"}),"' symbol."]})]})}),J=(n(354),function(){return Object(o.jsxs)("div",{className:"TagsSidebar-outer1 EmptySnippetList",children:[Object(o.jsx)("div",{children:"No snippets yet."}),Object(o.jsxs)("div",{children:["To create one, use",Object(o.jsxs)("span",{children:[Object(l.isMac)()?Object(o.jsx)("kbd",{children:"Cmd"}):Object(o.jsx)("kbd",{children:"Ctrl"}),"+",Object(o.jsx)("kbd",{children:"N"})]}),"or",Object(o.jsx)("span",{children:Object(o.jsx)("em",{children:"File \u2192 New"})})]})]})});var $=function(e){var t=Object(l.getConfigsForButtons)().filter((function(e){return"richtext"===Object(r.a)(e,1)[0]})),n=Object(r.a)(t,1),s=Object(r.a)(n[0],3)[2],u=Object(i.useRef)(null);return Object(o.jsxs)(a.a.Fragment,{children:[Object(o.jsx)("input",{className:"App-mobile-ios-input-focus-fix",ref:u}),Object(o.jsx)("div",{className:["App-mobile-add-button"].concat(Object(c.a)(1===e.currentSection?["App-mobile-add-button-visible"]:[])).join(" "),onClick:function(){var t;null===(t=u.current)||void 0===t||t.focus(),e.onAdd({language:"richtext",content:s.bootstrap()})},children:Object(o.jsx)("i",{className:"mdi mdi-plus-circle"})})]})},Q=(n(355),n(356),n(132)),X=n.n(Q),Z=n(194);function ee(e,t){return e?Array.isArray(t)?t:[t]:[]}function te(e){if(Object(l.isMac)()){var t=Object(l.getElectron)().remote;t.Menu.setApplicationMenu(t.Menu.buildFromTemplate(function(e){var t=e.onCreateNew,n=e.onToggleTags,r=e.onToggleSnippetList,o=e.onToggleCreateSidebar,i=e.onStartQuickAccess,a=e.onStartSearchAll,s=e.onStartSearch,u=e.onStartEditingPreferences;return[].concat(Object(c.a)(ee(Object(l.isMac)(),[{label:"Snip",submenu:[{role:"about"}].concat(Object(c.a)(ee(u,[{type:"separator"},{label:"Preferences...",accelerator:"CommandOrControl+,",click(){u()}},{type:"separator"}])),[{role:"services"},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}])}])),[{label:"File",submenu:[Object(l.isMac)()?{role:"close"}:{role:"quit"}].concat(Object(c.a)(ee(t,{label:"New",accelerator:"CommandOrControl+N",click(){t()}})),Object(c.a)(ee(o,{label:"New...",accelerator:"CommandOrControl+Shift+N",click(){o()}})),[{type:"separator"}],Object(c.a)(ee(i,{label:"Quick Access...",accelerator:"CommandOrControl+K",click(){i()}})),Object(c.a)(ee(a,{label:"Search All...",accelerator:"CommandOrControl+Shift+F",click(){a()}})),Object(c.a)(ee(s,{label:"Search...",accelerator:"CommandOrControl+F",click(){s()}})),Object(c.a)(ee(!Object(l.isMac)(),{label:"Preferences...",accelerator:"CommandOrControl+,",click(){u()}})))},{label:"Edit",submenu:[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"}].concat(Object(c.a)(Object(l.isMac)()?[{role:"pasteAndMatchStyle"},{role:"delete"},{role:"selectAll"},{type:"separator"},{label:"Speech",submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}]:[{role:"delete"},{type:"separator"},{role:"selectAll"}]))},{label:"View",submenu:[].concat(Object(c.a)(ee(n,{label:"Toggle Tags",accelerator:"CommandOrControl+T",click(){n()}})),Object(c.a)(ee(r,{label:"Toggle Snippet List",accelerator:"CommandOrControl+L",click(){r()}})),[{type:"separator"},{role:"reload"},{role:"forcereload"},{role:"toggledevtools"},{type:"separator"},{role:"resetzoom"},{role:"zoomin"},{role:"zoomout"},{type:"separator"},{role:"togglefullscreen"}])},{label:"Window",submenu:[{role:"minimize"},{role:"zoom"}].concat(Object(c.a)(Object(l.isMac)()?[{type:"separator"},{role:"front"},{type:"separator"},{role:"window"}]:[{role:"close"}]))},{role:"help",submenu:[{label:"Learn More",click:function(){var e=Object(Z.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]}])}(e)))}}var ne=n(97),re=(n(358),function(){var e=Object(i.useMemo)((function(){return Object(l.getElectron)().remote.getCurrentWindow()}),[]),t=Object(ne.useCyclicCounter)(2,e.isMaximized()?1:0),n=Object(r.a)(t,3),a=n[0],s=n[2].inc;return Object(i.useEffect)((function(){e.on("maximize",(function(){return s()})),e.on("unmaximize",(function(){return s()}))}),[]),Object(o.jsxs)("div",{className:"WindowsIcons",children:[Object(o.jsx)("div",{className:"WindowsIcons-button",onClick:function(){return e.minimize()},children:Object(o.jsx)("i",{className:"mdi mdi-window-minimize"})}),a?Object(o.jsx)("div",{className:"WindowsIcons-button",onClick:function(){return e.unmaximize()},children:Object(o.jsx)("i",{className:"mdi mdi-window-restore"})}):Object(o.jsx)("div",{className:"WindowsIcons-button",onClick:function(){return e.maximize()},children:Object(o.jsx)("i",{className:"mdi mdi-window-maximize"})}),Object(o.jsx)("div",{className:"WindowsIcons-button WindowsIcons-close-button",onClick:function(){return e.close()},children:Object(o.jsx)("i",{className:"mdi mdi-window-close"})})]})}),oe=(n(359),function(){return{check:function(e){return e.ctrlKey},explain:"Ctrl"}}),ie=function(){return{check:function(e){return e.altKey},explain:"Alt"}},ae={",":"Comma"},se=function(e){return{check:function(t){return t.code===(ae[e]?ae[e]:"Key".concat(e.toUpperCase()))},explain:e}},ue=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{check:function(e){return t.every((function(t){return t.check(e)}))},explain:t.map((function(e){return e.explain}))}};function ce(e){return Object(i.useMemo)((function(){var t=Object(l.isElectron)()?oe:ie;return[{name:"Toggle Tags",checker:ue(t(),se("t")),action:e.onToggleTags},{name:"Toggle Snippet List",checker:ue(t(),se("l")),action:e.onToggleSnippetList},{name:"New ...",checker:ue(t(),{check:function(e){return e.shiftKey},explain:"Shift"},se("n")),action:e.onToggleCreateSidebar},{name:"New",checker:ue(t(),se("n")),action:e.onCreateNew},{name:"Quick Access...",checker:ue(t(),se("k")),action:e.onStartQuickAccess},{name:"Search All...",checker:ue(t(),{check:function(e){return e.shiftKey},explain:"Shift"},se("f")),action:e.onStartSearchAll},{name:"Search...",checker:ue(t(),se("f")),action:e.onStartSearch},{name:"Preferences",checker:ue(t(),se(",")),action:e.onStartEditingPreferences}]}),[e])}function le(e){return Object(o.jsx)("div",{className:"BrowserMenu-panel",children:e.map((function(e,t){return Object(o.jsxs)("div",{className:"BrowserMenu-entry",onClick:e.action,children:[Object(o.jsx)("span",{children:e.name}),Object(o.jsx)("span",{children:e.checker.explain.map((function(e,t){return Object(o.jsxs)(a.a.Fragment,{children:[0!==t&&" + ",Object(o.jsx)("kbd",{children:e})]},t)}))})]},t)}))})}var de=function(e){var t=ce(e.menuActions);return Object(o.jsxs)("span",{className:"BrowserMenu-main",children:[le(t),Object(o.jsx)("i",{className:"mdi mdi-dots-horizontal"})]})};function pe(e){var t=ce(e);Object(i.useEffect)((function(){Object(l.isElectron)()&&!Object(l.isWindows)()||window.addEventListener("keydown",(function(e){var n=t.find((function(t){return t.checker.check(e)}));n&&(e.preventDefault(),n.action())}))}),[])}var fe=function(e){var t,n=Object(i.useRef)(null),a=Object(i.useRef)(null),s=Object(i.useMemo)((function(){return{localFileLocation:e.settings.localFileLocation,cacheLocation:e.electronState.cacheLocation}}),[e.settings.localFileLocation,e.electronState.cacheLocation]),u=Object(l.useAppState)(s,e.settings),m=Object(r.a)(u,3),v=m[0],b=m[1],y=m[2],S=function(){var e=Object(i.useState)(window.innerWidth),t=Object(r.a)(e,2),n=t[0],o=t[1];return Object(i.useEffect)((function(){var e=function(){return o(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),n}(),_=(t=e.settings.sidebarToggles,Object(i.useMemo)((function(){return["create"].concat(Object(c.a)(["snippetList","tags"].map((function(e){return 1===t[e]?e:null})).filter((function(e){return e}))))}),[t])),w=function(e,t,n,r){var o=Object(i.useMemo)((function(){return t.reduce((function(t,r){var o=t.total,i=t.allowedSidebars;return(o+=n[r])<e?{total:o,allowedSidebars:[].concat(Object(c.a)(i),[r])}:{total:o,allowedSidebars:i}}),{total:200,allowedSidebars:[]})}),[e,t,n,r]).allowedSidebars;return Object(i.useCallback)((function(t){var n=o.includes(t)&&1===r[t];return Object(l.isElectron)()?n:!(e>800)||n}),[r,o])}(S,_,e.settings.sidebarWidths,e.settings.sidebarToggles),j=function(e,t,n){return Object(i.useMemo)((function(){return e-Object.entries(n).reduce((function(e,n){var o=Object(r.a)(n,2),i=o[0],a=o[1];return e+(t(i)?1:0)*a}),0)}),[e,t,n])}(S,w,e.settings.sidebarWidths),E=Object(i.useMemo)((function(){return!Object(l.isElectron)()&&S<800}),[S]),x=function(e,t){var n=Object(i.useRef)(10);Object(i.useEffect)((function(){n.current=t}),[t]);var o=Object(i.useState)(null),a=Object(r.a)(o,2),s=a[0],u=a[1],c=Object(i.useCallback)((function(){var t,r=((null===(t=e.current)||void 0===t?void 0:t.scrollLeft)||0)/n.current;u(Number.isInteger(r)?r:null)}),[]);return Object(i.useEffect)((function(){var t;null===(t=e.current)||void 0===t||t.addEventListener("scroll",c)}),[e.current]),s}(n,S),C=Object(i.useState)(!1),T=Object(r.a)(C,2),D=T[0],M=T[1],L=Object(i.useState)(!1),A=Object(r.a)(L,2),N=A[0],F=A[1],R=Object(i.useState)(!1),U=Object(r.a)(R,2),H=U[0],W=U[1],z=Object(i.useState)(!1),V=Object(r.a)(z,2),K=V[0],G=V[1],Q=Object(i.useState)(!1),X=Object(r.a)(Q,2),Z=X[0],ee=X[1],ne=Object(i.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(E){var r=S,o=(null===(e=n.current)||void 0===e?void 0:e.scrollLeft)||0,i=o+t*r,a=333*t;setTimeout((function(){return Object(f.startAnimation)(o,i,a,(function(e){n.current&&(n.current.scrollLeft=e)}))}),100)}}),[]),oe=Object(i.useMemo)((function(){return function(t){var n,r=null===(n=v.derivedState.tagList.find((function(t){return Object(d.isExactPath)(t.tag.path,e.settings.selectedTagPath)})))||void 0===n?void 0:n.metaData.id,o=Object(l.bootstrapSnippet)("","",t.content,t.language,r?[r]:[]);b({type:"createSnippet",snippet:o}),setTimeout((function(){var e;return null===(e=a.current)||void 0===e?void 0:e.focus()}),E?500:100),ne()}}),[b,e.settings.selectedTagPath,v.derivedState.tagList]),ie=Object(p.useSubject)(),ae=function(e){var t=Object(i.useCallback)((function(){return e.dispatchSettings({type:"toggleSidebar",sidebar:"tags"})}),[]),n=Object(i.useCallback)((function(){return e.dispatchSettings({type:"toggleSidebar",sidebar:"snippetList"})}),[]),r=Object(i.useCallback)((function(){return e.dispatchSettings({type:"toggleSidebar",sidebar:"create",value:1})}),[]),o=Object(i.useCallback)((function(){return e.onAddSnippet({content:Object(l.getConfigForNew)()[2].bootstrap(),language:Object(l.getConfigForNew)()[0]})}),[e.onAddSnippet]),a=Object(i.useCallback)((function(){return e.setIsDoingQuickSearch(!0)}),[]),s=Object(i.useCallback)((function(){return e.setIsDoingSearch(!0)}),[]),u=Object(i.useCallback)((function(){return e.requestSearch.next()}),[e.requestSearch]),c=Object(i.useCallback)((function(){return e.setIsEditingAppSettings(!0)}),[]);return Object(i.useMemo)((function(){return{onToggleTags:t,onToggleSnippetList:n,onToggleCreateSidebar:r,onCreateNew:o,onStartQuickAccess:a,onStartSearchAll:s,onStartSearch:u,onStartEditingPreferences:c}}),[t,n,r,o,a,s,u,c])}({requestSearch:ie,dispatchSettings:e.dispatchSettings,onAddSnippet:oe,setIsDoingQuickSearch:F,setIsDoingSearch:W,setIsEditingAppSettings:M});!function(e){Object(i.useEffect)((function(){te(e)}),[e])}(ae),pe(ae);var se=function(e){b({type:"setSelectedSnippetId",id:e}),ne()},ue=function(t){e.dispatchSettings({type:"selectTagPath",path:t}),ne()},ce=Object(i.useRef)(e.settings.sidebarToggles);Object(i.useEffect)((function(){ce.current=e.settings.sidebarToggles}),[e.settings.sidebarToggles]);var le=Object(i.useMemo)((function(){return function(e){var t;return 1===(null===(t=ce.current)||void 0===t?void 0:t[e])}}),[]),fe=Object(p.useSubject)(),he=Object(p.useSubject)(),me=Object(i.useCallback)((function(){return le("snippetList")?fe.next():le("tags")?he.next():void 0}),[le,fe,he]),ge=v.selectedSnippetListEntry,ve=v.derivedState.snippetList.length>0?Object(o.jsx)(B,{snippetList:v.derivedState.snippetList,tagList:v.derivedState.tagList,settings:e.settings,resolvePossiblyOldId:function(e){return Object(l.resolvePossiblyOldId)(e,v)},runItemAction:e.settings.showOnlyDeleted?function(e){var t=e.snippet,n=e.metaData;return b({type:"restoreSnippet",id:n.id,snippet:t})}:function(e){var t=e.snippet,n=e.metaData;return b({type:"deleteSnippet",id:n.id,snippet:t})},listEntryIcon:(e.settings.showOnlyDeleted,"dots-horizontal"),selectedSnippetId:null===ge||void 0===ge?void 0:ge.metaData.id,setSelectedSnippetId:se,navigateLeft:function(){return w("tags")&&he.next()},navigateRight:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.focus()},requestFocus:fe,enableScrollIntoView:!E}):Object(o.jsx)(J,{}),be=ge&&Object(o.jsx)(l.SnippetEditor,{snippet:ge.snippet,metaData:ge.metaData,settings:e.settings,tagList:v.derivedState.tagList,allowReadMode:!1,onEscape:me,onChangeHasFocus:ee,onChangeIsDragging:G,requestSearch:ie,ref:a,uploadFile:null,dispatch:b,availableEditorWidth:j},"".concat(v.selectedSnippetId,"-").concat(v.snippetEditorReloadToken,"-").concat(e.settings.themeName)),ye=D&&Object(o.jsx)(p.Modal,{onClose:function(){return M(!1)},children:Object(o.jsx)(q,{})}),Oe=N&&Object(o.jsx)(h,{snippetList:v.derivedState.snippetList,onClose:function(){return F(!1)}}),Se=H&&Object(o.jsx)(g,{onClose:function(){return W(!1)},select:function(e){var t=function(e,t){var n=e.find((function(e){return e.metaData.id===t}));return n&&n.metaData.resolvedTags[0]&&n.metaData.resolvedTags[0].path}(v.derivedState.snippetList,e)||[];ue(t),se(e)},snippetList:v.derivedState.snippetList}),_e=Object(o.jsxs)("div",{className:"App-draggable-top-row",children:[Object(l.isWindows)()&&Object(o.jsx)(re,{}),!Object(l.isMac)()&&Object(o.jsx)(de,{menuActions:ae})]}),we=Object(o.jsxs)("div",{className:"App-full-screen-aware-top-row",children:[Object(o.jsx)("div",{className:"App-full-screen-aware-top-row-inner",children:Object(o.jsx)(k,{syncState:y})}),!Object(l.isMac)()&&Object(o.jsx)(de,{menuActions:ae})]}),je=["App","App-main","ClassicSnippetLayout"];Z&&je.push("App-editorHasFocus"),K&&je.push("App-isDragging"),e.settings.scrollbarStylingToggle&&je.push("App-scrollbarStyling");var Ee=Object(i.useMemo)((function(){return[{name:"dispatch",object:b},{name:"dispatchSettings",object:e.dispatchSettings},{name:"settings",object:e.settings}]}),[b,e.dispatchSettings,e.settings]),xe=["App-full-screen-wrapper",I(e.settings.themeName)].concat(Object(c.a)(e.settings.shrinkInFullScreen?["App-main-shrink"]:[]));return Object(o.jsx)(f.AppContext.Provider,{value:Ee,children:Object(o.jsxs)("div",{className:xe.join(" "),children:[_e,Object(o.jsxs)("div",{className:je.join(" "),ref:n,children:[we,Object(o.jsx)("div",{className:"App-full-screen-toggler",onClick:function(){return e.dispatchSettings({type:"toggleShrinkInFullScreen"})},children:Object(o.jsx)("i",{className:e.settings.shrinkInFullScreen?"mdi mdi-arrow-expand":"mdi mdi-arrow-collapse"})}),Object(o.jsx)("div",{className:"App-verticalDivider",children:Object(o.jsxs)("div",{className:"App-horizontalDivider",children:[Object(o.jsx)("div",{className:"App-loadingIndicator"}),!E&&Object(o.jsx)(p.Blurable,{onBlur:function(){return e.dispatchSettings({type:"toggleSidebar",sidebar:"create",value:0})},children:Object(o.jsx)(p.SidePanel,{state:w("create")?1:0,size:220,direction:"horizontal",children:Object(o.jsx)(O,{onAdd:oe})})}),Object(o.jsx)(p.ResizableSidePanel,{state:w("tags")?1:0,initialSize:e.settings.sidebarWidths.tags,onStopResize:function(t){return e.dispatchSettings({type:"setSidebarWidth",sidebar:"tags",value:t})},direction:"horizontal",children:v.derivedState.tagList.length>0?Object(o.jsx)(P,{tagList:v.derivedState.tagList,selectedPath:e.settings.selectedTagPath,onSelectPath:ue,onSelectArchive:function(){e.dispatchSettings({type:"selectArchive"}),ne()},showOnlyDeleted:e.settings.showOnlyDeleted,onRenamePath:function(e,t){return b({type:"renameTag",newLabelValue:e,path:t})},onDelete:function(e){return b({type:"deleteTag",path:e})},onToggleCollapsed:function(t,n){return e.dispatchSettings({type:"setCollapsedTagPath",path:t,collapsed:n})},collapsedPaths:e.settings.collapsedPaths,requestFocus:he,resolvePossiblyOldId:function(e){return Object(l.resolvePossiblyOldId)(e,v)},navigateRight:function(){var e;return w("snippetList")?fe.next():null===(e=a.current)||void 0===e?void 0:e.focus()}}):Object(o.jsx)(Y,{noSnippetsYet:0===v.derivedState.snippetList.length})}),Object(o.jsx)(p.ResizableSidePanel,{state:w("snippetList")?1:0,initialSize:e.settings.sidebarWidths.snippetList,onStopResize:function(t){return e.dispatchSettings({type:"setSidebarWidth",sidebar:"snippetList",value:t})},direction:"horizontal",children:ve}),ge&&be]})}),ye,Oe,Se,Object(o.jsx)("div",{id:"modal-root"})]}),E&&Object(o.jsx)($,{currentSection:x,onAdd:oe})]})})},he="snip-settings";function me(){var e=Object(l.useSettings)(Object(i.useMemo)((function(){return function(){var e=localStorage.getItem(he);return e&&JSON.parse(e)}()}),[])),t=Object(r.a)(e,2),n=t[0],o=t[1];return Object(i.useEffect)((function(){return function(e){localStorage.setItem(he,JSON.stringify(e))}(n)}),[n]),[n,o]}function ge(e){u.a.render(e,document.getElementById("root"))}var ve="localhost"===document.location.hostname;function be(){var e=me(),t=Object(r.a)(e,2),n=t[0],i=t[1],a=Object(l.useElectronState)(n,ve?"storage-dev":"storage"),s=Object(r.a)(a,1)[0];return s?Object(o.jsx)(f.ThemeContext.Provider,{value:n.themeName,children:Object(o.jsx)(fe,{electronState:s,settings:n,dispatchSettings:i})}):null}function ye(e){var t=me(),n=Object(r.a)(t,2),a=n[0],s=n[1],u=V(Object(f.getOriginSettings)(a,"cloud",e.cloudOriginConfig.defaultConfig),e.cloudOriginConfig),c=Object(i.useMemo)((function(){return[{name:"settings",object:a},{name:"dispatchSettings",object:s}]}),[a,s]);switch(u.ready){case!0:return Object(o.jsx)(be,{});case"pending":return Object(o.jsx)("span",{children:"Checking login state ..."});case!1:return Object(o.jsx)(f.AppContext.Provider,{value:c,children:Object(o.jsx)("div",{className:"App App-main ClassicSnippetLayout ".concat(I(a.themeName)),children:e.cloudOriginConfig.settingsPage})})}}var Oe=l.originConfigs.find((function(e){return"cloud"===e.origin}));!function(){if(Object(l.isElectron)())return ge(Object(o.jsx)(be,{}));ge(Oe?Object(o.jsx)(ye,{cloudOriginConfig:Oe}):"Loading snip client failed ...")}()}],[[361,1,2]]]);